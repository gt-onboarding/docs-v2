---
title: "アクショントリガー：ユーザー登録前 - APIオブジェクト"
permalink: "pre-user-registration-api-object"
'description': "ユーザー登録前アクショントリガーのAPIオブジェクトについて説明します。"
'og:title': "アクショントリガー：ユーザー登録前 - APIオブジェクト"
'og:description': "ユーザー登録前アクショントリガーのAPIオブジェクトについて説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "アクショントリガー：ユーザー登録前 - APIオブジェクト"
'twitter:description': "ユーザー登録前アクショントリガーのAPIオブジェクトについて説明します。"
---

ユーザー登録前アクショントリガーのAPIオブジェクトには以下が含まれます。

### api.access

登録試行の拒否など、ログインしているユーザーのアクセスを修正します。

<div id="apiaccessdenyreason-usermessage">
  ### api.access.deny(reason, userMessage)
</div>

ユーザーが登録することを拒否します。このアクションの完了後、サインアップフローはすぐに停止し、以降のアクションは実行されません。

`api`オブジェクトに参考情報を返します。

### api.cache

実行間で維持されるデータの保管と取得を行います。

<div id="apicachedeletekey">
  ### api.cache.delete(key)
</div>

提供されたkeyにキャッシュ済みの値が存在する場合は、それを記述したレコードを削除します。

値がキャッシュから削除されると、`CacheWriteResult`オブジェクトに`type: "success"`を含めて返します。操作に失敗すると、`type: "error"`を返します。エラーの場合には、返すオブジェクトに`code`プロパティを含めて、失敗の詳細を示します。

<div id="apicachegetkey">
  ### api.cache.get(key)
</div>

提供された`key`にキャッシュ済みの値が存在する場合は、それを記述したレコードを取得します。レコードが見つかった場合には、返されたオブジェクトの`value`プロパティにキャッシュ済みの値があります。

提供された`key`にキャッシュが見つかった場合には、キャッシュレコードを返します。キャッシュレコードは`value`プロパティを含むオブジェクトで、このプロパティにはキャッシュ済みの値の他にも`expires_at`プロパティが含まれ、レコードの最大有効期間をUNIXエポックからの経過ミリ秒数で示します。

**重要：** このキャッシュは、短命で一時的なデータ向けに設計されています。項目が所定のライフタイム内であったとしても、後のトランザクションでは利用できないかもしれません。

<div id="apicachesetkey-value-options">
  ### api.cache.set(key, value, [options])
</div>

指定されたkeyのキャッシュに文字列値を保管または更新します。

このキャッシュに保管された値は、それを設定するトリガーにスコープが限定されます。これは[アクションのキャッシュ制限](https://auth0.com/docs/customize/actions/limitations)の対象になります。

このように保管された値には、指定された`ttl`または`expires_at`値までのライフタイムがあります。ライフタイムが指定されない場合には、デフォルトのライフタイムである15分が使用されます。ライフタイムは[アクションのキャッシュ制限](https://auth0.com/docs/customize/actions/limitations)が定める最大値を超過してはいけません。

### api.user

登録しているユーザーのメタデータの変更を行います。

<div id="apiusersetusermetadataname-value">
  ### api.user.setUserMetadata(name, value)
</div>

登録しているユーザーのメタデータを設定します。user&#95;metadataに保存されたデータは、ユーザーが視覚的に確認でき、編集することができます。

注意：このトリガーは<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/docs/ja-JP/ja-jp/glossary?term=management-api" tip="Management API: 顧客が管理タスクを実行できるようにするための製品。" cta="用語集の表示">Management API</Tooltip>を呼び出し、Management APIレート制限を消費します。この要求がレート制限に達し、タイムアウト制限時間内に再試行できなかった場合、APIは`Deadline Exceeded`エラーを返します。

<div id="apiusersetappmetadataname-value">
  ### api.user.setAppMetaData(name, value)
</div>

登録しているユーザーのアプリケーションメタデータを設定します。app&#95;metadataに保存されたデータは、ユーザーが視覚的に確認または編集することができません。

注意：このトリガーはManagement APIを呼び出し、Management APIレート制限を消費します。この要求がレート制限に達し、タイムアウト制限時間内に再試行できなかった場合、APIは`Deadline Exceeded`エラーを返します。

`api`オブジェクトに参考情報を返します。

### api.valdation

拒否されたユーザー登録に対するカスタムのエラーメッセージを構築します。

<div id="apivalidationerrorerrorcode-errormessage">
  ### api.valdation.error(errorCode, errorMessage)
</div>

拒否された登録試行に対するカスタムエラーコードとユーザーへのメッセージを定義します。

ユーザーによる登録試行が拒否されると、現在のアクションが完了次第サインアップフローはすぐに停止し、それ以上のアクションは実行されません。