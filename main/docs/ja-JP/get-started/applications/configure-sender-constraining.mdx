---
description: Auth0 でトークンの送信者制約を行う方法を学びます。
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 送信者制約
'og:url': https://auth0.com/docs/
permalink: configure-sender-constraining
title: 送信者制約
'twitter:description': Auth0 でトークンの送信者制約を行う方法を学びます。
'twitter:title': 送信者制約
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">
  Demonstrating Proof-of-Possession (DPoP) を使用したトークンの送信者制約は現在 Early Access です。この機能へのアクセスをリクエストするには、Auth0 の担当者にお問い合わせください。
</Callout>

送信者制約は、<Tooltip tip="" cta="View Glossary" href="/docs/ja-JP/glossary?term=OAuth+2.0">OAuth 2.0</Tooltip> と <Tooltip tip="" cta="View Glossary" href="/docs/ja-JP/glossary?term=OpenID">OpenID</Tooltip> Connect (OIDC) のセキュリティメカニズムであり、アクセストークンおよび <Tooltip tip="" cta="View Glossary" href="/docs/ja-JP/glossary?term=refresh+tokens">リフレッシュトークン</Tooltip> を、それらを要求したアプリケーションに暗号的にひも付けることで、トークンの窃取や不正使用を防止します。

従来、OAuth 2.0 の <Tooltip tip="" cta="View Glossary" href="/docs/ja-JP/glossary?term=access+tokens">アクセストークン</Tooltip> は Bearer トークンであり、トークンを「所持」している者は誰でもそれを使用できることを意味します。Bearer トークンが盗まれたり漏えいしたりすると、攻撃者はそれを <Tooltip tip="" cta="View Glossary" href="/docs/ja-JP/glossary?term=resource+server">リソースサーバー</Tooltip> (API) に提示し、正当なクライアントアプリケーションやユーザーになりすまして不正アクセスを行うことができます。

送信者制約により、リソースサーバーにアクセストークンを提示するクライアントアプリケーションが、そのアクセストークンの正当な所有者であることが保証されます。クライアントアプリケーションがアクセストークンの正当な所有者でない場合、リソースサーバーはその API リクエストを拒否します。

<div id="how-it-works">
  ## 動作の仕組み
</div>

送信者制約は、次の 2 つの方法のいずれかで実装できます。

* トランスポート層での Mutual-TLS (mTLS) 証明書バインディング:

  * **メカニズム:** クライアントアプリケーションが Auth0 認可サーバーからアクセストークンを要求する際、クライアントアプリケーションとサーバーの双方が互いの X.509 証明書を提示・検証する、相互 TLS (mTLS) 接続を確立します。
  * **バインディング:** Auth0 認可サーバーは、発行するアクセストークンの中に、クライアントアプリケーションの証明書のサムプリントを含む確認 (`cnf`) クレームを含めます。
  * **所有証明:** クライアントアプリケーションが mTLS でバインドされたアクセストークンを使用してリソースサーバーにアクセスする際は、同じ証明書を使用して再度 mTLS 接続を確立する必要があります。リソースサーバーは、クライアントアプリケーションが提示した証明書が、アクセストークンにバインドされている証明書と一致するかを検証します。一致しない場合、リソースサーバーはリクエストを拒否します。
  * **利点:** たとえ攻撃者がアクセストークンを盗んだとしても、正しい mTLS 接続を確立するために必要な対応する秘密鍵と証明書を保持していないため、そのトークンを使用することはできません。mTLS による送信者制約は、X.509 証明書とその秘密鍵を安全に保管・管理できるサーバーサイドアプリケーションなどの機密クライアントで一般的に利用されます。
* アプリケーション層での Demonstrating Proof-of-Possession (DPoP):

  * **メカニズム:** DPoP はアプリケーション層で動作し、mTLS を必要としません。その代わりに、クライアントアプリケーション自身が暗号鍵ペア (秘密鍵/公開鍵) を生成します。
  * **バインディング:** アクセストークンを要求する際、クライアントアプリケーションは DPoP Proof JWT と呼ばれる JSON Web Token (JWT) を作成します。この Proof JWT にはクライアントの公開鍵が含まれ、クライアントの秘密鍵で署名されます。クライアントアプリケーションは、アクセストークンのリクエストと共に DPoP Proof JWT を送信します。Auth0 認可サーバーは DPoP Proof JWT を検証し、その後、発行するアクセストークンをその公開鍵にバインドします。
  * **所有証明:** クライアントアプリケーションが DPoP でバインドされたアクセストークンを使用してリソースサーバーの API を呼び出す際、その API リクエスト用に、自身の秘密鍵で署名された別の DPoP Proof JWT を生成します。クライアントアプリケーションは、アクセストークンと一緒にヘッダーで DPoP Proof JWT を送信します。リソースサーバーは、アクセストークンが DPoP Proof JWT 内の公開鍵にバインドされていること、そして確認 (`cnf`) クレームを使用して、DPoP Proof JWT 自体が対応する秘密鍵で署名されていることを検証します。
  * **利点:** DPoP は公開鍵基盤を必要としないため、mTLS より柔軟です。SPA やモバイルアプリケーションなどのパブリッククライアントを含む、さまざまなクライアントタイプで利用できます。

<div id="mtls-vs-dpop">
  ## mTLS と DPoP の比較
</div>

次の表は、送信者制約されたトークンにおける mTLS と DPoP の大まかな違いをまとめたものです。

<table class="table">
  <thead>
    <tr>
      <th><strong>属性</strong></th>
      <th><strong>mTLS</strong></th>
      <th><strong>DPoP</strong></th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>動作レイヤ</td>
      <td>トランスポート層 (TLS/SSL)</td>
      <td>アプリケーション層 (HTTP ヘッダー)</td>
    </tr>

    <tr>
      <td>暗号方式</td>
      <td>公開鍵基盤 (X.509 証明書) を使用</td>
      <td>非対称鍵 (クライアントが生成する鍵ペア) を使用</td>
    </tr>

    <tr>
      <td>Proof of Possession</td>
      <td>TLS ハンドシェイクと証明書検証</td>
      <td>DPoP Proof (各リクエストごとに HTTP ヘッダーで送信される署名付き JWT)</td>
    </tr>

    <tr>
      <td>クライアントの種類</td>
      <td>機密クライアント</td>
      <td>パブリッククライアント (SPA、モバイルアプリ)</td>
    </tr>
  </tbody>
</table>

詳細については、[mTLS Sender Constraining](/docs/ja-JP/secure/sender-constraining/mtls-sender-constraining) と [Demonstrating Proof-of-Possession (DPoP)](/docs/ja-JP/secure/sender-constraining/demonstrating-proof-of-possession-dpop) を参照してください。

<div id="get-started">
  ## はじめに
</div>

Auth0 で Sender Constraining の利用を開始するには、以下を参照してください。

<table class="table">
  <thead>
    <tr>
      <th><strong>ドキュメント</strong></th>
      <th><strong>学べる内容</strong></th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td><a href="/docs/ja-JP/secure/sender-constraining/mtls-sender-constraining">mTLS Sender Constraining</a></td>
      <td>Auth0 における mTLS Sender Constraining の仕組みをステップごとに解説します。</td>
    </tr>

    <tr>
      <td><a href="/docs/ja-JP/secure/sender-constraining/demonstrating-proof-of-possession-dpop">Demonstrating Proof-of-Possession (DPoP)</a></td>
      <td>Auth0 における DPoP の仕組みをステップごとに解説します。</td>
    </tr>

    <tr>
      <td><a href="/docs/ja-JP/secure/sender-constraining/configure-sender-constraining">Configure Sender Constraining</a></td>
      <td>Auth0 でクライアント アプリケーションおよびリソース サーバー向けに Sender Constraining を構成する方法を説明します。</td>
    </tr>
  </tbody>
</table>

<div id="learn-more">
  ## さらに詳しく
</div>

* [mTLS Sender Constraining](/docs/ja-JP/secure/sender-constraining/mtls-sender-constraining)
* [Proof-of-Possession (DPoP) の証明](/docs/ja-JP/secure/sender-constraining/demonstrating-proof-of-possession-dpop)
* [Sender Constraining の設定](/docs/ja-JP/secure/sender-constraining/configure-sender-constraining)