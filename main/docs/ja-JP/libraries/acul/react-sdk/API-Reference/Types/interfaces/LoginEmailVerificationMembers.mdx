---
title: "LoginEmailVerificationMembers"
---

LoginEmailVerificationMembers
description Login Email Verification 画面との対話に利用できるメンバー（プロパティおよびメソッド）を定義します。
この画面はメールアドレス検証プロセス、特にログイン時において重要な役割を果たします。ユーザーはワンタイムコードを入力することで
メールアドレスの所有権を証明する必要があります。ソフトウェア開発キット (SDK) は、このコードの送信や
新しいコードの再送要求の実行を支援します。

この画面の `universal_login_context`（`window.universal_login_context`）には次の内容が含まれます:

- `client`: Auth0 アプリケーションに関する情報。
- `organization`（任意）: 特定の組織向けの認証である場合の詳細。
- `prompt`: 現在の認証プロンプトのコンテキスト（例: 'login'）。
- `screen`: UI テキストおよび一般的な画面情報。標準的なもの以外に、`login-email-verification` 用に固有に定義された画面固有の `data` フィールドはありません。
- `transaction`: 進行中のトランザクションの詳細。`state` や、前回の試行からのエラー（例: "invalid-code"）が含まれます。

````ts Example
export interface LoginEmailVerificationMembers extends BaseMembers {
  /**
   * ユーザーが入力したメール検証コードを送信します。
   * このアクションは、ユーザーがメールで受信したコードを入力し、
   * 「続行」または「検証」ボタンをクリックすることに対応します。SDK はこのコードを
   * Auth0 の `/u/login-email-verification` エンドポイントに POST します。
   *
   * コードが有効な場合、Auth0 は通常、ユーザーを認証フローの次のステップにリダイレクトします。
   * コードが無効、期限切れ、またはその他のエラーが発生した場合、
   * Auth0 は通常、login-email-verification 画面を再レンダリングし、
   * SDK のコンテキスト内の `transaction.errors` 配列が失敗の詳細
   * (例: エラーコード `invalid-code`) で更新されます。
   *
   * @param {ContinueWithCodeOptions} payload - ユーザーが入力した `code` 文字列を含むオブジェクト。
   *                                            拡張性のために `CustomOptions` を含めることもできます。
   * @returns {Promise<void>} フォーム送信が開始されたときに解決される Promise。
   *                          リダイレクトまたはページの再レンダリングが一般的な結果であるため、
   *                          解決時にデータを直接返しません。
   * @throws {Error} `payload.code` が提供されていない、または文字列でない場合、
   *                 または `FormHandler` が送信中に回復不可能な問題 (例: ネットワークエラー) に遭遇した場合にエラーをスローします。
   *                 Auth0 からの検証エラー (無効なコードなど) は JavaScript エラーとしてスローされず、
   *                 操作後に `this.transaction.errors` に反映されます。
   *
   * @example
   * ```typescript
   * // 'manager' が LoginEmailVerification のインスタンスであると仮定
   * const userInputCode = "123456";
   * try {
   *   await manager.continueWithCode({ code: userInputCode });
   *   // 成功した場合、ページがリダイレクトされます。ここではクライアント側のさらなるアクションは不要です。
   * } catch (error) {
   *   // この catch は予期しないエラー用であり、Auth0 検証エラー用ではありません。
   *   console.error("検証コードの送信に失敗しました:", error);
   * }
   * // await の後、サーバー側の検証問題について常に manager.transaction.errors を確認してください。
   * if (manager.transaction.errors && manager.transaction.errors.length > 0) {
   *   manager.transaction.errors.forEach(err => {
   *     if (err.code === 'invalid-code') {
   *       // ユーザーに「入力されたコードが無効です」と表示します。
   *     }
   *   });
   * }
   * ```
   */
  continueWithCode(payload: ContinueWithCodeOptions): Promise<void>;

  /**
   * Requests a new verification code to be sent to the user's email address.
   * This action is typically invoked when the user clicks a "Resend Code" button, perhaps because
   * they didn't receive the first email, the code expired, or they suspect an issue.
   * The SDK will POST to the Auth0 `/u/login-email-verification` endpoint with an action indicating
   * a resend request.
   *
   * Upon successful submission of this request, Auth0 attempts to send a new email.
   * The page may re-render. If there are issues (e.g., too many resend attempts for the same email,
   * identified by error code `too-many-emails`), `transaction.errors` will be updated.
   *
   * @param {ResendCodeOptions} [payload] - Optional. An object for `CustomOptions` if any
   *                                        additional parameters need to be sent with the request.
   * @returns {Promise<void>} A promise that resolves when the resend request is initiated.
   *                          Like `continueWithCode`, this usually results in a page re-render or state update
   *                          rather than direct data in the promise resolution.
   * @throws {Error} Throws if the `FormHandler` encounters an unrecoverable issue (e.g., network error).
   *                 Server-side errors (like rate limits) are reflected in `this.transaction.errors`.
   *
   * @example
   * ```typescript
   * // Assuming 'manager' is an instance of LoginEmailVerification
   * try {
   *   await manager.resendCode();
   *   // Optionally, update UI to inform the user a new code has been sent.
   *   alert("A new verification code has been dispatched to your email.");
   * } catch (error) {
   *   console.error("Failed to request a new code:", error);
   * }
   * // After the await, check manager.transaction.errors for server-side issues.
   * if (manager.transaction.errors && manager.transaction.errors.length > 0) {
   *   manager.transaction.errors.forEach(err => {
   *     if (err.code === 'too-many-emails') {
   *       // Display "You have requested too many emails. Please wait a few minutes."
   *     }
   *   });
   * }
   * ```
   */
  resendCode(payload?: ResendCodeOptions): Promise<void>;

  /**
   * Gets resend functionality with timeout management for this screen
   * @param options Configuration options for resend functionality
   */
  resendManager(options?: StartResendOptions): ResendControl;
}
````

<div id="properties">
  ## プロパティ
</div>

<ParamField body='branding' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/BrandingMembers">BrandingMembers</a></span>}/>

<ParamField body='client' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/ClientMembers">ClientMembers</a></span>}/>

<ParamField body='organization' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/OrganizationMembers">OrganizationMembers</a></span>}/>

<ParamField body='prompt' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/PromptMembers">PromptMembers</a></span>}/>

<ParamField body='screen' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/ScreenMembers">ScreenMembers</a></span>}/>

<ParamField body='tenant' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/TenantMembers">TenantMembers</a></span>}/>

<ParamField body='transaction' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/TransactionMembers">TransactionMembers</a></span>}/>

<ParamField body='untrustedData' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/UntrustedDataMembers">UntrustedDataMembers</a></span>}/>

<ParamField body='user' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/UserMembers">UserMembers</a></span>}/>

<div id="methods">
  ## メソッド
</div>

<ParamField body='continueWithCode' type='Promise<void>'>

ユーザーが入力したメールの確認コードを送信します。
このアクションは、ユーザーがメールで受け取ったコードを入力し、
「Continue」または「Verify」ボタンをクリックする操作に対応します。SDK はこのコードを
Auth0 の `/u/login-email-verification` エンドポイントに POST します。

コードが有効な場合、Auth0 は通常、ユーザーを認証フローの次のステップへリダイレクトします。
コードが無効、期限切れ、またはその他のエラーが発生した場合、
Auth0 は通常 login-email-verification 画面を再表示し、
SDK のコンテキスト内の `transaction.errors` 配列が、
失敗の詳細（例: エラーコード `invalid-code`）で更新されます。

フォーム送信が開始された時点で解決される Promise です。
解決時にデータを直接返すことはなく、リダイレクトまたは
ページの再レンダリングが一般的な結果となります。

<div id="throws">
  #### スローされる例外
</div>

`payload.code` が指定されていない、または文字列ではない場合、
あるいは送信中に `FormHandler` が回復不能な問題に遭遇した場合（例: ネットワークエラー）にエラーをスローします。
Auth0 からの検証エラー（無効なコードなど）は JavaScript のエラーとしてはスローされず、
処理後に `this.transaction.errors` に反映されます。

```typescript Example
// 'manager' が LoginEmailVerification のインスタンスであると仮定
const userInputCode = "123456";
try {
  await manager.continueWithCode({ code: userInputCode });
  // 成功した場合、ページはリダイレクトされます。ここでクライアント側で追加の処理は不要です。
} catch (error) {
  // この catch は Auth0 の検証エラーではなく、想定外のエラー用です。
  console.error("Failed to submit the verification code:", error);
}
// await の後は、常に manager.transaction.errors を確認してサーバー側の検証エラーがないか確認してください。
if (manager.transaction.errors && manager.transaction.errors.length > 0) {
  manager.transaction.errors.forEach(err => {
    if (err.code === 'invalid-code') {
      // ユーザーに「入力したコードが無効です」と表示します。
    }
  });
}
```

<Expandable title="パラメーター">
<ParamField body='payload' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/ContinueWithCodeOptionPayload">ContinueWithCodeOptionPayload</a></span>}>
ユーザーが入力した `code` 文字列を含むオブジェクトです。
拡張性のために、任意の `CustomOptions` を含めることもできます。

**プロパティ**

<ParamField body='code' type='string'>
ユーザーのメールに送信された確認コードです。通常は短い数字
または英数字の文字列であり、ユーザーはこれをフォームに入力する必要があります。
</ParamField>
</ParamField>

</Expandable>
</ParamField>

<ParamField body='resendCode' type='Promise<void>'>

ユーザーのメールアドレス宛てに、新しい確認コードの送信を要求します。
このアクションは通常、ユーザーが「Resend Code」ボタンをクリックしたときに呼び出されます。たとえば、
最初のメールを受け取っていない場合や、コードの有効期限が切れた場合、
あるいは何らかの問題が発生していると考えられる場合などです。
SDK は再送要求を示す action と共に、Auth0 の `/u/login-email-verification` エンドポイントに対して POST を行います。

このリクエストが正常に送信されると、Auth0 は新しいメールの送信を試みます。
ページが再レンダリングされる場合があります。問題がある場合（例: 同じメールアドレスに対して
再送を試みる回数が多すぎる場合で、エラーコード `too-many-emails` により識別される）には、
`transaction.errors` が更新されます。

再送要求の開始時に解決される Promise です。
`continueWithCode` と同様に、通常は Promise の解決時に直接データを返すのではなく、
ページの再レンダリングや state の更新が行われます。

<div id="throws">
  #### スローされる例外
</div>

`FormHandler` が回復不能な問題（例: ネットワークエラー）に遭遇した場合にスローされます。
サーバー側のエラー（レート制限など）は `this.transaction.errors` に反映されます。

```typescript Example
// 'manager' が LoginEmailVerification のインスタンスであると仮定
try {
  await manager.resendCode();
  // 新しいコードが送信されたことをユーザーに知らせるために UI を更新してもよい。
  alert("A new verification code has been dispatched to your email.");
} catch (error) {
  console.error("Failed to request a new code:", error);
}
// await の後で、サーバー側の問題がないか manager.transaction.errors を確認する。
if (manager.transaction.errors && manager.transaction.errors.length > 0) {
  manager.transaction.errors.forEach(err => {
    if (err.code === 'too-many-emails') {
      // 「メールの再送要求が多すぎます。数分待ってから再度お試しください。」などを表示
    }
  });
}
```

<Expandable title="パラメーター">
<ParamField body='payload?' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/ResendCodeOptionsPayload">ResendCodeOptionsPayload</a></span>}>
任意。リクエストと共に追加のパラメーターを送信する必要がある場合の、
`CustomOptions` 用オブジェクトです。
</ParamField>

</Expandable>
</ParamField>

<ParamField body='resendManager' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/ResendControl">ResendControl</a></span>}>

この画面用の、タイムアウト管理付き再送機能を取得します

<Expandable title="パラメーター">
<ParamField body='options?' type={<span><a href="/docs/libraries/acul/react-sdk/API-Reference/Types/interfaces/StartResendOptions">StartResendOptions</a></span>}>
再送機能の設定オプション

**プロパティ**

<ParamField body='onStatusChange?' type={<span><a href="/docs-v2/main//docs/libraries/acul/react-sdkScreens/type-aliases/OnStatusChangeCallback">OnStatusChangeCallback</a></span>}/>

<ParamField body='onTimeout' type='void'/>

<ParamField body='timeoutSeconds?' type='number'/>
</ParamField>

</Expandable>
</ParamField>