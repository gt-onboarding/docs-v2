---
title: NGINX Plus

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/ja-JP/recipe.jsx";
import { LoggedInForm } from "/snippets/ja-JP/Login.jsx";
import Nginx from "/snippets/ja-JP/quickstart/webapp/nginx-plus/nginx.conf.mdx";
import OpenidConnectionConfiguration from "/snippets/ja-JP/quickstart/webapp/nginx-plus/openid_connection_configuration.conf.mdx";
import OpenidConnect from "/snippets/ja-JP/quickstart/webapp/nginx-plus/openid_connect.server_conf.mdx";
import Frontend from "/snippets/ja-JP/quickstart/webapp/nginx-plus/frontend.conf.mdx";

import {AuthCodeGroup} from "/snippets/ja-JP/AuthCodeGroup.jsx";

export const sections = [
  { id: "system-requirements", title: "システム要件" },
  { id: "install-and-enable-nginx-plus-module-njs-module", title: "nginx-plus-module-njs モジュールをインストールして有効にする" },
  { id: "checkout-nginx-openid-connect-template-repository", title: "nginx-openid-connect テンプレート リポジトリをチェックアウトする" },
  { id: "configure-nginx-with-your-auth0-application-details", title: "Auth0 アプリケーションの詳細を使用して NGINX を構成する" },
  { id: "configure-accept-encoding-header-for-token-and-jwks-endpoints", title: "トークンおよび JWKS エンドポイント向けに Accept-Encoding ヘッダーを設定する" },
  { id: "copy-openid-connect-configuration-files", title: "OpenID Connect 構成ファイルをコピーする" },
  { id: "configure-auth0-application-settings", title: "Auth0 アプリケーションの設定を行う" },
  { id: "pass-headers-to-upstream-application", title: "アップストリーム アプリケーションにヘッダーを渡す" }
]


<Recipe isSingleColumn>
  <Content>
    このチュートリアルでは、nginx-openid-connectモジュールを使用してNGINXサーバーに認証と認可を追加する方法を説明します。アカウント用に設定された例を使ってこのクイックスタートを進めるには、ログインすることをお勧めします。

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      このチュートリアルおよびシードプロジェクトは、次の環境でテスト済みです。

      * NGINX Plus R24

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      まず、NGINX Plus の `nginx-plus-module-njs` モジュールをインストールする必要があります。

      ホスト OS 上にパッケージをインストールするには、動的モジュールのインストールガイドに従ってください。

      `yum` パッケージマネージャーを使用する Linux ディストリビューションでは、次のようにモジュールをインストールできます。

      ```sh lines
      sudo yum install nginx-plus-module-njs jq
      ```

      インストールが完了したら、NGINX で有効にするために、`/etc/nginx/nginx.conf` ファイルの先頭付近に次の行を追加します。

      ```sh lines
      load_module modules/ngx_http_js_module.so;
      ```

      <AuthCodeGroup>
        <Nginx />

        <OpenidConnectionConfiguration />

        <OpenidConnect />

        <Frontend />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      `nginx-openid-connect` リポジトリをクローンします。このリポジトリにはテンプレート設定が含まれています。

      ```sh lines
      git clone https://github.com/nginxinc/nginx-openid-connect
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      nginx-openid-connect フォルダー内で configure.sh スクリプトを実行し、Auth0 Application 用のテンプレート設定を作成します。

      ```sh lines
      ./configure.sh --auth_jwt_key request \
      --client_id {yourClientId} \
      --pkce_enable \
      https://{yourDomain}/.well-known/openid-configuration
      ```

      次に、[テナントのログアウト URL](https://auth0.com/docs/api/authentication#auth0-logout) を
      `openid_connect_configuration.conf` ファイルに追加します。

      <AuthCodeGroup>
        <OpenidConnectionConfiguration />

        <Nginx />

        <OpenidConnect />

        <Frontend />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      `openid_connect.server_conf` ファイルで `Accept-Encoding` ヘッダーを追加し、その値を `gzip` に設定します。

      <AuthCodeGroup>
        <OpenidConnect />

        <Nginx />

        <OpenidConnectionConfiguration />

        <Frontend />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      4つの設定ファイルを `conf.d` ディレクトリにコピーします。

      ```sh lines
      sudo cp openid_connect.js \ 
      frontend.conf \
      openid_connect_configuration.conf \
      openid_connect.server_conf /etc/nginx/conf.d
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Auth0 Dashboard で、次の手順を実行します。

      1. **Applications** &gt; **Applications** に移動し、一覧から対象のアプリケーションを選択します。
      2. **Settings** ビューに切り替えます。
      3. **Application URIs** セクションで、`https://{yourDomain}/_codexch` を **Allowed Callback URLs** に追加します。
      4. **Credentials** ビューに切り替えます。

      **Application Authentication** セクションで、**Authentication Method** を **None** に設定します。

      <LoggedInForm />
    </Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8" isSingleColumn>
      `/etc/nginx/conf.d/frontend.conf` ファイルで、IDトークン (JWT) に含まれる追加ヘッダーをアップストリームターゲットに追加します。

      <AuthCodeGroup>
        <Frontend />

        <Nginx />

        <OpenidConnectionConfiguration />

        <OpenidConnect />
      </AuthCodeGroup>
    </Section>

    ## 次のステップ

    素晴らしい!ここまで進めたなら、アプリケーションでログイン、ログアウト、およびユーザープロファイル情報が実装されているはずです。

    これでクイックスタートチュートリアルは終了ですが、他にも多くの機能があります。Auth0でできることの詳細については、以下をご確認ください:

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Auth0 テナントおよびアプリケーションの設定と管理方法を学ぶ
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Auth0 の機能を拡張するために有効化できる連携機能を見つける
  </Content>
</Recipe>