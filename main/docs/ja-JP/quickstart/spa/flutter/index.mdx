---
mode: wide
description: このガイドでは、Auth0 Flutter ソフトウェア開発キット (SDK) を使用して、Flutter アプリケーションに Auth0 を統合する方法を紹介します。
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 'Auth0 Flutter (Web) SDK クイックスタート: Flutter アプリケーションにログイン機能を追加する'
'og:url': https://auth0.com/docs/
sidebarTitle: Flutter (Web)
title: Flutter アプリケーションにログイン機能を追加する
'twitter:description': このガイドでは、Auth0 Flutter ソフトウェア開発キット (SDK) を使用して、Flutter アプリケーションに Auth0 を統合する方法を紹介します。
'twitter:title': 'Auth0 Flutter (Web) SDK クイックスタート: Flutter アプリケーションにログイン機能を追加する'
---

import {AuthCodeGroup} from "/snippets/ja-JP/AuthCodeGroup.jsx";

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/ja-JP/recipe.jsx"
import MainView from "/snippets/ja-JP/quickstart/spa/flutter/main_view.mdx"
import ProfileView from "/snippets/ja-JP/quickstart/spa/flutter/profile_view.mdx"

export const sections = [
  { id: "configure-auth0", title: "Auth0 を構成する" },
  { id: "install-the-auth0-flutter-sdk", title: "Auth0 Flutter SDK をインストールする" },
  { id: "add-login-to-your-application", title: "アプリケーションにログイン機能を追加する" },
  { id: "add-logout-to-your-application", title: "アプリケーションにログアウト機能を追加する" },
  { id: "show-user-profile-information", title: "ユーザー プロファイル情報を表示する" }
]

<Recipe>
  <Content>
    Auth0を使用すると、アプリケーションに認証を迅速に追加し、ユーザープロファイル情報にアクセスできます。このガイドでは、[Auth0 Flutter SDK](https://github.com/auth0/auth0-flutter)を使用して、Auth0をFlutterアプリケーションに統合する方法を説明します。

    <Info>
      Flutter SDK は現在、Android、iOS、または Web 上で動作する Flutter アプリケーションのみをサポートしています。
    </Info>

    このクイックスタートは、[Flutter](https://flutter.dev/) アプリケーションがすでに稼働していることを前提としています。まだの場合は、[Flutter の「はじめに」ガイド](https://docs.flutter.dev/get-started/install)を参照して、シンプルなアプリを作成してください。

    [Flutterコマンドラインツール](https://docs.flutter.dev/reference/flutter-cli)についても理解しておく必要があります。

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Auth0 にサインアップしたときに、新しいアプリケーションが作成されているか、もしくはご自身で新しくアプリケーションを作成しているはずです。
      Auth0 と連携するには、そのアプリケーションに関するいくつかの情報が必要になります。これらの情報は Auth0 Dashboard の [Application
      Settings](https://manage.auth0.com/#/applications) セクションから取得できます。

      <Frame>
        <img src="/docs/images/cdy7uua7fh8z/6SC7KnyzCyO8cwXQfril1X/c0d6756c28de0ddcbe938307e529d47a/client_settings.png" />
      </Frame>

      <Info>
        Native または Single Page Application で Default App を使用する場合は、**Token
        Endpoint Authentication Method** を `None` に更新し、**Application Type** を
        `SPA` または `Native` のいずれかに設定してください。
      </Info>

      次の情報が必要です。

      * **Domain**
      * **Client ID**

      <Info>
        このページ上部からサンプルをダウンロードした場合、これらの情報はあらかじめ入力されています。
      </Info>

      ### コールバックURLの設定

      コールバックURLは、ユーザーが認証された後に Auth0 がアプリケーションへリダイレクトする URL です。
      アプリのコールバックURLは、[Application
      Settings](https://manage.auth0.com/#/applications) の **Allowed Callback URLs** フィールドに追加する必要があります。このフィールドが設定されていない場合、ユーザーはアプリケーションにログインできず、エラーが発生します。

      <Info>
        このページ上部からダウンロードしたサンプルプロジェクトに従っている場合、**Allowed Callback URL** を `http://localhost:3000` に設定してください。
      </Info>

      ### ログアウトURLの設定

      ログアウトURLは、ユーザーが認可サーバーからログアウトされた後に、Auth0 がアプリケーションにリダイレクトできる URL です。これは `returnTo` クエリパラメーターで指定されます。アプリのログアウトURLは、[Application Settings](https://manage.auth0.com/#/applications) の **Allowed Logout URLs** フィールドに追加する必要があります。このフィールドが設定されていない場合、ユーザーはアプリケーションからログアウトできず、エラーが発生します。

      <Info>
        このページ上部からダウンロードしたサンプルプロジェクトに従っている場合、**Allowed Logout URLs** フィールドに追加する必要があるログアウトURLは `http://localhost:3000` です。
      </Info>

      ### Allowed Web Origins の設定

      アプリの URL を [Application Settings](https://manage.auth0.com/#/applications/\{yourClientId}/settings) の **Allowed Web Origins** フィールドに追加する必要があります。ここにアプリケーションの URL を登録しない場合、アプリケーションは認証トークンをサイレントリフレッシュできず、ユーザーは次回アプリケーションにアクセスしたとき、またはページを更新したときにログアウトされてしまいます。

      <Info>
        このページ上部からダウンロードしたサンプルプロジェクトに従っている場合、**Allowed Web Origins** を `http://localhost:3000` に設定してください。
      </Info>
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      Auth0 Flutter ソフトウェア開発キット (SDK) をプロジェクトに追加します：

      ```bash
      flutter pub add auth0_flutter
      ```

      次の `script` タグを `index.html` ページに追加します。

      ```html
      <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js" defer></script>
      ```
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      [Universal Login](/docs/ja-JP/authenticate/login/auth0-universal-login) は、
      アプリケーションに認証をセットアップする最も簡単な方法です。最高のエクスペリエンスとセキュリティ、そして最も充実した機能を利用するために、その使用を推奨します。

      `Auth0Web` クラスを使用して、Flutter Web アプリに Auth0 Universal Login を統合します。`loginWithRedirect()` を使用して、
      ユーザーを Auth0 Universal Login ページにリダイレクトします。

      <Info>
        通常は `loginWithRedirect` に対して `redirectUrl` パラメーターを指定する必要があります。これを省略すると、Auth0 は [既定のログインルート](/docs/ja-JP/authenticate/login/auth0-universal-login/configure-default-login-routes) を使用しますが、これはデフォルトでは構成されていません。
      </Info>

      ユーザーがログインすると、アプリケーションにリダイレクトされて戻ってきます。その後、起動時に `onLoad` を呼び出し、
      渡された認証情報を処理することで、このユーザーの ID トークンとアクセストークンにアクセスできます。

      ```js
      auth0.onLoad().then((final credentials) => setState(() {
      // ここで認証情報を処理または保存する

      _credentials = credentials;

      }));
      ```

      <Note>
        ##### チェックポイント

        アプリに、`loginWithRedirect()` を呼び出してユーザーをアプリにログインさせるボタンを追加します。
        認証のために Auth0 にリダイレクトされ、その後アプリケーションに戻ってくることを確認します。

        `onLoad` の呼び出し結果として `credentials` にアクセスでき、
        ID トークンとアクセストークンにもアクセスできることを確認します。
      </Note>
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      ユーザーをログアウトさせるには、Auth0 Flutter ソフトウェア開発キット (SDK) の `logout()` を呼び出し、Auth0 のログアウトエンドポイントへリダイレクトしてログインセッションをクリアします。[Auth0 からのログアウトの詳細はこちらをご覧ください](/docs/ja-JP/authenticate/login/logout)。

      <Info>
        通常は `logout` を呼び出すときに `returnToUrl` を指定する必要があります。指定しない場合、
        Auth0 は[デフォルトで、許可されたログアウトURLのリスト内の最初の URL を使用します](/docs/ja-JP/authenticate/login/logout/redirect-users-after-logout)。
      </Info>

      <Note>
        ##### チェックポイント

        `logout()` を呼び出してアプリケーションからユーザーをログアウトさせるボタンを、アプリに追加します。
        そのボタンを選択したときに、Flutter アプリがログアウトエンドポイントにリダイレクトされ、再び戻ってくることを確認してください。
        アプリケーションにログインしたままになっていないことを確認してください。
      </Note>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      ユーザープロファイルは、ページの読み込み時に自動的にユーザーのプロファイル情報を取得し、アプリケーションの起動時に `onLoad` を呼び出すことでアクセスおよび保存できます。`onLoad` から返されるオブジェクトには、すべてのユーザーのプロファイル情報を格納した `user` プロパティが含まれます。これは内部的に IDトークンをデコードして設定されます。

      <Note>
        ##### チェックポイント

        ログインして、結果の `user` プロパティを確認します。`email` や `name` など、現在のユーザーのプロファイル情報が正しいことを確認してください。
      </Note>
    </Section>

    ## 次のステップ

    素晴らしい!ここまで進めたなら、アプリケーションでログイン、ログアウト、ユーザープロファイル情報が動作しているはずです。<br /><br />

    これでクイックスタートチュートリアルは終了ですが、他にも多くの機能があります。Auth0でできることの詳細については、以下をご確認ください:

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-s3674bdouue0bd73) - Auth0 テナントとアプリケーションの設定と管理について学びます
    * [auth0-flutter SDK](https://www.github.com/auth0/auth0-flutter/) - このチュートリアルで使用するソフトウェア開発キット (SDK) についてさらに詳しく確認してください
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - 有効化して Auth0 の機能を拡張できるインテグレーションを見つける
  </Content>

  <SideMenu sections={sections}>
    <SideMenuSectionItem id={sections[0].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[1].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[2].id}>
      <AuthCodeGroup>
        <MainView />

        <ProfileView />
      </AuthCodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[3].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[4].id}>
      <AuthCodeGroup>
        <MainView />

        <ProfileView />
      </AuthCodeGroup>
    </SideMenuSectionItem>
  </SideMenu>
</Recipe>