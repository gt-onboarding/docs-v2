---
title: WPF または WinForms アプリケーションにログインを追加する
sidebarTitle: WPF / WinForms

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/ja-JP/recipe.jsx";
import { LoggedInForm } from "/snippets/ja-JP/Login.jsx";
import MainwindowXaml from "/snippets/ja-JP/quickstart/native/wpf-winforms/MainWindow.xaml.cs.mdx";
import MainwindowXaml2 from "/snippets/ja-JP/quickstart/native/wpf-winforms/MainWindow.xaml.cs2.mdx";
import MainwindowXaml3 from "/snippets/ja-JP/quickstart/native/wpf-winforms/MainWindow.xaml.cs3.mdx";
import MainwindowXaml4 from "/snippets/ja-JP/quickstart/native/wpf-winforms/MainWindow.xaml.cs4.mdx";

export const sections = [
      { id: "configure-auth0", title: "Auth0 を構成する" },
      { id: "install-the-auth0-sdk", title: "Auth0 ソフトウェア開発キット (SDK) をインストールする" },
      { id: "instantiate-the-auth0client", title: "Auth0Client を初期化する" },
      { id: "add-login-to-your-application", title: "アプリケーションにログイン機能を追加する" },
      { id: "add-logout-to-your-application", title: "アプリケーションにログアウト機能を追加する" },
      { id: "show-user-profile-information", title: "ユーザー プロファイル情報を表示する" }
]


<Recipe isSingleColumn>
  <Content>
    Auth0を使用すると、ほぼすべてのアプリケーションタイプに認証を迅速に追加できます。このガイドでは、[WPF](https://www.nuget.org/packages/Auth0.OidcClient.WPF/)および[WinForms](https://www.nuget.org/packages/Auth0.OidcClient.WinForms)用のAuth0ソフトウェア開発キット (SDK)を使用して、Auth0を統合し、認証を追加し、WPFおよびWinFormsアプリケーションでユーザープロファイル情報を表示する方法を説明します。

    このクイックスタートを使用するには、次のものが必要です:

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Auth0 のサービスを利用するには、Auth0 Dashboard でアプリケーションを設定しておく必要があります。Auth0 アプリケーションでは、開発中のプロジェクトで認証をどのように動作させるかを構成します。

      ### アプリケーションを設定する

      インタラクティブセレクターを使用して新しい Auth0 アプリケーションを作成するか、統合したいプロジェクトを表す既存のアプリケーションを選択します。Auth0 のすべてのアプリケーションには英数字から成る一意のクライアントIDが割り当てられており、アプリケーションのコードはこのクライアントIDを使用してソフトウェア開発キット (SDK) 経由で Auth0 の API を呼び出します。

      このクイックスタートで構成した内容は、[Dashboard](https://manage.auth0.com/#/) 上のアプリケーションに自動的に反映されます。ここから、今後もアプリケーションを管理できます。

      より完全な構成を確認したい場合は、代わりにサンプルアプリケーションを参照できます。

      ### コールバック URL を設定する

      コールバック URL は、ユーザーが認証を完了した後に Auth0 からリダイレクトしたい、アプリケーション内の URL です。設定しない場合、ユーザーはログイン後にアプリケーションへ戻れません。

      <Info>
        サンプルプロジェクトに沿って進めている場合は、これを
        `http://{yourDomain}:4200/mobile`
        に設定してください。
      </Info>

      ### ログアウト URL を設定する

      ログアウト URL は、ユーザーがログアウトした後に Auth0 からリダイレクトしたい、アプリケーション内の URL です。設定しない場合、ユーザーはアプリケーションからログアウトできず、エラーが返されます。

      <Info>
        サンプルプロジェクトに沿って進めている場合は、これを
        `http://{yourDomain}:4200/mobile`
        に設定してください。
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Auth0 は、WPF および WinForms アプリケーションでの Auth0 認証の実装を簡素化するために、[WPF](https://www.nuget.org/packages/Auth0.OidcClient.WPF/) と [WinForms](https://www.nuget.org/packages/Auth0.OidcClient.WinForms) のソフトウェア開発キット (SDK) を提供しています。

      NuGet Package Manager (Tools -&gt; Library Package Manager -&gt; Package Manager Console) を使用して、
      WPF または Windows Forms アプリケーションのどちらを構築しているかに応じて、
      `Auth0.OidcClient.WPF` または `Auth0.OidcClient.WinForms` パッケージをインストールします。

      または、NuGet Package Manager Console (`Install-Package`) や
      `dotnet` CLI (`dotnet add`) を使用することもできます。

      ```
      Install-Package Auth0.OidcClient.WPF
      Install-Package Auth0.OidcClient.WinForms
      ```

      ```
      dotnet add Auth0.OidcClient.WPF
      dotnet add Auth0.OidcClient.WinForms
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Auth0 をアプリケーションに統合するには、Auth0 ドメインとクライアントIDを含む `Auth0ClientOptions` のインスタンスを渡して、`Auth0Client` クラスのインスタンスをインスタンス化します。

      既定では、ソフトウェア開発キット (SDK) は .NET 6 以降では [WebView2](https://learn.microsoft.com/en-us/microsoft-edge/webview2/) を使用し、.NET 6 より前のバージョンを使用するアプリケーションでは従来の WebView に依存します。

      <Note>
        ##### チェックポイント

        `Auth0Client` は正しくインスタンス化されているはずです。アプリケーションを実行して、次の点を確認してください。

        * `Auth0Client` が正しくインスタンス化されていること。
        * アプリケーションで Auth0 に関連するエラーが発生していないこと。
      </Note>

      <MainwindowXaml />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Auth0 Application と Auth0 ソフトウェア開発キット (SDK) の設定が完了したら、プロジェクトに対するログイン機能を設定する必要があります。
      そのために、SDK の `LoginAsync()` メソッドを使用して、ユーザーを Auth0 の Universal Login ページにリダイレクトするログインボタンを作成します。ユーザーの認証が正常に完了すると、このクイックスタートの前半で設定したコールバック URL にリダイレクトされます。

      エラーが発生しなかった場合は、`LoginAsync()` から返される `LoginResult` オブジェクトから `User`、`IdentityToken`、`AccessToken`、`RefreshToken` にアクセスできます。

      <Note>
        ##### チェックポイント

        ここまでで、ユーザー名とパスワードを使ってログインまたはサインアップできるようになっているはずです。

        ログインボタンをクリックし、次の点を確認してください。

        * お使いの WPF または WinForms アプリケーションが Auth0 の Universal Login ページにリダイレクトされること。
        * ログインまたはサインアップできること。
        * Auth0 があなたのアプリケーションにリダイレクトすること。
      </Note>

      <MainwindowXaml2 />
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      プロジェクトにログインするユーザーには、ログアウトする方法も必要です。ソフトウェア開発キット (SDK) の
      `LogoutAsync()` メソッドを使ってログアウトボタンを作成します。ユーザーがログアウトすると、Auth0 のログアウトエンドポイントにリダイレクトされ、
      その後すぐに、このクイックスタートの前の手順で設定したログアウト URL にリダイレクトされます。

      <Note>
        ##### チェックポイント

        アプリケーションを実行してログアウトボタンをクリックし、次の点を確認します。

        * WPF または WinForms アプリケーションが、Application Settings で Allowed Logout URLs の 1 つとして指定したアドレスにリダイレクトされること。
        * アプリケーションからログアウトされていること。
      </Note>

      <MainwindowXaml3 />
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      ユーザーがログインおよびログアウトできるようになったので、認証済みユーザーに関連付けられたプロファイル情報を取得したくなるでしょう。
      たとえば、プロジェクト内にログイン中のユーザーの名前やプロファイル画像を表示したい場合があります。

      WPF および WinForms 向けの Auth0 ソフトウェア開発キット (SDK) では、`LoginResult.User` プロパティからユーザー情報を取得できます。

      <Note>
        ##### チェックポイント

        ログイン後にユーザーの名前や他のユーザー プロパティを表示できることを確認してください。
      </Note>

      <MainwindowXaml4 />
    </Section>

    ## 次のステップ

    素晴らしい!ここまで進めたなら、アプリケーションでログイン、ログアウト、およびユーザープロファイル情報が実装されているはずです。

    これでクイックスタートチュートリアルは終了ですが、他にも多くの機能があります。Auth0でできることの詳細については、以下をご確認ください:

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Auth0 テナントとアプリケーションの設定および管理方法を学びます
    * [auth0-oidc-client-net ソフトウェア開発キット (SDK)](https://github.com/auth0/auth0-oidc-client-net) - このチュートリアルで使用するソフトウェア開発キット (SDK) をさらに詳しく確認してください
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Auth0 の機能を拡張できる連携機能を見つける
  </Content>
</Recipe>