---
description: Découvrez comment ajouter les métadonnées d’organisation dans les métadonnées de session
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 'Cas d’utilisation : informations sur l’organisation dans les métadonnées de session'
'og:url': https://auth0.com/docs/
permalink: add-organization-information
title: 'Cas d’utilisation : informations sur l’organisation dans les métadonnées de session'
'twitter:description': Découvrez comment ajouter les métadonnées d’organisation dans les métadonnées de session
'twitter:title': 'Cas d’utilisation : informations sur l’organisation dans les métadonnées de session'
---

<Warning>
  La fonctionnalité Session Metadata est actuellement en accès anticipé pour les clients Enterprise seulement. En utilisant cette fonctionnalité, vous acceptez les modalités applicables de période d’essai gratuit prévues dans le [Master Subscription Agreement](https://www.okta.com/legal) d’Okta. Pour en savoir plus sur le cycle de publication des produits Auth0, consultez la page [Product Release Stages](https://auth0.com/docs/troubleshoot/product-lifecycle/product-release-stages).
</Warning>

Les métadonnées de session rendent les données contextuelles de l’utilisateur portables et visibles tout au long du cycle de vie de la session et lors des événements de déconnexion.

Les systèmes en aval peuvent utiliser les métadonnées de session pour réaliser des audits, effectuer des analyses et appliquer des pipelines de révocation, entre autres usages.

<div id="add-organization-information-to-session-metadata">
  ## Ajouter des renseignements sur l’organisation aux métadonnées de session
</div>

Vous pouvez utiliser les [Actions](/docs/fr-CA/customize/actions) pour stocker les identifiants de l’organisation dans une session au moyen de la méthode `api.session.setMetadata()` du [post-login](/docs/fr-CA/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger), puis les consulter avec l’objet `event.session.metadata`.

Code d’Action post-login :

```javascript lines
/**
 * Action Post-Login (simple)
 * Ajoute le contexte de l'organisation aux métadonnées de session afin qu'il apparaisse dans les Actions subséquentes,
 * la Management API et (si activé) le jeton de déconnexion Back-Channel.
 */
exports.onExecutePostLogin = async (event, api) => {
  // Only proceed if the transaction targets an Organization
  if (!event.organization) return;

  // Keep values short and string-only (session metadata requires strings)
  const orgId = String(event.organization.id || "");
  const orgSlug = String(event.organization.name || "");
  const orgDisplay = String(event.organization.display_name || orgSlug);

  // Minimal, idempotent writes (only a few keys to stay well under limits)
  api.session.setMetadata("org_id", orgId);
  api.session.setMetadata("org_slug", orgSlug);
  api.session.setMetadata("org_name", orgDisplay);
};
```

Les métadonnées de session sont disponibles pour les Actions ultérieures, récupérables via la [Management API](https://auth0.com/docs/api/management/v2) et peuvent être incluses dans le jeton de [déconnexion back-channel OpenID Connect](/docs/fr-CA/authenticate/login/logout/back-channel-logout).

* Dans les Actions ultérieures, vous pouvez interroger ces données via l&#39;objet `event.session.metadata` :

```javascript lines
const orgId = event.session.metadata?.org_id;
```

* Si vous utilisez la Management API, vous pouvez interroger les données à l&#39;aide du point de terminaison [/api/v2/sessions/{id}](https://auth0.com/docs/api/management/v2/sessions/get-session) :

```bash lines
GET /api/v2/sessions/{id}
```

Exemple de réponse :

```json lines
{
  "session_metadata": {
    "org_id": "org_abc123",
    "org_slug": "acme",
    "org_name": "Acme Corp"
  }
}
```

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">
  Les appels au point de terminaison `/api/v2/sessions/{id}` nécessitent un [jeton d’accès de la Management API](/docs/fr-CA/secure/tokens/access-tokens) avec la portée `update:session`.
</Callout>

* Si vous avez une application configurée avec des métadonnées de session [OIDC Back-Channel Logout](/docs/fr-CA/manage-users/sessions/session-metadata/configure-session-metadata), le `logout_token` contient les métadonnées de session :

```json lines
{
  "events": { "http://schemas.openid.net/event/backchannel-logout": {} },
  "session_metadata": {
    "org_id": "org_abc123",
    "org_slug": "acme",
    "org_name": "Acme Corp"
  }
}
```
