---
title: Ajouter une connexion à votre application PHP
sidebarTitle: PHP

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";
import Index from "/snippets/fr-CA/quickstart/webapp/php/index.php.mdx";
import Login from "/snippets/fr-CA/quickstart/webapp/php/login.php.mdx";
import Logout from "/snippets/fr-CA/quickstart/webapp/php/logout.php.mdx";
import Profile from "/snippets/fr-CA/quickstart/webapp/php/profile.php.mdx";
import Router from "/snippets/fr-CA/quickstart/webapp/php/router.php.mdx";
import Callback from "/snippets/fr-CA/quickstart/webapp/php/callback.php.mdx";

import {AuthCodeGroup} from "/snippets/fr-CA/AuthCodeGroup.jsx";

export const sections = [
      { id: "configure-auth0", title: "Configurer Auth0" },
      { id: "install-the-auth0-php-sdk", title: "Installer la trousse de développement logiciel (SDK) Auth0 pour PHP" },
      { id: "create-routes", title: "Créer des routes" },
      { id: "add-login-to-your-application", title: "Ajouter la connexion à votre application" },
      { id: "add-logout-to-your-application", title: "Ajouter la déconnexion à votre application" },
      { id: "show-user-profile-information", title: "Afficher les informations de profil de l’utilisateur" }
]


<Recipe isSingleColumn>
  <Content>
    Auth0 vous permet d&#39;ajouter rapidement l&#39;authentification à presque n&#39;importe quel type d&#39;application. Ce guide explique comment
    intégrer Auth0, ajouter l&#39;authentification et afficher les informations de profil utilisateur dans n&#39;importe quelle application PHP à l&#39;aide de la
    trousse de développement logiciel (SDK) PHP Auth0.

    Pour utiliser ce démarrage rapide, vous devez :

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Pour utiliser les services Auth0, vous devez avoir une application configurée dans l’Auth0 Dashboard. C’est dans cette Application Auth0 que vous définirez le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle Application Auth0 ou sélectionner une Application existante qui représente le projet que vous souhaitez intégrer. Chaque Application dans Auth0 se voit attribuer un ID client unique alphanumérique que le code de votre application utilisera pour appeler les API Auth0 via la trousse de développement logiciel (SDK).

      Tous les paramètres que vous configurez à l’aide de ce Démarrage rapide seront automatiquement mis à jour pour votre Application dans le [Dashboard](https://manage.auth0.com/#/), où vous pourrez gérer vos Applications par la suite.

      Si vous préférez explorer une configuration complète, vous pouvez plutôt consulter une application d’exemple.

      ### Configurer les URL de rappel (Callback URLs)

      Une URL de rappel est une URL de votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs une fois qu’ils sont authentifiés. Si aucune URL n’est définie, les utilisateurs ne seront pas renvoyés à votre application après s’être connectés.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur à
        `http://localhost:3000/callback`.
      </Info>

      ### Configurer les URL de déconnexion (Logout URLs)

      Une URL de déconnexion est une URL de votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si aucune URL n’est définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront une erreur.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur à `http://localhost:3000`.
      </Info>

      ### Configurer les origines Web autorisées (Allowed Web Origins)

      Une origine Web autorisée est une URL à partir de laquelle vous souhaitez autoriser l’accès à votre flux d’authentification. Elle doit contenir l’URL de votre projet. Si ce paramètre n’est pas correctement défini, votre projet ne pourra pas actualiser silencieusement les jetons d’authentification, et vos utilisateurs seront déconnectés lors de leur prochaine visite de votre application ou lorsqu’ils actualiseront une page.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur à `http://localhost:3000`.
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Auth0 fournit une [trousse de développement logiciel (SDK) PHP](https://github.com/auth0/auth0-PHP) (Auth0-PHP) pour simplifier la mise en œuvre de l’authentification et de l’autorisation Auth0 dans les applications PHP.

      Le SDK PHP Auth0 nécessite l’installation de bibliothèques HTTP compatibles avec [PSR-17](https://www.php-fig.org/psr/psr-17/) et [PSR-18](https://www.php-fig.org/psr/psr-18/) pour gérer les requêtes réseau. Si vous n’avez pas déjà de telles bibliothèques, vous pouvez installer des options fiables en exécutant les commandes suivantes dans votre terminal :

      ```text lines
      cd <your-project-directory>
      composer require symfony/http-client nyholm/psr7
      ```

      Installez maintenant la trousse de développement logiciel (SDK) PHP Auth0 en exécutant la commande suivante dans votre terminal :

      ```text lines
      composer require auth0/auth0-php
      ```

      ### Configurer la trousse de développement logiciel (SDK) Auth0

      Créez un nouveau fichier dans votre application nommé `index.php`, et copiez-y le code à partir du panneau interactif à droite sous l’onglet **index.php**.

      Pour que la trousse de développement logiciel (SDK) Auth0 fonctionne correctement, vous devez définir les propriétés suivantes lors de l’initialisation :

      * `domain` : Le domaine de votre tenant Auth0. En général, vous pouvez le trouver dans Auth0 Dashboard
        sous les paramètres de votre Application, dans le champ Domain. Si vous utilisez un [domaine personnalisé](https://auth0.com/docs/custom-domains), vous devez plutôt y définir la valeur de votre domaine personnalisé.
      * `clientId` : L’ID de l’Application Auth0 que vous avez configurée plus tôt dans ce démarrage rapide. Vous pouvez
        le trouver dans Auth0 Dashboard, sous les paramètres de votre Application, dans le champ Client ID.
      * `clientSecret` : Le secret de l’Application Auth0 que vous avez configurée plus tôt dans ce démarrage rapide. Vous pouvez
        le trouver dans Auth0 Dashboard, sous les paramètres de votre Application, dans le champ Client Secret.
      * `redirectUri` : L’URL de votre application vers laquelle vous souhaitez qu’Auth0 redirige les utilisateurs après
        leur authentification. Cette valeur correspond à l’URL de rappel (callback) que vous avez configurée plus tôt dans ce démarrage rapide. Vous pouvez
        également trouver cette valeur dans Auth0 Dashboard, sous les paramètres de votre Application, dans le champ Callback URLs. Assurez-vous que la valeur saisie dans votre code correspond à celle que vous avez configurée plus tôt, sinon vos utilisateurs verront une erreur.
      * `cookieSecret` : Une longue valeur secrète utilisée pour chiffrer le témoin de session. Vous pouvez générer une
        chaîne appropriée en exécutant `openssl rand -hex 32` dans votre terminal.

      <Info>
        ##### Point de contrôle

        Votre trousse de développement logiciel (SDK) Auth0 devrait maintenant être correctement configurée. Exécutez votre application pour vérifier que :

        * Le SDK s’initialise correctement.
        * Votre application ne génère aucune erreur liée à Auth0.
      </Info>

      <AuthCodeGroup>
        <Index />

        <Login />

        <Logout />

        <Profile />

        <Router />

        <Callback />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Installez maintenant une bibliothèque de routage pour acheminer les requêtes entrantes vers votre application. Ce n’est pas une étape obligatoire,
      mais cela simplifie la structure de notre application pour les besoins de ce démarrage rapide.

      ```text lines
      composer require steampixel/simple-php-router
      ```

      Créez un nouveau fichier dans votre application nommé `router.php` pour définir les routes, puis copiez le code
      à partir du panneau interactif situé à droite.

      <AuthCodeGroup>
        <Router />

        <Index />

        <Login />

        <Logout />

        <Profile />

        <Callback />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Maintenant que vous avez configuré votre Application Auth0 et la Trousse de développement logiciel (SDK) Auth0 PHP, vous devez configurer la connexion pour votre projet. Pour ce faire, vous utiliserez la méthode `login()` du SDK pour créer un bouton de connexion qui redirige les utilisateurs vers la page Auth0 Universal Login. Après qu’un utilisateur s’est authentifié avec succès, il sera redirigé vers l’URL de rappel que vous avez configurée plus tôt dans ce démarrage rapide.

      Créez un nouveau fichier dans votre application appelé `login.php` pour gérer le processus de connexion, et copiez-y le code à partir du panneau interactif situé à droite, qui contient la logique nécessaire pour la connexion.

      <Info>
        ##### Point de contrôle

        Vous devriez maintenant pouvoir vous connecter ou vous inscrire au moyen d’un nom d&#39;utilisateur et d’un mot de passe.

        Cliquez sur le lien de connexion et vérifiez que :

        * Votre application vous redirige vers la page Auth0 Universal Login.
        * Vous pouvez vous connecter ou vous inscrire.
        * Auth0 vous redirige vers votre application en utilisant la valeur de `redirectUri` que vous avez utilisée pour configurer le SDK.
      </Info>

      <AuthCodeGroup>
        <Login />

        <Index />

        <Logout />

        <Profile />

        <Router />

        <Callback />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Les utilisateurs qui se connectent à votre projet auront également besoin d’un moyen de se déconnecter. Nous allons configurer un bouton de déconnexion à l’aide de la méthode `logout()` de la trousse de développement logiciel (SDK). Lorsque les utilisateurs se déconnectent, ils sont redirigés vers votre [point de terminaison de déconnexion Auth0](https://auth0.com/docs/api/authentication?http#logout), qui les redirige ensuite immédiatement vers l’URL de déconnexion que vous avez configurée plus tôt dans ce démarrage rapide.

      Créez un nouveau fichier dans votre application nommé `logout.php` pour gérer le processus, puis copiez-y le code depuis le panneau interactif, qui contient la logique nécessaire à la déconnexion. Ensuite, mettez à jour votre fichier `index.php` pour inclure le bouton de déconnexion.

      <Info>
        ##### Point de contrôle

        Exécutez votre application, cliquez sur le bouton de déconnexion, puis vérifiez que :

        * Votre application vous redirige vers l’adresse que vous avez spécifiée comme l’une des URL de déconnexion autorisées dans les paramètres de votre Application.
        * Vous n’êtes plus connecté à votre application.
      </Info>

      <AuthCodeGroup>
        <Logout />

        <Index />

        <Login />

        <Profile />

        <Router />

        <Callback />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Maintenant que vos utilisateurs peuvent se connecter et se déconnecter, vous voudrez probablement pouvoir récupérer les [informations de profil](https://auth0.com/docs/users/concepts/overview-user-profile)
      associées aux utilisateurs authentifiés. Par exemple, vous pourriez vouloir afficher le nom d’un utilisateur connecté ou
      sa photo de profil dans votre projet.

      La Trousse de développement logiciel (SDK) PHP Auth0 fournit les informations d’utilisateur au moyen de la méthode `getCredentials()`. Consultez le
      code `profile.php` dans le panneau interactif pour voir un exemple de son utilisation.

      Comme la méthode contient des renseignements sensibles liés à l’identité de l’utilisateur, sa disponibilité dépend de l’état
      d’authentification de l’utilisateur. Pour prévenir les erreurs de rendu, vous devez toujours vérifier si la méthode
      `getCredentials()` retourne un `object` ou `null` afin de déterminer si
      Auth0 a authentifié l’utilisateur avant que votre application ne consomme les résultats.

      <Info>
        ##### Point de contrôle

        Vérifiez que :

        * Vous pouvez afficher correctement `nickname` ou toute autre propriété d’utilisateur après vous être connecté.
      </Info>

      <AuthCodeGroup>
        <Profile />

        <Index />

        <Login />

        <Logout />

        <Router />

        <Callback />
      </AuthCodeGroup>
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Découvrez comment configurer et gérer votre tenant Auth0 et vos applications
    * [Auth0-PHP SDK](https://github.com/auth0/auth0-php) - Découvrez en détail la trousse de développement logiciel (SDK) utilisée dans ce tutoriel
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez des intégrations que vous pouvez activer afin d’étendre les fonctionnalités d’Auth0
  </Content>
</Recipe>