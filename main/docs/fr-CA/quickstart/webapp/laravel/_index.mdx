---
title: Ajouter une connexion à votre application Laravel
sidebarTitle: Laravel

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";
import Web from "/snippets/fr-CA/quickstart/webapp/laravel/web.php.mdx";
import Web2 from "/snippets/fr-CA/quickstart/webapp/laravel/web.php2.mdx";
import Web3 from "/snippets/fr-CA/quickstart/webapp/laravel/web.php3.mdx";

export const sections = [
  { id: "laravel-installation", title: "Installation de Laravel" },
  { id: "sdk-installation", title: "Installation de la trousse de développement logiciel (SDK)" },
  { id: "sdk-configuration", title: "Configuration de la trousse de développement logiciel (SDK)" },
  { id: "login-routes", title: "Routes de connexion" },
  { id: "access-control", title: "Contrôle d’accès" },
  { id: "user-information", title: "Informations sur l’utilisateur" },
  { id: "user-management", title: "Gestion des utilisateurs" },
  { id: "run-the-application", title: "Exécuter l’application" }
]


<Recipe isSingleColumn>
  <Content>
    [Auth0&#39;s Laravel SDK](https://github.com/auth0/laravel-auth0)
    vous permet d&#39;ajouter rapidement l&#39;authentification, la gestion du profil utilisateur et le contrôle d&#39;accès au routage à votre
    application Laravel. Ce guide montre comment intégrer Auth0 avec une nouvelle application (ou existante) [Laravel 9
    or 10](https://github.com/auth0/laravel-auth0#support-policy) application.

    Modification de test

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      **Si vous n&#39;avez pas encore d&#39;application Laravel configurée**, ouvrez un terminal dans un répertoire approprié pour un nouveau projet et exécutez la commande suivante :

      ```sh wrap lines
      composer create-project --prefer-dist laravel/laravel auth0-laravel-app ^9.0
      ```

      Toutes les commandes de ce guide partent du principe que vous les exécutez à partir de la racine de votre projet Laravel; vous devez donc vous placer dans le nouveau répertoire de projet avec la commande `cd` :

      ```sh lines
      cd auth0-laravel-app
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Exécutez la commande suivante dans le répertoire de votre projet pour installer la [Trousse de développement logiciel (SDK) Auth0 pour Laravel](https://github.com/auth0/laravel-auth0) :

      ```sh wrap lines
      composer require auth0/login:^7.8 --update-with-all-dependencies
      ```

      Ensuite, générez un fichier de configuration de la trousse de développement logiciel (SDK) pour votre application :

      ```sh lines
      php artisan vendor:publish --tag auth0
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Exécutez la commande suivante depuis le répertoire de votre projet pour télécharger le CLI Auth0 :

      ```sh wrap lines
      curl -sSfL https://raw.githubusercontent.com/auth0/auth0-cli/main/install.sh | sh -s -- -b .
      ```

      Ensuite, authentifiez la CLI avec votre compte Auth0 en choisissant &quot;en tant qu&#39;utilisateur&quot; lorsque vous y êtes invité :

      ```sh lines
      ./auth0 login
      ```

      Ensuite, créez une nouvelle Application avec Auth0 :

      ```sh lines
      ./auth0 apps create \
        --name "My Laravel Application" \
        --type "regular" \
        --auth-method "post" \
        --callbacks "http://localhost:8000/callback" \
        --logout-urls "http://localhost:8000" \
        --reveal-secrets \
        --no-input \
        --json > .auth0.app.json
      ```

      Vous devriez également créer une nouvelle API :

      ```sh lines
      ./auth0 apis create \
        --name "My Laravel Application's API" \
        --identifier "https://github.com/auth0/laravel-auth0" \
        --offline-access \
        --no-input \
        --json > .auth0.api.json
      ```

      Cela génère deux fichiers dans le répertoire de votre projet qui configurent la trousse de développement logiciel (SDK).

      Comme ces fichiers contiennent des identifiants, il est important de les traiter comme des informations sensibles. Vous devez vous assurer de ne pas les inclure dans le contrôle de version. Si vous utilisez Git, vous devriez les ajouter à votre fichier `.gitignore` :

      ```sh lines
      echo ".auth0.*.json" >> .gitignore
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      La trousse de développement logiciel (SDK) enregistre automatiquement toutes les routes nécessaires pour permettre aux utilisateurs de votre application de s’authentifier.

      Si vous avez besoin de davantage de contrôle sur celles-ci, ou si elles entrent en conflit avec des routes existantes dans votre application, vous pouvez
      enregistrer manuellement les contrôleurs du SDK à la place. Consultez [le fichier README du SDK](https://github.com/auth0/laravel-auth0) pour des intégrations avancées.

      <LoggedInForm />
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Les fonctionnalités d’authentification de Laravel utilisent des « guards » pour définir comment les utilisateurs sont authentifiés à chaque requête. Vous pouvez utiliser le guard d’authentification de la Trousse de développement logiciel (SDK) Auth0 pour restreindre l’accès aux routes de votre application.

      Pour exiger que les utilisateurs s’authentifient avant d’accéder à une route, vous pouvez utiliser le middleware `auth` de Laravel.

      ```text lines
      Route::get('/private', function () {
        return response('Welcome! You are logged in.');
      })->middleware('auth');
      ```

      Vous pouvez aussi exiger que les utilisateurs authentifiés disposent d’[autorisations](https://auth0.com/docs/manage-users/access-control/rbac) spécifiques en le combinant avec le middleware `can` de Laravel.

      ```text lines
      Route::get('/scope', function () {
        return response('You have `read:messages` permission, and can therefore access this resource.');

      })->middleware('auth')->can('read:messages');
      ```

      <Web />
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Les informations sur l&#39;utilisateur authentifié sont accessibles via la façade `Auth` de Laravel ou la fonction utilitaire
      `auth()`.

      Par exemple, pour récupérer l&#39;identifiant et l&#39;adresse courriel de l&#39;utilisateur :

      ```text lines
      Route::get('/', function () {
        if (! auth()->check()) {
        return response('You are not logged in.');

        }
        $user = auth()->user();
        $name = $user->name ?? 'User';
        $email = $user->email ?? '';
        return response("Hello {$name}! Your email address is {$email}.");
      });;
      ```

      <Web2 />
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Vous pouvez mettre à jour les informations d’un utilisateur à l’aide de l’[Auth0 Management API](https://github.com/auth0/laravel-auth0/blob/main/docs/Management.md). Tous les endpoints de gestion sont accessibles par la méthode
      `management()` de la trousse de développement logiciel (SDK).

      **Avant d’effectuer des appels à l’Auth0 Management API, vous devez permettre à votre application de communiquer avec la Management
      API.** Vous pouvez le faire à partir de la [page API de l’Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq/apis/), en choisissant
      `Auth0 Management API`, puis en sélectionnant l’onglet « Machine to Machine Applications ». Autorisez votre application Laravel, puis cliquez sur la flèche vers le bas pour choisir les scopes que vous souhaitez accorder.

      Pour l’exemple suivant, dans lequel nous allons mettre à jour les métadonnées d’un utilisateur et lui attribuer une couleur favorite aléatoire, vous
      devez accorder les scopes `read:users` et `update:users`. Vous trouverez une liste des endpoints de l’API et des
      scopes requis dans [la documentation de l’Auth0 Management
      API](https://auth0.com/docs/api/management/v2).

      ```text lines
      use Auth0\Laravel\Facade\Auth0;
      Route::get('/colors', function () {
      $endpoint = Auth0::management()->users();
      $colors = ['red', 'blue', 'green', 'black', 'white', 'yellow', 'purple', 'orange', 'pink', 'brown'];
      $endpoint->update(
      id: auth()-&gt;id(),

      body: [

          'user_metadata' =&gt; [

              'color' =&gt; $colors[random_int(0, count($colors) - 1)]

          ]

      ]

      );
      $metadata = $endpoint->get(auth()->id());
      $metadata = Auth0::json($metadata);
      $color = $metadata['user_metadata']['color'] ?? 'unknown';
      $name = auth()->user()->name;
      return response("Bonjour {$name}! Votre couleur préférée est {$color}.");
      })->middleware('auth');
      ```

      Un guide de référence rapide pour toutes les méthodes Management API du SDK est [disponible ici](https://github.com/auth0/laravel-auth0/blob/main/docs/Management.md).

      <Web3 />
    </Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8" isSingleColumn>
      Vous êtes maintenant prêt à lancer votre application Laravel afin qu’elle puisse accepter des requêtes :

      ```text lines
      php artisan serve
      ```

      <Info>
        ##### Point de contrôle

        Ouvrez votre navigateur Web et essayez d’accéder aux routes suivantes :

        * [http://localhost:8000](http://localhost:8000/)
          pour voir la route publique.
        * [http://localhost:8000/private](http://localhost:8000/private) pour être invité à vous authentifier.
        * [http://localhost:8000](http://localhost:8000/)
          pour voir la route publique, cette fois en étant authentifié.
        * [http://localhost:8000/scope](http://localhost:8000/scope) pour vérifier si vous disposez de la
          permission `read:messages`[permission](https://auth0.com/docs/manage-users/access-control/rbac).
        * [http://localhost:8000/update](http://localhost:8000/update) pour mettre à jour le profil de l’utilisateur.
        * [http://localhost:8000/logout](http://localhost:8000/logout) pour vous déconnecter.
      </Info>

      ### Lectures complémentaires

      * [User Repositories and Models](https://github.com/auth0/laravel-auth0/blob/main/docs/Users.md) explique comment étendre le SDK Auth0 pour Laravel pour utiliser des modèles
        d’utilisateur personnalisés, et comment stocker et récupérer des utilisateurs dans une base de données.
      * [Hooking Events](https://github.com/auth0/laravel-auth0/blob/main/docs/Events.md) explique comment écouter les événements générés par le SDK Auth0 pour Laravel
        afin de personnaliser entièrement le comportement de votre intégration.
      * [Management API](https://github.com/auth0/laravel-auth0/blob/main/docs/Management.md) est prise en charge nativement par le SDK Auth0 pour Laravel, ce qui vous permet
        d’interagir avec la Management API à partir de votre application Laravel.

      <LoggedInForm />
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Découvrez comment configurer et gérer votre tenant Auth0 et vos applications
    * [Trousse de développement logiciel (SDK) laravel-auth0](https://github.com/auth0/laravel-auth0) - Explorez plus en profondeur le SDK utilisé dans ce tutoriel
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>
</Recipe>