---
title: Ajouter une connexion à votre application Web Spring
sidebarTitle: Java Spring Boot

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";
import Application from "/snippets/fr-CA/quickstart/webapp/java-spring-boot/application.yml.mdx";
import Securityconfig from "/snippets/fr-CA/quickstart/webapp/java-spring-boot/SecurityConfig.java.mdx";
import Index from "/snippets/fr-CA/quickstart/webapp/java-spring-boot/index.html.mdx";
import Homecontroller from "/snippets/fr-CA/quickstart/webapp/java-spring-boot/HomeController.java.mdx";
import Securityconfigwithlogout from "/snippets/fr-CA/quickstart/webapp/java-spring-boot/SecurityConfigWithLogout.java.mdx";

import {AuthCodeGroup} from "/snippets/fr-CA/AuthCodeGroup.jsx";

export const sections = [
  { id: "configure-auth0", title: "Configurer Auth0" },
  { id: "configure-sprint-boot-application", title: "Configurer l’application Spring Boot" },
  { id: "configure-spring-security", title: "Configurer Spring Security" },
  { id: "add-login-to-your-application", title: "Ajouter une fonctionnalité de connexion à votre application" },
  { id: "add-front-page", title: "Ajouter une page d’accueil" },
  { id: "add-controller", title: "Ajouter un contrôleur" },
  { id: "add-logout-to-your-application", title: "Ajouter une fonctionnalité de déconnexion à votre application" }
]


<Recipe isSingleColumn>
  <Content>
    <Info>
      Ce tutoriel utilise [Spring MVC](https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html). Si vous utilisez [Spring WebFlux](https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#spring-web-reactive), les étapes pour ajouter l’authentification sont similaires, mais certains détails d’implémentation diffèrent. Consultez le [code d’exemple Spring Boot WebFlux](https://github.com/auth0-samples/auth0-spring-boot-login-samples/tree/master/webflux-login) pour voir comment intégrer Auth0 à votre application Spring Boot WebFlux.
    </Info>

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Pour utiliser les services Auth0, vous devez avoir une application configurée dans Auth0 Dashboard. L’Application Auth0 est
      l’endroit où vous configurerez le mode de fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle Application Auth0 ou sélectionner une Application existante qui représente
      le projet que vous souhaitez intégrer. Chaque Application dans Auth0 se voit attribuer un ID client alphanumérique unique
      que le code de votre application utilisera pour appeler les API Auth0 par l’entremise de la trousse de développement logiciel (SDK).

      Tous les paramètres que vous configurez à l’aide de ce Démarrage rapide seront automatiquement mis à jour pour votre Application dans le [Dashboard](https://manage.auth0.com/#/), où vous
      pourrez gérer vos Applications par la suite.

      Si vous préférez explorer une configuration complète, vous pouvez plutôt consulter un exemple d’application.

      ### Configurer les URL de rappel (Callback URLs)

      Une URL de rappel (callback) est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs une fois
      qu’ils sont authentifiés. Si elle n’est pas définie, les utilisateurs ne seront pas renvoyés vers votre application après leur connexion.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur comme suit :

        `http://localhost:3000/login/oauth2/code/okta`.
      </Info>

      ### Configurer les URL de déconnexion (Logout URLs)

      Une URL de déconnexion est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après leur
      déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront une erreur.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur comme suit :

        `http://localhost:3000`.
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      ### Ajouter les dépendances Spring

      Pour intégrer votre application Spring Boot à Auth0, incluez [Okta Spring Boot
      Starter](https://github.com/okta/okta-spring-boot/) dans les dépendances de votre application.

      <Info>
        Ce guide utilise [Thymeleaf](https://www.thymeleaf.org/) et le [module d’intégration Spring Security](https://github.com/thymeleaf/thymeleaf-extras-springsecurity) pour la couche de vue. Si vous utilisez
        une autre technologie de vue, la configuration et les composants Spring Security restent les mêmes.
      </Info>

      Si vous utilisez Gradle, vous pouvez inclure ces dépendances comme indiqué ci-dessous.

      ```text lines
      plugins {
        id 'java'
        id 'org.springframework.boot' version '3.1.4'
        id 'io.spring.dependency-management' version '1.1.3'
      }
      implementation 'com.okta.spring:okta-spring-boot-starter:3.0.5'
      implementation 'org.springframework.boot:spring-boot-starter-web'
      implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
      implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity6'
      implementation 'nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect'
      ```

      Si vous utilisez Maven :

      ```xml lines expandable
      <parent>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-parent</artifactId>
      <version>3.1.4</version>
      <relativePath/>
      </parent>
      <dependencies>
      <dependency>
      <groupId>com.okta</groupId>
      <artifactId>okta-spring-boot-starter</artifactId>
      <version>3.0.5</version>
      </dependency>
      <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-web</artifactId>
      </dependency>
      <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-oauth2-client</artifactId>
      </dependency>
      <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-thymeleaf</artifactId>
      </dependency>
      <dependency>
      <groupId>org.thymeleaf.extras</groupId>
      <artifactId>thymeleaf-extras-springsecurity6</artifactId>
      </dependency>
      <dependency>
      <groupId>nz.net.ultraq.thymeleaf</groupId>
      <artifactId>thymeleaf-layout-dialect</artifactId>
      </dependency>
      </dependencies>
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Okta Spring Boot Starter simplifie la configuration de votre application avec Auth0. L’exemple ci-dessous utilise un fichier
      `application.yml`, mais vous pouvez aussi utiliser des fichiers de propriétés ou n’importe lequel des autres [mécanismes d’externalisation pris en charge](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config).

      ```yml lines
      #src/main/resources/application.yml
      okta:
      oauth2:
      issuer: https://{yourDomain}/

      client-id: {yourClientId}

      client-secret: {yourClientSecret}

      #L'exemple et les instructions ci-dessus pour la configuration de l'URL de rappel et de l'URL de déconnexion utilisent le port 3000.
      #Si vous souhaitez utiliser un port différent, modifiez cette valeur et assurez-vous que vos URL de rappel et de déconnexion sont
      #configurées avec le bon port.
      server:
      port: 3000
      ```

      <AuthCodeGroup>
        <Application />

        <Securityconfig />

        <Index />

        <Homecontroller />

        <Securityconfigwithlogout />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Pour activer la connexion des utilisateurs avec Auth0, créez une classe qui enregistrera un [SecurityFilterChain](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/SecurityFilterChain.html) et ajoutez l’annotation `@Configuration`.

      <Info>
        Vous pouvez configurer l’instance [HttpSecurity](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/builders/HttpSecurity.html) pour exiger une authentification sur tous
        les chemins ou seulement sur certains. Par exemple, pour exiger une authentification sur tous les chemins sauf la page d’accueil :
      </Info>

      ```java lines
      http.authorizeHttpRequests(authorize -> authorize
          .requestMatchers(&quot;/&quot;).permitAll()

          .anyRequest().authenticated()

      );
      ```

      <AuthCodeGroup>
        <Securityconfig />

        <Application />

        <Index />

        <Homecontroller />

        <Securityconfigwithlogout />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      L’Okta Spring Boot Starter utilisera la configuration du client que vous avez définie précédemment pour gérer la connexion lorsqu’un utilisateur
      visite le chemin `/oauth2/authorization/okta` de votre application. Vous pouvez utiliser cela pour créer un lien de connexion
      dans votre application.

      Cette page renvoie les attributs de l’utilisateur lorsque celui-ci s’authentifie. Vous utiliserez le lien `/logout`
      dans le modèle pour implémenter la fonctionnalité de déconnexion.

      <AuthCodeGroup>
        <Index />

        <Application />

        <Securityconfig />

        <Homecontroller />

        <Securityconfigwithlogout />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Créez un contrôleur chargé de gérer la requête entrante. Ce contrôleur affiche la page `index.html`.
      Lorsque l&#39;utilisateur s&#39;authentifie, l&#39;application récupère les attributs du profil de l&#39;utilisateur pour afficher la
      page.

      <Info>
        ##### Point de contrôle

        Lorsque vous cliquez sur le lien de connexion, vérifiez que l&#39;application vous redirige vers la page [Auth0 Universal Login](https://auth0.com/universal-login) et que vous pouvez
        maintenant vous connecter ou vous inscrire à l&#39;aide d&#39;un nom d&#39;utilisateur et d&#39;un mot de passe ou d&#39;un fournisseur social.
      </Info>

      <Info>
        Auth0 active le fournisseur social Google par défaut sur les nouveaux tenants et vous fournit des clés pour développeurs pour
        tester la connexion à l&#39;aide de [fournisseurs d&#39;identité sociale](https://auth0.com/docs/connections/identity-providers-social). Toutefois, ces clés pour développeurs présentent certaines limitations
        qui peuvent amener votre application à se comporter différemment. Pour plus de détails sur ce comportement
        et sur la façon de le corriger, consultez le document [Test Social Connections with Auth0 Developer Keys](https://auth0.com/docs/connections/social/devkeys#limitations-of-developer-keys).
      </Info>

      <AuthCodeGroup>
        <Homecontroller />

        <Application />

        <Securityconfig />

        <Index />

        <Securityconfigwithlogout />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Maintenant que les utilisateurs peuvent se connecter à votre application, ils ont besoin [d’une façon de se déconnecter](https://auth0.com/docs/logout/guides/logout-auth0). Par défaut, lorsque
      la déconnexion est activée, Spring Security déconnecte l’utilisateur de votre application et supprime la session. Pour permettre
      une déconnexion réussie via Auth0, vous pouvez fournir un `LogoutHandler` pour rediriger les utilisateurs vers votre [point de terminaison de déconnexion Auth0](https://auth0.com/docs/api/authentication?javascript#logout)
      (`https://{yourDomain}/v2/logout`), puis les rediriger immédiatement vers votre application.

      Dans la classe `SecurityConfig`, fournissez un `LogoutHandler` qui redirige vers le point de terminaison de déconnexion Auth0
      et configurez `HttpSecurity` pour ajouter le gestionnaire de déconnexion.

      <Info>
        ##### Point de contrôle

        Lorsque vous cliquez sur le lien de déconnexion, l’application doit vous rediriger vers l’adresse que vous avez spécifiée comme l’une des
        &quot;URL de déconnexion autorisées&quot; dans &quot;Settings&quot;, et vous ne serez plus connecté à votre application.
      </Info>

      <AuthCodeGroup>
        <Securityconfigwithlogout />

        <Application />

        <Securityconfig />

        <Index />

        <Homecontroller />
      </AuthCodeGroup>
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Apprenez à configurer et à gérer votre locataire Auth0 et vos applications
    * [Okta Spring Boot Starter SDK](https://github.com/okta/okta-spring-boot/) - Découvrez plus en détail la trousse de développement logiciel (SDK) utilisée dans ce tutoriel
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez les intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>
</Recipe>