---
title: Ajouter une connexion à votre application Blazor Server
sidebarTitle: ASP.NET Core Blazor Server

---

import {AuthCodeGroup} from "/snippets/fr-CA/AuthCodeGroup.jsx";

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx"

import Login from "/snippets/fr-CA/quickstart/webapp/aspnet-core-blazor-server/Login.cshtml.cs.mdx"
import Logout from "/snippets/fr-CA/quickstart/webapp/aspnet-core-blazor-server/Logout.cshtml.cs.mdx"

export const sections = [
      { id: "configure-auth0", title: "Configurer Auth0" },
      { id: "install-and-configure-the-sdk", title: "Installer et configurer la trousse de développement logiciel (SDK)" },
      { id: "login", title: "Connexion" },
      { id: "display-user-profile", title: "Afficher le profil de l'utilisateur" },
      { id: "logout", title: "Déconnexion" }
]


<Recipe isSingleColumn>
  <Content>
    Auth0 vous permet d&#39;ajouter rapidement l&#39;authentification et d&#39;accéder aux informations du profil utilisateur dans votre application.
    Ce guide explique comment intégrer Auth0 à toute application Blazor Server nouvelle ou existante à l&#39;aide du SDK **Auth0.AspNetCore.Authentication**.

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Pour utiliser les services Auth0, vous devez avoir une application configurée dans Auth0 Dashboard. C’est dans l’Application Auth0 que vous allez définir le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle Application Auth0 ou sélectionner une Application existante qui représente le projet que vous voulez intégrer. Chaque Application dans Auth0 reçoit un ID client alphanumérique unique que le code de votre application utilisera pour appeler les API Auth0 au moyen de la Trousse de développement logiciel (SDK).

      Tous les paramètres que vous configurez à l’aide de ce Démarrage rapide seront automatiquement mis à jour pour votre Application dans le [Dashboard](https://manage.auth0.com/dashboard/us/auth0-dsepaid/), où vous pourrez gérer vos Applications par la suite.

      Si vous préférez explorer une configuration complète, vous pouvez plutôt consulter une application d’exemple.

      ### Configurer les URL de rappel (Callback URLs)

      Une URL de rappel est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après leur authentification. Si elle n’est pas définie, les utilisateurs ne seront pas renvoyés vers votre application après leur connexion.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur à
        `http://localhost:3000/callback`.
      </Info>

      ### Configurer les URL de déconnexion (Logout URLs)

      Une URL de déconnexion est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront une erreur.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur à `http://localhost:3000`.
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      ### Installer à partir de NuGet

      Pour intégrer Auth0 à Blazor Server, vous pouvez utiliser notre Trousse de développement logiciel (SDK) en installant le
      package NuGet [`Auth0.AspNetCore.Authentication`](https://www.nuget.org/packages/Auth0.AspNetCore.Authentication/) dans votre application.

      ### Configurer le middleware

      Pour activer l’authentification dans votre application Blazor Server, utilisez le middleware fourni par le SDK. Rendez-vous dans le
      fichier `Program.cs` et appelez `builder.Services.AddAuth0WebAppAuthentication()` pour enregistrer le
      middleware du SDK.

      Assurez-vous de configurer le `Domain` et le `ClientId`, ce sont des champs obligatoires qui permettent au
      SDK de savoir quel tenant Auth0 et quelle Application il doit utiliser.

      Assurez-vous d’avoir activé l’authentification et l’autorisation dans votre fichier `Program.cs`.

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Pour permettre aux utilisateurs de se connecter à votre application Blazor Server, ajoutez un `LoginModel` à votre répertoire `Pages`.

      Dans la méthode `OnGet` de `LoginModel`, appelez `HttpContext.ChallengeAsync()`
      et passez `Auth0Constants.AuthenticationScheme` comme schéma d’authentification. Cela invoquera le gestionnaire d’authentification OIDC
      que notre trousse de développement logiciel (SDK) enregistre en interne. Assurez-vous également de spécifier les
      `authenticationProperties` correspondantes, que vous pouvez construire à l’aide de
      `LoginAuthenticationPropertiesBuilder`.

      Après avoir appelé `HttpContext.ChallengeAsync()` avec succès, l’utilisateur sera redirigé vers Auth0 et
      sera connecté à la fois au middleware OIDC et au middleware de cookies lorsqu’il sera redirigé vers votre application.
      Cela permettra aux utilisateurs d’être authentifiés lors des requêtes suivantes.

      <Info>
        ##### Point de contrôle

        Maintenant que vous avez configuré la connexion, exécutez votre application pour vérifier que :

        * L’accès à votre page `Login` redirige vers Auth0.
        * La saisie de vos identifiants vous redirige vers votre application.
      </Info>

      <AuthCodeGroup>
        <Login />

        <Logout />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Après que le middleware a récupéré avec succès les jetons auprès d’Auth0, il extrait les informations et revendications de l’utilisateur à partir du jeton d’identité et les rend disponibles via `AuthenticationState`, que vous pouvez ajouter en tant que `CascadingParameter`.

      Vous pouvez créer une page de profil utilisateur personnalisée pour afficher le nom de l’utilisateur, ainsi que des revendications supplémentaires (comme le courriel et la photo), en récupérant les informations correspondantes à partir de la propriété `User` de `AuthenticationState` et en les transmettant à la vue dans le code Blazor.

      <Info>
        ##### Point de contrôle

        Maintenant que vous avez configuré l’affichage du profil de l’utilisateur, exécutez votre application pour vérifier que :

        * Lorsque vous accédez au endpoint contenant le profil après une connexion réussie, le profil de l’utilisateur s’affiche.
      </Info>

      <AuthCodeGroup>
        <Login />

        <Logout />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      La déconnexion de l’utilisateur à partir de votre propre application peut être effectuée en appelant `HttpContext.SignOutAsync` avec
      le schéma d’authentification `CookieAuthenticationDefaults.AuthenticationScheme` à partir de la méthode
      `OnGet` de `LogoutModel`.

      De plus, si vous voulez aussi déconnecter l’utilisateur d’Auth0 (ce qui peut aussi le déconnecter d’autres applications
      qui dépendent de l’authentification unique), appelez `HttpContext.SignOutAsync` avec le schéma d’authentification
      `Auth0Constants.AuthenticationScheme` ainsi que les `authenticationProperties` appropriées, qui peuvent être construites à l’aide de
      `LogoutAuthenticationPropertiesBuilder`.

      <Info>
        ##### Point de contrôle

        Maintenant que vous avez configuré la déconnexion, exécutez votre application pour vérifier que :

        * L’accès à votre page `Logout` garantit que l’utilisateur est déconnecté.
        * Lorsque vous vous déconnectez aussi d’Auth0, vous devriez être redirigé vers Auth0, puis immédiatement redirigé vers
          votre propre application.
      </Info>

      <AuthCodeGroup>
        <Logout />

        <Login />
      </AuthCodeGroup>
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Découvrez comment configurer et gérer votre tenant Auth0 et vos Applications
    * [Trousse de développement logiciel (SDK) auth0-aspnetcore-authentication](https://github.com/auth0/auth0-aspnetcore-authentication) - Pour en savoir plus sur la trousse de développement logiciel (SDK) utilisée dans ce tutoriel
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités offertes par Auth0
  </Content>
</Recipe>