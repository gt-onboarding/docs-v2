---
title: Ajouter une connexion à votre application Django

sidebarTitle: Django
---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";

import HTML from "/snippets/fr-CA/quickstart/webapp/django/templates-index.html.mdx";
import Settings from "/snippets/fr-CA/quickstart/webapp/django/settings.py.mdx";
import Urls from "/snippets/fr-CA/quickstart/webapp/django/urls.py.mdx";
import Views from "/snippets/fr-CA/quickstart/webapp/django/views.py.mdx";
import Views2 from "/snippets/fr-CA/quickstart/webapp/django/views.py2.mdx";

import {AuthCodeGroup} from "/snippets/fr-CA/AuthCodeGroup.jsx";

export const sections = [
  { id: "configure-auth0", title: "Configurer Auth0" },
  { id: "install-dependencies", title: "Installer les dépendances" },
  { id: "configure-your-env-file", title: "Configurer votre fichier .env" },
  { id: "create-an-application", title: "Créer une application" },
  { id: "update-settings-py", title: "Mettre à jour settings.py" },
  { id: "setup-your-application", title: "Configurer votre application" },
  { id: "setup-your-route-handlers", title: "Configurer vos gestionnaires de routage" },
  { id: "register-your-routes", title: "Enregistrer vos routes" },
  { id: "add-templates", title: "Ajouter des modèles" },
  { id: "run-your-application", title: "Lancer votre application" }
]


<Recipe isSingleColumn>
  <Content>
    Auth0 vous permet d&#39;ajouter l&#39;authentification et d&#39;accéder aux informations du profil utilisateur dans votre application. Ce guide
    explique comment intégrer Auth0 avec une application Python [Django](https://www.djangoproject.com/) en utilisant la trousse de développement logiciel (SDK) [Authlib](https://authlib.org/).

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Pour utiliser les services Auth0, vous devez avoir une application configurée dans Auth0 Dashboard. C’est dans cette application Auth0 que vous configurerez le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente le projet que vous souhaitez intégrer. Chaque application dans Auth0 reçoit un ID client alphanumérique et unique que le code de votre application utilisera pour appeler les API Auth0 par l&#39;entremise de la trousse de développement logiciel (SDK).

      Tous les paramètres que vous configurez à l&#39;aide de ce Démarrage rapide seront automatiquement mis à jour pour votre Application dans le [Dashboard](https://manage.auth0.com/dashboard/us/auth0-dsepaid/), où vous pourrez gérer vos Applications ultérieurement.

      Si vous préférez explorer une configuration complète, vous pouvez plutôt consulter une application d&#39;exemple.

      ### Configurer les URL de rappel (Callback)

      Une URL de rappel (callback) est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après leur authentification. Si elle n&#39;est pas définie, les utilisateurs ne seront pas renvoyés à votre application après leur connexion.

      <Info>
        Si vous suivez notre projet d&#39;exemple, définissez cette valeur à
        `http://localhost:3000/callback`.
      </Info>

      ### Configurer les URL de déconnexion (Logout)

      Une URL de déconnexion (logout) est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après leur déconnexion. Si elle n&#39;est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront une erreur.

      <Info>
        Si vous suivez notre projet d&#39;exemple, définissez cette valeur à `http://localhost:3000`.
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Pour cette intégration, vous devez ajouter plusieurs dépendances de bibliothèques, comme Authlib. Créez un fichier
      `requirements.txt` dans le répertoire de votre projet, puis ajoutez-y le contenu suivant :

      ```text lines
      authlib ~= 1.0
      django ~= 4.0
      python-dotenv ~= 0.19
      requests ~= 2.27
      ```

      Exécutez la commande suivante dans votre shell pour pouvoir utiliser ces dépendances :

      ```text lines
      pip install -r requirements.txt
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Ensuite, créez un fichier `.env` dans le répertoire de votre projet. Ce fichier contiendra les clés de votre client et d’autres
      paramètres de configuration.

      ```text lines
      AUTH0_CLIENT_ID={yourClientId}
      AUTH0_CLIENT_SECRET={yourClientSecret}
      AUTH0_DOMAIN={yourDomain}
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Si vous avez déjà une application Django configurée, passez à l’étape suivante. Pour un nouveau projet d’application, exécutez la commande suivante :

      ```text lines
      django-admin startproject webappexample
      ```

      Accédez au nouveau dossier de projet :

      ```text lines
      cd webappexample
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Ouvrez le fichier `webappexample/settings.py` pour passer en revue les valeurs du fichier `.env`.

      Au début du fichier, ajoutez les imports `os` et `dotenv`.

      Ensuite, sous la définition de `BASE_DIR`, ajoutez la variable `TEMPLATE_DIR`.

      Ensuite, repérez la variable `TEMPLATES` et mettez à jour la valeur `DIRS` pour y ajouter notre
      chaîne `TEMPLATE_DIR`. Cela détermine le chemin des fichiers de gabarit, que vous créerez à une
      étape ultérieure. Gardez tout autre contenu de ce tableau tel quel.

      À la fin de ce fichier, ajoutez le code pour charger la configuration d&#39;Auth0.

      <AuthCodeGroup>
        <HTML />

        <Settings />

        <Urls />

        <Views />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Pour commencer à créer votre application, ouvrez le fichier `webappexample/views.py` dans votre IDE.

      Importez toutes les bibliothèques dont votre application a besoin.

      Vous pouvez maintenant configurer Authlib pour gérer l’authentification de votre application auprès d’Auth0.

      Pour en savoir plus sur les options de configuration de la méthode OAuth `register()` d’Authlib, consultez [leur documentation](https://docs.authlib.org/en/latest/client/frameworks.html#using-oauth-2-0-to-log-in).

      <AuthCodeGroup>
        <Views />

        <HTML />

        <Settings />

        <Urls />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Dans cet exemple, vous ajouterez quatre routes pour votre application : les routes de connexion, de rappel (callback), de déconnexion et d’index.

      * `login` - Lorsque les visiteurs de votre application accèdent à la route `/login`, ils sont redirigés vers Auth0 pour
        commencer le processus d’authentification.
      * `callback` - Une fois que vos utilisateurs ont terminé leur connexion avec Auth0, ils reviennent à votre application
        via la route `/callback`. Cette route enregistre la session de l’utilisateur et évite qu’ils aient à
        se reconnecter lorsqu’ils reviennent.
      * `logout` - La route `/logout` déconnecte les utilisateurs de votre application. Cette route efface
        la session utilisateur dans votre application et redirige vers le point de terminaison de déconnexion d’Auth0 pour s’assurer que la session n’est plus
        enregistrée. Ensuite, l’application redirige l’utilisateur vers votre route d’accueil.
      * `index` - La route d’accueil affiche les détails d’un utilisateur authentifié ou permet aux visiteurs de se connecter.

      <AuthCodeGroup>
        <Views2 />

        <HTML />

        <Settings />

        <Urls />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8" isSingleColumn>
      Remplacez le contenu de votre fichier `webappexample/urls.py` par le code de droite afin de raccorder
      ces nouvelles routes.

      Cela achemine les routes `/login`, `/callback`, `/logout` et `/` vers les gestionnaires appropriés.

      <AuthCodeGroup>
        <Urls />

        <HTML />

        <Settings />

        <Views />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[8].id} title={sections[8].title} stepNumber="9" isSingleColumn>
      Ensuite, vous allez créer un fichier de gabarit utilisé dans la route de la page d’accueil.

      Créez un nouveau sous-répertoire dans le dossier `webappexample` nommé `templates`, puis créez
      un fichier `index.html`.

      Le fichier `index.html` contiendra le code de gabarit pour afficher les informations de l&#39;utilisateur s’il est connecté, ou
      lui présenter un bouton de connexion s’il est déconnecté.

      <AuthCodeGroup>
        <HTML />

        <Settings />

        <Urls />

        <Views />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[9].id} title={sections[9].title} stepNumber="10" isSingleColumn>
      Vous êtes prêt à lancer votre application ! À partir du répertoire de votre projet, ouvrez un terminal et exécutez :

      ```text lines
      python3 manage.py migrate
      python3 manage.py runserver 3000
      ```

      Votre application devrait maintenant être prête et accessible depuis votre navigateur à l’adresse [http://localhost:3000](http://localhost:3000).

      <Info>
        ##### Point de contrôle

        Accédez à [http://localhost:3000](http://localhost:3000/) pour vérifier. Vous devriez voir un bouton de connexion qui redirige vers
        Auth0 pour la connexion, puis qui vous ramène à votre application pour afficher les informations de votre profil.
      </Info>

      <LoggedInForm />
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Apprenez à configurer et à gérer votre tenant Auth0 et vos applications
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrir les intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>
</Recipe>