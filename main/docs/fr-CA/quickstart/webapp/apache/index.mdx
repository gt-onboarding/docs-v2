---
title: "Apache"
permalink: "01-login"
---

import {AuthCodeBlock} from "/snippets/fr-CA/AuthCodeBlock.jsx";

Maintenu par la communauté

Ce didacticiel montre comment utiliser la Trousse de développement logiciel (SDK) Apache d&#39;Auth0 pour ajouter l&#39;authentification et l&#39;autorisation à votre application Web. Nous vous recommandons de vous connecter pour suivre ce démarrage rapide avec des exemples configurés pour votre compte.

<Note>
  ### Configuration système requise

  Ce didacticiel et le projet d’exemple ont été testés avec ce qui suit :

  * Apache 2.4
</Note>

**Veuillez suivre les étapes ci-dessous pour configurer votre application à l’aide d’Apache afin de l’utiliser avec Auth0 et OpenID Connect.**


<div id="install-and-enable-mod_auth_openidc-module">
  ## Installer et activer le module mod&#95;auth&#95;openidc
</div>

D’abord, vous devez installer le module `mod_auth_openidc` pour Apache.

Vous pouvez obtenir les binaires depuis [GitHub](https://github.com/zmartzone/mod_auth_openidc/releases) et les installer pour votre système d’exploitation. Si votre système d’exploitation n’est compatible avec aucun des binaires proposés, vous pouvez quand même [compiler le module à partir des sources](https://github.com/zmartzone/mod_auth_openidc/blob/master/INSTALL).

Une fois que vous l’avez installé, vous devez simplement l’activer dans Apache (si vous utilisez Windows, vous pouvez utiliser [cet outil](https://github.com/enderandpeter/win-a2enmod#installation) pour faire fonctionner `a2enmod` sur votre système).

```bash lines
a2enmod auth_openidc
```


<div id="configure-the-module-with-your-auth0-account-information">
  ## Configurer le module avec les informations de votre compte Auth0
</div>

Vous devriez maintenant voir un nouveau fichier de configuration dans le répertoire `/etc/apache2/mods-available`, où les modules Apache sont généralement installés (sur Windows, vous devez utiliser le fichier `/apache/conf/httpd.conf`).

Dans ce fichier, vous devez ajouter la configuration suivante pour le module `mod_auth_openidc`.

export const codeExample = `# mods-available/auth_openidc.conf

OIDCProviderMetadataURL https://{yourDomain}/.well-known/openid-configuration
OIDCClientID {yourClientId}
OIDCClientSecret '{yourClientSecret}'

OIDCScope "openid name email"
OIDCRedirectURI https://your_apache_server/your_path/redirect_uri/
OIDCCryptoPassphrase &lt;passwordToEncryptTheSessionInformationOnTheCookie&gt;

&lt;Location /your_path&gt;
   AuthType openid-connect
   Require valid-user
   LogLevel debug
&lt;/Location&gt;`;

<AuthCodeBlock children={codeExample} language="conf" />


<div id="configuring-auth0-settings">
  ## Configuration des paramètres Auth0
</div>

Dans les paramètres de votre application, ajoutez un nouveau rappel autorisé dont la valeur est `OIDCRedirectURI`.

Ensuite, allez à la section OAuth dans les paramètres avancés et modifiez « JsonWebToken Token Signature Algorithm » pour RS256.

<div id="authorization">
  ## Autorisation
</div>

Vous pouvez configurer Apache pour protéger un emplacement spécifique en fonction d’un attribut de l’utilisateur. Voici un exemple :

```conf lines
# mods-available/auth_openidc.conf

<Location /example>
   AuthType openid-connect
   #Require valid-user
   Require claim folder:example
</Location>

<Location /example2>
   AuthType openid-connect
   #Require valid-user
   Require claim folder:example2
</Location>
```

Vous pouvez ensuite définir une règle dans Auth0 qui renverra l’attribut `folder` :

```javascript lines
function(user, context, callback) {
    if (somecondition()) {
       user.folder = 'example2';
    }

   user.folder = 'example';
}
```

Ou vous pouvez même utiliser un tableau de répertoires, et le module Apache vérifiera si ce tableau contient l’une de ces valeurs.

```javascript lines
function(user, context, callback) {
    user.folders = [];
    if (somecondition()) {
       user.folders.push('example2');
    }

   user.folders.push('example');
}
```

[Modifier sur GitHub](https://github.com/auth0/docs/edit/master/articles/quickstart/webapp/apache/01-login.md)
