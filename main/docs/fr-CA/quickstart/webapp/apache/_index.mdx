---
title: Apache

---

import {AuthCodeGroup} from "/snippets/fr-CA/AuthCodeGroup.jsx";

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx"
import Code1 from "/snippets/fr-CA/quickstart/webapp/apache/code1.mdx"
import Code2 from "/snippets/fr-CA/quickstart/webapp/apache/code2.mdx"

export const sections = [
  { id: "system-requirements", title: "Configuration système requise" },
  { id: "install-and-enable-mod-auth-openidc-module", title: "Installer et activer le module mod_auth_openidc" },
  { id: "configure-the-module-with-your-auth0-account-information", title: "Configurer le module avec les renseignements de votre compte Auth0" },
  { id: "configure-auth0", title: "Configurer Auth0" },
  { id: "authorization", title: "Autorisation" }
]


<Recipe isSingleColumn>
  <Content>
    Ce tutoriel montre comment configurer Apache pour ajouter l’authentification et l’autorisation à votre application web. Nous vous recommandons de vous connecter pour suivre ce Démarrage rapide avec des exemples configurés pour votre compte.

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Ce tutoriel et le projet d’exemple ont été testés avec ce qui suit :

      - Apache 2.4
    
    <LoggedInForm />
</Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Commencez par installer le module `mod_auth_openidc` pour Apache.

      Vous pouvez obtenir les binaires à partir de [GitHub](https://github.com/zmartzone/mod_auth_openidc/releases) et les installer pour votre système d’exploitation. Si votre système d’exploitation n’est compatible avec aucun des binaires, vous pouvez tout de même [le compiler à partir du code source](https://github.com/zmartzone/mod_auth_openidc/blob/master/INSTALL).

      Une fois le module installé, activez-le pour Apache avec la commande `a2enmod`. Pour en savoir plus, consultez [a2enmod sur la page de manuel Ubuntu](https://manpages.ubuntu.com/manpages/focal/man8/a2enmod.8.html) :

      ```text lines
      a2enmod auth_openidc
      ```

      <Info>
      Pour Windows, vous pouvez utiliser [ce script Powershell](https://github.com/enderandpeter/win-a2enmod#installation) pour faire fonctionner `a2enmod` sur votre système.
      </Info>
    
    <LoggedInForm />
</Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Mettez à jour votre nouveau fichier de configuration (`auth_openidc.conf`), situé dans le dossier `/etc/apache2/mods-available`.

      <Info>
      Pour Windows, vous devez utiliser le fichier `/apache/conf/httpd.conf`.
      </Info>
    
    <AuthCodeGroup>
            <Code1/>
          </AuthCodeGroup>
</Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Dans Auth0 Dashboard :

      1. Accédez à **Applications** > **Applications**, puis sélectionnez votre application dans la liste.
      2. Passez à la vue **Settings**, puis repérez la section **Application URIs**.
      3. Ajoutez la valeur de `OIDCRedirectURI` aux **URL de redirection autorisées**.
      4. Repérez **Advanced Settings** au bas de la page.
      5. Passez à la vue **OAuth**.
      6. Définissez **JSON Web Token (JWT) Signature Algorithm** sur `RS256`.
    
    <LoggedInForm />
</Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Vous pouvez configurer Apache pour protéger un emplacement précis en fonction de la valeur d’une revendication dans le jeton d’identité de l’utilisateur en ajoutant un bloc `Location` à votre fichier `auth_openidc.conf`.

      Par exemple, vous pourriez créer une Action qui lit les rôles de l’utilisateur, puis ajoute une revendication qui accorde l’accès à un emplacement protégé :

      ```js lines
      exports.onExecutePostLogin = async (event, api) => {
        const roles = event.authorization.roles; // ['user', 'admin']
          if (roles.includes('admin')) {
          api.idToken.setCustomClaim('folder', 'admin');
        }
      };
      ```
    
    <AuthCodeGroup>
            <Code2/>
          </AuthCodeGroup>
</Section>

    ## Prochaines étapes
    Excellent travail! Si vous êtes rendu jusqu’ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur actives dans votre application.

    Ce Démarrage rapide est maintenant terminé, mais il y a encore beaucoup à explorer. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    - [Auth0 Dashboard](https://manage.auth0.com/) - Apprenez à configurer et à gérer votre tenant et vos applications Auth0

    - [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>

  
</Recipe>