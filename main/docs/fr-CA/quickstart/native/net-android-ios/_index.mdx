---
title: Ajoutez la fonction de connexion à votre application .NET pour Android et iOS
sidebarTitle: .NET pour Android et iOS

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";
import Mainactivity from "/snippets/fr-CA/quickstart/native/net-android-ios/MainActivity.cs.mdx";
import Appdelegate from "/snippets/fr-CA/quickstart/native/net-android-ios/AppDelegate.cs.mdx";
import Myviewcontroller from "/snippets/fr-CA/quickstart/native/net-android-ios/MyViewController.cs.mdx";

import {AuthCodeGroup} from "/snippets/fr-CA/AuthCodeGroup.jsx";

export const sections = [
      { id: "configure-auth0", title: "Configurer Auth0" },
      { id: "install-the-auth0-sdk", title: "Installer la trousse de développement logiciel (SDK) Auth0" },
      { id: "instantiate-the-auth0client", title: "Instancier Auth0Client" },
      { id: "configure-android", title: "Configurer Android" },
      { id: "configure-ios", title: "Configurer iOS" },
      { id: "add-login-to-your-application", title: "Ajouter la connexion à votre application" },
      { id: "add-logout-to-your-application", title: "Ajouter la déconnexion à votre application" },
      { id: "show-user-profile-information", title: "Afficher les informations de profil de l'utilisateur" }
]


<Recipe isSingleColumn>
  <Content>
    Auth0 vous permet d&#39;ajouter rapidement l&#39;authentification à presque n&#39;importe quel type d&#39;application. Ce guide explique comment
    intégrer Auth0, ajouter l&#39;authentification et afficher les informations de profil utilisateur dans n&#39;importe quelle application .NET Android et iOS
    en utilisant les trousses de développement logiciel (SDK) Auth0 pour [Android](https://www.nuget.org/packages/Auth0.OidcClient.AndroidX/) et [iOS](https://www.nuget.org/packages/Auth0.OidcClient.iOS).

    <Info>
      Ce démarrage rapide se concentre sur .NET Android et iOS, puisqu’ils constituent la nouvelle génération de
      `Xamarin.Android` et `Xamarin.iOS`. Si vous utilisez encore
      `Xamarin.Android` et `Xamarin.iOS`, vous pouvez suivre ce guide, car l’intégration est
      identique et les trousses de développement logiciel (SDK) sont compatibles.
    </Info>

    Pour utiliser ce démarrage rapide, vous devez :

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Pour utiliser les services Auth0, vous devez avoir une application configurée dans Auth0 Dashboard. L’Application Auth0 est l’endroit où vous configurerez le mode de fonctionnement de l’authentification pour votre projet.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle « Application native » ou sélectionnez une application existante qui représente le projet que vous voulez intégrer. Chaque application dans Auth0 reçoit un ID client unique alphanumérique que le code de votre application utilisera pour appeler les API Auth0 au moyen de la Trousse de développement logiciel (SDK).

      Tous les paramètres que vous configurez à l’aide de ce Démarrage rapide seront automatiquement mis à jour pour votre application dans le [Dashboard](https://manage.auth0.com/#/), où vous pourrez gérer vos applications par la suite.

      Si vous préférez explorer une configuration complète, vous pouvez plutôt consulter une application d’exemple.

      ### Configurer les URL de rappel (callback)

      Une URL de rappel (callback) est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après qu’ils se sont authentifiés. Si aucune URL n’est définie, les utilisateurs ne seront pas renvoyés à votre application après leur connexion.

      <Info>
        Si vous suivez notre projet d’exemple, définissez ce paramètre à l’une des URL suivantes selon
        votre plateforme :

        * **Android** : `YOUR_PACKAGE_NAME://{yourDomain}/android/YOUR_PACKAGE_NAME/callback`
        * **iOS** : `YOUR_BUNDLE_ID://{yourDomain}/ios/YOUR_BUNDLE_ID/callback`

        **Android** : `YOUR_PACKAGE_NAME://{yourDomain}/android/YOUR_PACKAGE_NAME/callback`

        **iOS** : `YOUR_BUNDLE_ID://{yourDomain}/ios/YOUR_BUNDLE_ID/callback`
      </Info>

      ### Configurer les URL de déconnexion

      Une URL de déconnexion est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après qu’ils se sont déconnectés. Si aucune URL n’est définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront une erreur.

      <Info>
        Si vous suivez notre projet d’exemple, définissez ce paramètre à l’une des URL suivantes selon
        votre plateforme :

        * **Android** : `YOUR_PACKAGE_NAME://{yourDomain}/android/YOUR_PACKAGE_NAME/callback`
        * **iOS** : `YOUR_BUNDLE_ID://{yourDomain}/ios/YOUR_BUNDLE_ID/callback`

        **Android** : `YOUR_PACKAGE_NAME://{yourDomain}/android/YOUR_PACKAGE_NAME/callback`

        **iOS** : `YOUR_BUNDLE_ID://{yourDomain}/ios/YOUR_BUNDLE_ID/callback`
      </Info>

      Enfin, assurez-vous que le **Application Type** de votre application est défini sur **Native** dans les [Application Settings](https://manage.auth0.com/#/applications/).

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Auth0 fournit une [trousse de développement logiciel (SDK) pour Android](https://www.nuget.org/packages/Auth0.OidcClient.AndroidX/) et une [trousse de développement logiciel (SDK) pour iOS](https://www.nuget.org/packages/Auth0.OidcClient.iOS) pour simplifier la mise en œuvre de l’authentification Auth0
      dans les applications .NET pour Android et iOS.

      Utilisez le NuGet Package Manager (Tools -&gt; Library Package Manager -&gt; Package Manager Console) pour installer le
      package `Auth0.OidcClient.AndroidX` ou `Auth0.OidcClient.iOS`, selon que vous développez
      une application Android ou iOS.

      Vous pouvez aussi utiliser la NuGet Package Manager Console (`Install-Package`) ou l’interface CLI `dotnet` (`dotnet add`).

      ```
      Install-Package Auth0.OidcClient.AndroidX
      Install-Package Auth0.OidcClient.iOS
      ```

      ```
      dotnet add Auth0.OidcClient.AndroidX
      dotnet add Auth0.OidcClient.iOS
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Pour intégrer Auth0 dans votre application, créez une instance de la classe `Auth0Client` en lui passant
      une instance de `Auth0ClientOptions` contenant votre Domaine Auth0 et votre ID client.

      ```csharp
      using Auth0.OidcClient;
      var client = new Auth0Client(new Auth0ClientOptions {
      Domain = "{yourDomain}",
      ClientId = "{yourClientId}"
      }, this);
      ```

      Par défaut, la trousse de développement logiciel (SDK) utilisera Chrome Custom Tabs pour Android et ASWebAuthenticationSession pour iOS.

      <Note>
        ##### Point de contrôle

        Votre `Auth0Client` devrait maintenant être correctement instancié. Exécutez votre application pour vérifier que :

        * Le `Auth0Client` est correctement instancié dans l’`Activity` (Android) ou
          le `UIViewController` (iOS).
        * Votre application ne génère aucune erreur liée à Auth0.
      </Note>

      <LoggedInForm />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Après qu’un utilisateur s’est authentifié avec succès, il sera redirigé vers l’URL de rappel (callback) que vous avez configurée plus tôt dans ce Démarrage rapide.

      Pour gérer le callback sur les appareils Android, vous devez enregistrer un intent qui gère cette URL de rappel. Une façon simple de le faire est d’enregistrer l’intent sur la même activité à partir de laquelle vous avez appelé la méthode LoginAsync pour lancer le flux d’authentification.

      Assurez-vous de remplacer `YOUR_ANDROID_PACKAGE_NAME` dans l’exemple de code par le véritable nom du package de votre application, comme `com.mycompany.myapplication`, et assurez-vous que tout le texte pour `DataScheme`, `DataHost` et `DataPathPrefix` est en minuscules. Définissez également `LaunchMode = LaunchMode.SingleTask` pour l’Activity; sinon, le système créera une nouvelle instance de l’activité chaque fois que l’URL de rappel sera appelée.

      De plus, vous devez gérer l’intent dans l’événement `OnNewIntent` de votre classe `Activity`. Vous devez informer le client OIDC Auth0 afin de terminer le flux d’authentification en appelant la méthode `Send` du singleton `ActivityMediator`, en transmettant l’URL qui a été reçue.

      ```charp
      protected override void OnNewIntent(Intent intent)
      {

            base.OnNewIntent(intent);

            ActivityMediator.Instance.Send(intent.DataString);

      }
      ```

      <AuthCodeGroup>
        <Mainactivity />

        <Appdelegate />

        <Myviewcontroller />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Après qu’un utilisateur a réussi à s’authentifier, il sera redirigé vers l’URL de rappel (callback) que vous avez configurée plus tôt dans ce
      démarrage rapide.

      Pour gérer le rappel sur les appareils iOS :

      1. Ouvrez le fichier `Info.plist` de votre application dans Visual Studio, puis accédez à l’onglet **Advanced**.
      2. Sous **URL Types**, cliquez sur le bouton **Add URL Type**.
      3. Définissez **Identifier** sur Auth0, **URL Schemes** sur la même valeur que le `Bundle Identifier` de votre application,
         et **Role** sur `None`.

      Voici un exemple de représentation XML de votre fichier `info.plist` après avoir ajouté le type
      d’URL :

      ```xml
      <key>CFBundleURLTypes</key>
      <array>
      <dict>
      <key>CFBundleTypeRole</key>
      <string>None</string>
      <key>CFBundleURLName</key>
      <string>Auth0</string>
      <key>CFBundleURLSchemes</key>
      <array>
      <string>YOUR_BUNDLE_IDENTIFIER</string>
      </array>
      </dict>
      </array>
      ```

      De plus, vous devez gérer l’URL de rappel dans l’événement `OpenUrl` de votre
      classe `AppDelegate`. Vous devez informer le Client OIDC Auth0 pour terminer le flux d’authentification en
      appelant la méthode `Send` du singleton `ActivityMediator`, en lui transmettant l’URL
      reçue.

      <AuthCodeGroup>
        <Appdelegate />

        <Mainactivity />

        <Myviewcontroller />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Maintenant que vous avez configuré votre Application Auth0 et la trousse de développement logiciel (SDK) Auth0, vous devez mettre en place la connexion pour votre projet.
      Pour ce faire, vous utiliserez la méthode `LoginAsync()` du SDK pour créer un bouton de connexion qui redirige les utilisateurs vers la page Universal Login d’Auth0.

      ```csharp
      var loginResult = await client.LoginAsync();
      ```

      S&#39;il n&#39;y a aucune erreur, vous pouvez accéder aux propriétés `User`, `IdentityToken`,
      `AccessToken` et `RefreshToken` de l&#39;objet `LoginResult` renvoyé par
      `LoginAsync()`.

      <Note>
        ##### Point de contrôle

        Vous devriez maintenant pouvoir vous connecter ou vous inscrire à l&#39;aide d&#39;un nom d&#39;utilisateur et d&#39;un mot de passe.

        Cliquez sur le bouton de connexion et vérifiez les éléments suivants :

        * Votre application Android ou iOS vous redirige vers la page Universal Login d&#39;Auth0.
        * Vous pouvez vous connecter ou vous inscrire.
        * Auth0 vous redirige vers votre application.
      </Note>

      <LoggedInForm />
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Les utilisateurs qui se connectent à votre projet auront aussi besoin d’un moyen de se déconnecter. Créez un bouton de déconnexion à l’aide de la méthode `LogoutAsync()` de la Trousse de développement logiciel (SDK). Lorsque les utilisateurs se déconnecteront, ils seront redirigés vers votre point de terminaison de déconnexion Auth0, qui les redirigera ensuite immédiatement vers l’URL de déconnexion que vous avez configurée plus tôt dans ce démarrage rapide.

      ```csharp
      await client.LogoutAsync();
      ```

      <Note>
        ##### Point de contrôle

        Exécutez votre application et cliquez sur le bouton de déconnexion. Vérifiez les points suivants :

        * Votre application Android ou iOS vous redirige vers l’adresse que vous avez indiquée comme l’une des
          Allowed Logout URLs dans les paramètres de votre Application.
        * Vous n’êtes plus connecté à votre application.
      </Note>

      <LoggedInForm />
    </Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8" isSingleColumn>
      Maintenant que vos utilisateurs peuvent se connecter et se déconnecter, vous voudrez probablement pouvoir récupérer les informations de profil associées aux utilisateurs authentifiés.
      Par exemple, vous pourriez vouloir afficher le nom ou la photo de profil d’un utilisateur connecté dans votre projet.

      La Trousse de développement logiciel (SDK) Auth0 pour Android et iOS fournit les informations sur l’utilisateur au moyen de la propriété `LoginResult.User`.

      ```csharp
      if loginResult.IsError == false {
            var user = loginResult.User
            var name = user.FindFirst(c => c.Type == "name")?.Value
            var email = user.FindFirst(c => c.Type == "email")?.Value
            var picture = user.FindFirst(c => c.Type == "picture")?.Value
      }
      ```

      <LoggedInForm />
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Découvrez comment configurer et gérer votre tenant Auth0 et vos applications
    * [Trousse de développement logiciel (SDK) auth0-oidc-client-net](https://github.com/auth0/auth0-oidc-client-net) - Découvrez plus en détail la trousse de développement logiciel (SDK) utilisée dans ce tutoriel
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez des intégrations permettant d’étendre les fonctionnalités d’Auth0
  </Content>
</Recipe>