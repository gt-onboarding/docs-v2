---
title: Ajouter la connexion à votre application UWP
sidebarTitle: UWP

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";
import MainpageXaml from "/snippets/fr-CA/quickstart/native/windows-uwp-csharp/MainPage.xaml.cs.mdx";

export const sections = [
  { id: "system-requirements", title: "Configuration système requise" },
  { id: "configure-auth0", title: "Configurer Auth0" },
  { id: "install-dependencies", title: "Installer les dépendances" },
  { id: "trigger-authentication", title: "Déclencher l’authentification" },
  { id: "handle-authentication-tokens", title: "Gérer les jetons d’authentification" },
  { id: "logout", title: "Se déconnecter" }
]

<Recipe isSingleColumn>
  <Content>
    Ce tutoriel montre comment ajouter la connexion utilisateur à une application UWP C# en utilisant Auth0. Nous vous recommandons de vous connecter
    pour suivre ce Démarrage rapide avec des exemples configurés pour votre compte.

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Ce tutoriel et ce projet d’exemple ont été testés avec les éléments suivants :

      * Microsoft Visual Studio 2022
      * Windows 10 SDK (10.0.26100.0)
      * Auth0.OidcClient.UWP 4.0.0

      <Info>
        **Vous débutez avec Auth0 ?** Apprenez [comment Auth0 fonctionne](/docs/fr-CA/get-started/auth0-overview), comment il [s’intègre aux applications natives](/docs/fr-CA/get-started/architecture-scenarios/mobile-api) et quel [protocole](/docs/fr-CA/get-started/authentication-and-authorization-flow/authorization-code-flow-with-pkce) il utilise.
      </Info>

      ### Obtenir les clés de votre Application

      Quand vous vous êtes inscrit à Auth0, une nouvelle Application a été créée pour vous, ou vous avez pu en créer une nouvelle.
      Vous aurez besoin de certaines informations concernant cette Application pour communiquer avec Auth0. Vous pouvez obtenir ces informations dans
      la section [Application Settings](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq/applications) de l’Auth0 Dashboard.

      <Frame>
        <img src="https://cdn2.auth0.com/docs/1.14546.0/media/articles/dashboard/client_settings.png" />
      </Frame>

      <Info>
        Lorsque vous utilisez l’Application par défaut avec une Application native ou une application monopage, assurez-vous de mettre à jour la
        **Token Endpoint Authentication Method** pour la définir sur `None` et de définir le
        **Application Type** sur `SPA` ou `Native`.
      </Info>

      Vous avez besoin des informations suivantes :

      * **Domaine**
      * **ID client**

      <Info>
        Si vous téléchargez l’exemple en haut de cette page, ces informations sont déjà préremplies pour vous.
      </Info>

      markdownlint-disable MD002 MD041

      ### Configurer les URL de redirection

      Une URL de redirection est une URL dans votre application vers laquelle Auth0 redirige l’utilisateur après son authentification. L’URL de redirection de votre application doit être ajoutée au champ **URL de redirection autorisées** dans vos [Application Settings](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq/applications). Si ce champ n’est pas défini, les utilisateurs ne pourront pas se connecter à l’application et recevront un message d’erreur.

      <Info>
        Si vous suivez le projet d’exemple que vous avez téléchargé en haut de cette page, vous devez
        définir les **URL de redirection autorisées** sur
        `https://{yourDomain}/mobile`.
      </Info>

      markdownlint-disable MD002 MD041

      ### Configurer les URL de déconnexion

      Une URL de déconnexion est une URL dans votre application vers laquelle Auth0 peut revenir après que l’utilisateur a été déconnecté du
      Serveur d’autorisation. Celle-ci est spécifiée dans le paramètre de requête `returnTo`. L’URL de déconnexion de votre
      application doit être ajoutée au champ **URL de déconnexion autorisées** dans vos [Application Settings](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq/applications). Si ce champ n’est pas défini, les utilisateurs ne pourront pas se déconnecter de l’application et recevront un message d’erreur.

      <Info>
        Si vous suivez le projet d’exemple que vous avez téléchargé en haut de cette page, l’URL de déconnexion que vous devez ajouter au champ **URL de déconnexion autorisées** est
        `https://{yourDomain}/mobile`.
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      ### Obtenir les clés de votre Application

      Lorsque vous vous êtes inscrit à Auth0, une nouvelle Application a été créée pour vous, ou vous avez peut-être choisi d’en créer une vous‑même.
      Vous aurez besoin de certaines informations concernant cette Application pour communiquer avec Auth0. Vous pouvez obtenir ces informations dans la section
      [Application Settings](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq/applications) de l’Auth0 Dashboard.

      <Info>
        Lorsque vous utilisez l’Application par défaut avec une Application native ou une Application monopage, assurez-vous de mettre à jour la
        **Token Endpoint Authentication Method** pour la définir sur `None` et de définir le
        **Application Type** sur `SPA` ou `Native`.
      </Info>

      Vous avez besoin des informations suivantes :

      * **Domaine**
      * **ID client**

      <Info>
        Si vous téléchargez l’exemple en haut de cette page, ces informations sont déjà renseignées pour vous.
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Utilisez la Console du gestionnaire de package NuGet (Tools -&gt; NuGet Package Manager -&gt; Package Manager Console) pour
      installer le package `Auth0.OidcClient.UWP` en exécutant la commande suivante :

      ```
      Install-Package Auth0.OidcClient.UWP
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Pour intégrer la connexion Auth0 à votre application, il suffit d’instancier un objet de la classe `Auth0Client` en configurant le domaine Auth0 et l’ID client :

      ```cs lines
      // MainPage.xaml.cs

      using Auth0.OidcClient;

      var client = new Auth0Client(new Auth0ClientOptions
      {
          Domain = "{yourDomain}",
          ClientId = "{yourClientId}"
      });
      ```

      Vous pouvez ensuite appeler la méthode `LoginAsync` pour effectuer la connexion de l&#39;utilisateur :

      ```cs lines
      var loginResult = await client.LoginAsync();
      ```

      <Frame>
        <img src="https://cdn2.auth0.com/docs/1.14546.0/media/articles/native-platforms/windows-uwp-csharp/universal-login.png" />
      </Frame>

      Cela charge la page de connexion Auth0 dans une vue Web. Pour savoir comment personnaliser la page de connexion, consultez [ce document](/docs/fr-CA/authenticate/login/auth0-universal-login#simple-customization).

      <MainpageXaml />
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Le résultat de la connexion retourné indique si l’authentification a réussi et, le cas échéant, contient les jetons et
      les revendications de l’utilisateur.

      ### Erreur d’authentification

      Vous pouvez vérifier la propriété `IsError` du résultat pour voir si la connexion a échoué. La propriété
      `ErrorMessage` contient plus d’informations sur l’erreur qui s’est produite.

      ```cs lines
      if (loginResult.IsError)
      {
          Debug.WriteLine($"Une erreur s'est produite lors de la connexion : {loginResult.Error}")
      }
      ```

      ### Accès aux jetons

      Après une connexion réussie, le résultat de la connexion contient le jeton d&#39;identité et le jeton d&#39;accès dans les propriétés `IdentityToken` et `AccessToken`, respectivement.

      ```cs lines
      if (!loginResult.IsError)
      {
          Debug.WriteLine($"id_token: {loginResult.IdentityToken}");
          Debug.WriteLine($"access_token: {loginResult.AccessToken}");
      }
      ```

      ### Obtention des informations sur l&#39;utilisateur

      En cas de connexion réussie, le résultat de la connexion contient les informations de l&#39;utilisateur dans la propriété `User`, qui est un
      [ClaimsPrincipal](https://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal\(v=vs.110\).aspx).

      Pour obtenir des informations sur l&#39;utilisateur, vous pouvez interroger les revendications (claims). Vous pouvez par exemple obtenir le nom de l&#39;utilisateur et
      son adresse de courriel à partir des revendications `name` et `email` :

      ```cs lines
      if (!loginResult.IsError)
      {
          Debug.WriteLine($"name: {loginResult.User.FindFirst(c => c.Type == "name")?.Value}");
          Debug.WriteLine($"email: {loginResult.User.FindFirst(c => c.Type == "email")?.Value}");
      }
      ```

      <Info>
        Les déclarations exactes renvoyées dépendent des scopes demandés. Pour plus d&#39;informations, consultez @scopes.
      </Info>

      Vous pouvez obtenir la liste de toutes les déclarations contenues dans le jeton d&#39;identité en itérant sur la collection `Claims` :

      ```cs lines
      if (!loginResult.IsError)
      {
          foreach (var claim in loginResult.User.Claims)
          {
              Debug.WriteLine($"{claim.Type} = {claim.Value}");
          }
      }
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Pour déconnecter l&#39;utilisateur, appelez la méthode `LogoutAsync`.

      ```cs lines
      await client.LogoutAsync();
      ```

      <LoggedInForm />
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Découvrez comment configurer et gérer votre tenant Auth0 et vos Applications
    * [Trousse de développement logiciel (SDK) auth0-oidc-client-net](https://github.com/auth0/auth0-oidc-client-net) - Découvrez plus en détail la trousse de développement logiciel (SDK) utilisée dans ce tutoriel
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez les intégrations que vous pouvez activer pour enrichir les fonctionnalités d’Auth0
  </Content>
</Recipe>