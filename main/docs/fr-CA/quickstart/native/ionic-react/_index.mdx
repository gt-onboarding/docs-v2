---
title: Ajouter une connexion à votre application Ionic React avec Capacitor
sidebarTitle: Ionic et Capacitor (React)

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";
import Index from "/snippets/fr-CA/quickstart/native/ionic-react/index.tsx.mdx";
import Loginbutton from "/snippets/fr-CA/quickstart/native/ionic-react/login-button.tsx.mdx";
import Logoutbutton from "/snippets/fr-CA/quickstart/native/ionic-react/logout-button.tsx.mdx";
import App from "/snippets/fr-CA/quickstart/native/ionic-react/app.tsx.mdx";
import Userprofile from "/snippets/fr-CA/quickstart/native/ionic-react/user-profile.tsx.mdx";

import {AuthCodeGroup} from "/snippets/fr-CA/AuthCodeGroup.jsx";

export const sections = [
  { id: "getting-started", title: "Prise en main" },
  { id: "configure-auth0", title: "Configurer Auth0" },
  { id: "install-the-auth0-react-sdk", title: "Installer le SDK Auth0 React" },
  { id: "configure-the-auth0provider-component", title: "Configurer le composant Auth0Provider" },
  { id: "add-login-to-your-application", title: "Ajouter une connexion à votre application" },
  { id: "handle-the-login-callback", title: "Gérer le callback de connexion" },
  { id: "add-logout-to-your-application", title: "Ajouter une déconnexion à votre application" },
  { id: "show-the-user-profile", title: "Afficher le profil utilisateur" }
]

<Recipe isSingleColumn>
  <Content>
    Auth0 vous permet d&#39;ajouter rapidement l&#39;authentification et d&#39;accéder aux informations du profil utilisateur dans votre application.
    Ce guide explique comment intégrer Auth0 à une application Ionic (React) et Capacitor en utilisant la [trousse de développement logiciel (SDK) Auth0 React](https://github.com/auth0/auth0-react).

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Ce Démarrage rapide suppose que vous avez déjà une application [Ionic](https://ionicframework.com/) opérationnelle avec [Capacitor](https://capacitorjs.com/). Sinon, consultez le guide [Using
      Capacitor with Ionic Framework](https://capacitorjs.com/docs/getting-started/with-ionic) pour démarrer avec une application simple, ou clonez [nos applications
      d’exemple](https://github.com/auth0-samples/auth0-ionic-samples).

      Vous devriez aussi être à l’aise avec le [flux de développement avec Capacitor](https://capacitorjs.com/docs/basics/workflow).

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Pour utiliser les services Auth0, vous devez avoir une application configurée dans l’Auth0 Dashboard. C’est dans cette application Auth0 que vous configurerez le fonctionnement de l’authentification pour votre projet.

      <Info>
        Dans tout cet article, `YOUR_PACKAGE_ID` correspond à l’ID de package de votre application. Vous pouvez le trouver et le configurer dans le champ `appId` de votre fichier `capacitor.config.ts`. Consultez
        le [schéma de configuration de Capacitor](https://capacitorjs.com/docs/config#schema) pour plus d’information.
      </Info>

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle Application Auth0 ou sélectionner une Application existante qui représente
      le projet que vous voulez intégrer. Chaque Application dans Auth0 se voit attribuer un ID client alphanumérique unique
      que le code de votre application utilisera pour appeler les API Auth0 par l’entremise de la trousse de développement logiciel (SDK).

      Tous les paramètres que vous configurez à l’aide de ce Démarrage rapide seront automatiquement mis à jour pour votre Application dans le [Dashboard](https://manage.auth0.com/#/), où vous
      pourrez gérer vos Applications par la suite.

      Si vous préférez explorer une configuration complète, vous pouvez plutôt consulter une application d’exemple.

      ### Configurer les URL de rappel (Callback)

      Une URL de rappel (callback) est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après leur
      authentification. Si elle n’est pas définie, les utilisateurs ne seront pas renvoyés vers votre application après leur connexion.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur comme suit :

        `YOUR_PACKAGE_ID://{yourTenant}.auth0.com/capacitor/YOUR_PACKAGE_ID/callback`
      </Info>

      ### Configurer les URL de déconnexion (Logout)

      Une URL de déconnexion est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après leur
      déconnexion. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter à partir de votre application et recevront une erreur.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur comme suit :

        `YOUR_PACKAGE_ID://{yourTenant}.auth0.com/capacitor/YOUR_PACKAGE_ID/callback`.
      </Info>

      ### Configurer les origines autorisées

      Pour pouvoir effectuer des requêtes de votre application native vers Auth0, configurez les **origines autorisées (Allowed Origins)** suivantes dans
      vos [paramètres d’Application](https://manage.auth0.com/dashboard/#/applications/\{yourClientId}/settings).

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur à
        `capacitor://localhost, http://localhost` pour iOS et Android respectivement.
      </Info>

      Enfin, assurez-vous que le **type d’Application (Application Type)** de votre application est défini sur **Native** dans les [paramètres d’Application](https://manage.auth0.com/dashboard/#/applications/\{yourClientId}/settings).

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Exécutez la commande suivante à partir du répertoire de votre projet pour installer la trousse de développement logiciel (SDK) React d’Auth0 :

      ```bash
      npm install @auth0/auth0-react
      ```

      La trousse de développement logiciel (SDK) expose des méthodes et des variables qui vous aident à intégrer Auth0 de manière idiomatique à votre application React
      en utilisant les [React
      Hooks](https://reactjs.org/docs/hooks-overview.html) ou les [Higher-Order Components](https://reactjs.org/docs/higher-order-components.html).

      ### Installer les plugins Capacitor

      Ce Démarrage rapide et cet exemple utilisent certains des plugins officiels de Capacitor. Installez-les dans votre application à l’aide
      de la commande suivante :

      ```bash
      npm install @capacitor/browser @capacitor/app
      ```

      * [@capacitor/browser](https://capacitorjs.com/docs/apis/browser): Permet d’interagir avec le navigateur système
        de l’appareil et sert à ouvrir l’URL du point de terminaison d’autorisation d’Auth0.
      * [@capacitor/app](https://capacitorjs.com/docs/apis/app): Permet de s’abonner à des événements globaux de l’application,
        ce qui est utile pour gérer les callbacks provenant d’Auth0.

      <Info>
        Le plugin Browser de Capacitor sur iOS utilise [SFSafariViewController](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller) qui, sur iOS 11+, ne partage pas
        les témoins (cookies) avec Safari sur l’appareil. Cela signifie que le SSO ne fonctionnera pas sur ces appareils. Si vous avez besoin
        de SSO, utilisez plutôt un plugin compatible qui utilise [ASWebAuthenticationSession](https://developer.apple.com/documentation/authenticationservices/aswebauthenticationsession).
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      En arrière-plan, la Trousse de développement logiciel (SDK) Auth0 React utilise [React Context](https://reactjs.org/docs/context.html) pour gérer l’état d’authentification de vos utilisateurs. Une façon d’intégrer Auth0 à votre application React consiste à englober votre composant racine avec un `Auth0Provider` que vous pouvez importer à partir du SDK.

      Le composant `Auth0Provider` accepte les props suivantes :

      * `domain` : La valeur `domain` présente sous **Settings** de l’Application que vous avez créée dans votre Auth0 Dashboard, ou votre domaine personnalisé si vous utilisez la fonctionnalité de Domaines personnalisés d’Auth0.
      * `clientId` : La valeur de Client ID présente sous **Settings** de l’Application que vous avez créée dans votre Auth0 Dashboard.
      * `useRefreshTokens` : Pour utiliser auth0-react avec Ionic sur Android et iOS, il est nécessaire d’activer les Jetons d’actualisation.
      * `useRefreshTokensFallback` : Pour utiliser auth0-react avec Ionic sur Android et iOS, il est nécessaire de désactiver la solution de repli en iframe.
      * `authorizationParams.redirect_uri` : L’URL vers laquelle vous souhaitez rediriger vos utilisateurs après leur authentification avec Auth0.

      <Info>
        Pour conserver l’authentification après la fermeture et la réouverture de l’application, vous pouvez définir
        `cacheLocation` sur `localstorage` lors de la configuration du SDK, mais veuillez prendre connaissance
        [des risques liés au
        stockage de jetons dans localstorage](/docs/fr-CA/libraries/auth0-single-page-app-sdk#change-storage-options). De plus, localstorage doit être considéré comme **transitoire** dans une application Capacitor, car les données peuvent être récupérées de façon inattendue dans certaines circonstances. Veuillez lire les [recommandations sur le stockage dans la documentation Capacitor](https://capacitorjs.com/docs/guides/storage#why-cant-i-just-use-localstorage-or-indexeddb).

        De plus, le SDK peut [utiliser une implémentation de cache personnalisée](https://github.com/auth0/auth0-spa-js/blob/master/EXAMPLES.md#creating-a-custom-cache) pour stocker les jetons si
        vous devez utiliser un mécanisme de stockage plus sécurisé et plus persistant.

        **Remarque** : nous déconseillons d’utiliser le [plugin Storage de Capacitor](https://capacitorjs.com/docs/apis/storage) pour stocker des jetons, car celui-ci s’appuie respectivement sur [UserDefaults](https://developer.apple.com/documentation/foundation/userdefaults) et [SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences) sur iOS et Android. Les données stockées à l’aide
        de ces API ne sont pas chiffrées, ne sont pas sécurisées et peuvent aussi être synchronisées dans le nuage.
      </Info>

      <Note>
        ##### Point de contrôle

        Ajoutez le composant `Auth0Provider` de manière à englober votre composant `App`, puis
        exécutez votre application pour vérifier que le SDK s’initialise correctement et que votre application ne génère
        aucune erreur liée à Auth0.
      </Note>

      <AuthCodeGroup>
        <Index />

        <Loginbutton />

        <Logoutbutton />

        <App />

        <Userprofile />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Dans une application Capacitor, le [plugiciel Browser de Capacitor](https://capacitorjs.com/docs/apis/browser) effectue une redirection vers la [page Universal Login](https://auth0.com/universal-login) d’Auth0. Configurez le paramètre `openUrl`
      de la fonction `loginWithRedirect` pour utiliser `Browser.open` afin que l’URL soit
      ouverte à l’aide du composant de navigateur système de l’appareil ([SFSafariViewController](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller) sur iOS et [Chrome
      Custom Tabs](https://developer.chrome.com/docs/android/custom-tabs) sur Android).

      <Info>
        Par défaut, la méthode `loginWithRedirect` du SDK utilise `window.location.href` pour
        accéder à la page de connexion dans le navigateur par défaut de l’appareil de l’utilisateur plutôt que dans le
        composant de navigateur système approprié pour la plateforme. L’utilisateur quitterait votre application pour
        s’authentifier, ce qui pourrait entraîner une expérience utilisateur sous-optimale.
      </Info>

      <Note>
        ##### Point de contrôle

        La fonction `loginWithRedirect` indique au SDK d’amorcer le flux de connexion, en utilisant la
        fonction `Browser.open` pour ouvrir l’URL de connexion avec le composant de navigateur système de la
        plateforme en configurant le paramètre `openUrl`. Cela offre à vos utilisateurs un moyen de se connecter à votre
        application. Les utilisateurs sont redirigés vers la page de connexion chez Auth0 et ne rencontrent aucune erreur.
      </Note>

      <AuthCodeGroup>
        <Loginbutton />

        <Index />

        <Logoutbutton />

        <App />

        <Userprofile />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Une fois que les utilisateurs se sont connectés à l’aide de la page Universal Login, ils sont redirigés vers votre application au moyen d’une URL avec un schéma d’URL personnalisé. L’événement `appUrlOpen` doit être géré dans votre application. Vous pouvez appeler la méthode `handleRedirectCallback` de la Trousse de développement logiciel (SDK) Auth0 pour initialiser l’état d’authentification.

      Vous pouvez uniquement utiliser cette méthode lors d’une redirection depuis Auth0. Pour vérifier que l’opération a réussi, vérifiez la présence des paramètres `code` et `state` dans l’URL.

      La méthode `Browser.close()` doit fermer le navigateur lorsque cet événement est déclenché.

      <Info>
        Cet article part du principe que vous utiliserez des schémas d’URL personnalisés pour gérer le callback dans votre
        application. Pour ce faire, enregistrez votre `YOUR_PACKAGE_ID` comme schéma d’URL pour la plateforme de votre choix.
        Pour en savoir plus, consultez [Defining a Custom URL Scheme](https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app) pour iOS, ou [Create Deep Links to App Content](https://developer.android.com/training/app-links/deep-linking) pour Android.
      </Info>

      <Note>
        ##### Point de contrôle

        Ajoutez `appUrlOpen` au composant `App` de votre application et connectez-vous. La fenêtre du navigateur
        devrait se fermer une fois que l’utilisateur est authentifié et connecté à votre application.
      </Note>

      <AuthCodeGroup>
        <App />

        <Index />

        <Loginbutton />

        <Logoutbutton />

        <Userprofile />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Maintenant que les utilisateurs peuvent se connecter, vous devez configurer [un moyen de se déconnecter](https://auth0.com/docs/logout/guides/logout-auth0). Les utilisateurs doivent être redirigés vers le point de déconnexion Auth0 dans le navigateur pour effacer
      leur session de navigation. Encore une fois, le plugin Browser de Capacitor devrait effectuer cette redirection pour éviter que l’utilisateur ne
      quitte votre application et ne vive une expérience peu optimale.

      Pour y parvenir avec Ionic et Capacitor en conjonction avec le SDK Auth0 :

      * Créez l’URL de votre application qu’Auth0 doit utiliser pour rediriger après la déconnexion. Il s’agit d’une URL qui utilise votre
        schéma personnalisé enregistré et votre domaine Auth0. Ajoutez-la à votre configuration **URL de déconnexion autorisées** dans
        l’Auth0 Dashboard.
      * Effectuez la déconnexion à partir du SDK en appelant `logout`, et passez votre URL de redirection comme
        paramètre `logoutParams.returnTo`.
      * Définissez le paramètre `openUrl` sur une fonction de rappel qui utilise le plugin Browser de Capacitor pour ouvrir l’URL
        à l’aide de `Browser.open`.

      <Info>
        Comme pour l’étape de connexion, si vous ne définissez pas `openUrl` lorsque vous appelez `logout`, le
        SDK redirige l’utilisateur vers l’URL de déconnexion à l’aide de l’application de navigation par défaut sur l’appareil, ce qui
        offre une expérience utilisateur peu optimale.
      </Info>

      <Note>
        ##### Point de contrôle

        Offrez un moyen à vos utilisateurs de se déconnecter de votre application. Vérifiez que vous redirigez vers Auth0 puis
        vers l’adresse que vous avez spécifiée dans le paramètre `returnTo`. Vérifiez que vous n’êtes plus connecté
        à votre application.
      </Note>

      <AuthCodeGroup>
        <Logoutbutton />

        <Index />

        <Loginbutton />

        <App />

        <Userprofile />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8" isSingleColumn>
      La Trousse de développement logiciel (SDK) React Auth0 récupère le profil des utilisateurs
      connectés au sein de n’importe quel composant où vous en avez besoin, comme leur nom ou leur photo de profil, afin de
      personnaliser l’interface utilisateur. Les informations de profil sont accessibles via la propriété `user`
      exposée par le hook `useAuth0()`.

      L’initialisation du SDK est asynchrone, et vous devez gérer l’accès au profil utilisateur en vérifiant les
      propriétés `isLoading` et `user`. Une fois que `isLoading` est à `false` et que
      `user` a une valeur, vous pouvez utiliser le profil utilisateur.

      <Note>
        ##### Point de contrôle

        Offrez à vos utilisateurs un moyen de consulter les détails de leur profil dans l’application et vérifiez que vous pouvez
        récupérer et afficher vos informations de profil à l’écran une fois que vous vous êtes connecté.
      </Note>

      <AuthCodeGroup>
        <Userprofile />

        <Index />

        <Loginbutton />

        <Logoutbutton />

        <App />
      </AuthCodeGroup>
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Découvrez comment configurer et gérer votre locataire Auth0 et vos Applications
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez les intégrations que vous pouvez activer pour étendre les fonctionnalités offertes par Auth0
  </Content>
</Recipe>