---
title: "React Native"
permalink: "00-login"
---

import {AuthCodeBlock} from "/snippets/fr-CA/AuthCodeBlock.jsx";

<div id="by-steve-hobbs">
  ##### Par Steve Hobbs
</div>

Ce didacticiel montre comment ajouter une fonctionnalité de connexion pour les utilisateurs à une application React Native à l&#39;aide d&#39;Auth0. Nous vous recommandons de vous connecter pour suivre ce démarrage rapide avec des exemples configurés pour votre compte.

{/* <Card title="Afficher sur GitHub" href="https://github.com/auth0-samples/auth0-react-native-sample/tree/master/00-Login-Hooks" icon="github">
  Configuration système requise : React Native 0.62.2 | NodeJS 10.16
  </Card> */}

Ce Démarrage rapide porte sur le framework React Native. Pour intégrer Auth0 à votre application Expo, consultez le [Démarrage rapide Expo](https://auth0.com/docs/quickstart/native/react-native-expo/interactive).

<Info>
  **Nouveau dans Auth0?** Découvrez [comment Auth0 fonctionne](/docs/fr-CA/get-started/auth0-overview), comment il [s&#39;intègre aux applications natives](/docs/fr-CA/get-started/architecture-scenarios/mobile-api) et quel [protocole](/docs/fr-CA/get-started/authentication-and-authorization-flow/authorization-code-flow-with-pkce) il utilise.
</Info>

<div id="configure-auth0">
  ## Configurer Auth0
</div>

<div id="get-your-application-keys">
  ### Obtenez les clés de votre Application
</div>

Lorsque vous vous êtes inscrit à Auth0, une nouvelle Application a été créée pour vous, ou vous avez pu en créer une nouvelle. Vous aurez besoin de certaines informations concernant cette Application pour communiquer avec Auth0. Vous pouvez obtenir ces informations dans la section [Application Settings](https://manage.auth0.com/#/applications) de l&#39;Auth0 Dashboard.

<Frame>![App Dashboard](https://cdn2.auth0.com/docs/1.14550.0/media/articles/dashboard/client_settings.png)</Frame>

<Info>
  Lorsque vous utilisez la Default App avec une application native ou une application monopage, assurez-vous de mettre à jour **Token Endpoint Authentication Method** sur `None` et de définir **Application Type** sur `SPA` ou `Native`.
</Info>

Vous avez besoin des informations suivantes :

* **Domaine**
* **ID client**

<Info>
  Si vous téléchargez l&#39;exemple à partir du haut de cette page, ces informations sont déjà renseignées pour vous.
</Info>

<div id="install-dependencies">
  ## Installez les dépendances
</div>

Dans cette section, vous installerez le module React Native Auth0.

<Info>
  Veuillez consulter la [documentation officielle](https://facebook.github.io/react-native/) pour plus de détails sur React Native.
</Info>

<div id="yarn">
  ### Yarn
</div>

```bash lines
yarn add react-native-auth0
```

<Info>
  Pour en savoir plus sur Yarn, consultez sa [documentation officielle](https://yarnpkg.com/en/docs).
</Info>

<div id="npm">
  ### npm
</div>

```bash lines
npm install react-native-auth0 --save
```

<div id="additional-ios-step-install-the-module-pod">
  ### Étape iOS supplémentaire : installer le module Pod
</div>

Notre trousse de développement logiciel (SDK) nécessite une cible de déploiement iOS minimale de 13.0. Dans le fichier `ios/Podfile`` de votre projet, assurez-vous que la cible de plateforme est fixée à 13.0.

```bash lines
platform :ios '13.0'
```

CocoaPods est l’outil de gestion de paquets iOS que le framework React Native utilise pour s’installer dans votre projet. Pour que le module natif iOS fonctionne avec votre application iOS, commencez par installer la bibliothèque Pod. Si vous connaissez les anciennes versions du SDK (Trousse de développement logiciel) React Native, c’est similaire à l’ancienne étape *linking a native module* (liaison d’un module natif). Le processus est maintenant simplifié :

Accédez au dossier `ios` et exécutez `pod install`.

```bash lines
cd ios
pod install
```

Tout d&#39;abord, vous devez fournir à vos utilisateurs un moyen de se connecter. Nous vous recommandons d&#39;utiliser la [page de connexion](/docs/fr-CA/authenticate/login/auth0-universal-login) hébergée par Auth0.

<Frame>![Universal Login](https://cdn2.auth0.com/docs/1.14550.0/media/articles/native-platforms/ios-swift/login-ios.png)</Frame>

<div id="integrate-auth0-in-your-application">
  ## Intégrez Auth0 à votre application
</div>

<div id="configure-android">
  ### Configurer Android
</div>

Ouvrez le fichier `build.gradle` de votre application (généralement à `android/app/build.gradle`) et ajoutez les espaces réservés de manifeste (`manifest placeholders`) suivants. La valeur de `auth0Domain` doit contenir le domaine Auth0 défini dans les paramètres de votre Application Auth0 [comme configuré ci-dessus](#get-your-application-keys).

export const codeExample1 = `android {
    defaultConfig {
        // Ajoutez la ligne suivante
        manifestPlaceholders = [auth0Domain: "{yourDomain}", auth0Scheme: "\${applicationId}.auth0"]
    }
    ...
}`;

<AuthCodeBlock children={codeExample1} language="gradle" />

<Info>
  À l’exécution de l’application, la valeur de `applicationId` sera automatiquement mise à jour avec le nom du package ou l’ID de votre application (p. ex. `com.example.app`). Vous pouvez modifier cette valeur dans le fichier `build.gradle`. Vous pouvez aussi la vérifier en haut de votre fichier `AndroidManifest.xml`.
</Info>

<div id="configure-ios">
  ### Configurer iOS
</div>

<div id="appdelegate-setup-choose-based-on-architecture">
  #### Configuration d’AppDelegate (choisissez en fonction de l’architecture)
</div>

Si vous utilisez Swift (`ios/&lt;YOUR PROJECT&gt;/AppDelegat.swift`), ajoutez ce qui suit à la classe `AppDelegate` :

```js lines
func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey : Any] = [:]) -> Bool {
  return RCTLinkingManager.application(app, open: url, options: options)
}
```

Si vous utilisez Objective-C++ (`ios/&lt;YOUR PROJECT&gt;/AppDelegate.mm`), ajoutez ce qui suit :

```h lines
#import <React/RCTLinkingManager.h>

- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url
            options:(NSDictionary<UIApplicationOpenURLOptionsKey, id> *)options
{
  return [RCTLinkingManager application:app openURL:url options:options];
}
```

<Info>
  Ce fichier sera `ios/&lt;YOUR PROJECT&gt;/AppDelegate.m` pour les applications utilisant l’[ancienne architecture](https://reactnative.dev/docs/next/new-architecture-app-intro#ios---use-objective-c-mm-extension).
</Info>

Ensuite, ajoutez un schéma d’URL (URL scheme) en utilisant l’identifiant de bundle de votre application.

Dans le dossier `ios`, ouvrez `Info.plist` et repérez la valeur de `CFBundleIdentifier`

```xml lines
<key>CFBundleIdentifier</key>
<string>$(PRODUCT_BUNDLE_IDENTIFIER)</string>
```

Sous cette valeur, enregistrez une entrée de type URL en utilisant la valeur de `CFBundleIdentifier` comme valeur de `CFBundleURLSchemes`.

```xml lines
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleTypeRole</key>
        <string>None</string>
        <key>CFBundleURLName</key>
        <string>auth0</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>$(PRODUCT_BUNDLE_IDENTIFIER).auth0</string>
        </array>
    </dict>
</array>
```

<Info>
  Si votre application a été générée à l&#39;aide de React Native CLI, la valeur par défaut de `$(PRODUCT_BUNDLE_IDENTIFIER)` correspond dynamiquement à `org.reactjs.native.example.$(PRODUCT_NAME:rfc1034identifier)`. Pour l&#39;application d&#39;exemple, cette valeur correspond à `com.auth0samples`.
</Info>

Notez cette valeur, car vous l&#39;utiliserez pour définir les URL de rappel ci-dessous. Au besoin, vous pouvez la modifier à l&#39;aide de Xcode de la façon suivante :

* Ouvrez le fichier `ios/<YOUR PROJECT>.xcodeproj` ou exécutez `xed ios` dans un Terminal à partir de la racine de l&#39;application.
* Ouvrez l&#39;onglet Build Settings de votre projet ou de la cible souhaitée et trouvez la section qui contient « Bundle Identifier ».
* Remplacez la valeur « Bundle Identifier » par l&#39;identifiant de bundle souhaité pour votre application.

Pour plus d&#39;informations, consultez la [documentation React Native](https://facebook.github.io/react-native/docs/linking).

<div id="configure-callback-and-logout-urls">
  ### Configurer les URL de redirection et de déconnexion
</div>

Les URL de redirection et de déconnexion sont celles auxquelles Auth0 fait appel pour renvoyer vers votre application. Auth0 utilise l’URL de redirection après avoir authentifié l’utilisateur, et l’URL de déconnexion après avoir supprimé le témoin de session.

Si les URL de redirection et de déconnexion ne sont pas configurées, les utilisateurs ne pourront pas se connecter ni se déconnecter de l’application et recevront une erreur.

Accédez à la page des paramètres de votre [application Auth0](https://manage.auth0.com/#/applications/\{yourClientId}/settings) et ajoutez l’URL correspondante dans **URL de redirection autorisées** et **URL de déconnexion autorisées**, en fonction de la plateforme de votre application. Si vous utilisez un [domaine personnalisé](/docs/fr-CA/customize/custom-domains), utilisez la valeur de votre domaine personnalisé plutôt que le domaine Auth0 indiqué sur la page des paramètres.

<div id="ios">
  #### iOS
</div>

```
BUNDLE_IDENTIFIER.auth0://{yourDomain}/ios/BUNDLE_IDENTIFIER/callback
```

<div id="android">
  #### Android
</div>

```
PACKAGE_NAME.auth0://{yourDomain}/android/PACKAGE_NAME/callback
```

<Info>
  Si vous suivez notre projet d&#39;exemple, configurez ce qui suit :

  * pour iOS - `com.auth0samples.auth0://{yourDomain}/ios/com.auth0samples/callback`
  * pour Android - `com.auth0samples.auth0://{yourDomain}/android/com.auth0samples/callback`
</Info>

<div id="add-login-to-your-app">
  ## Ajoutez la fonction de connexion à votre application
</div>

Importez le hook `useAuth0` et le composant `Auth0Provider` depuis le package `react-native-auth0`.

```js lines
import {useAuth0, Auth0Provider} from 'react-native-auth0';
```

Ensuite, entourez votre application du composant `Auth0Provider`, en fournissant vos valeurs de domaine Auth0 et d’ID client :

export const codeExample2 = `const App = () => {
  return (
    <Auth0Provider domain={"{yourDomain}"} clientId={"{yourClientId}"}>
      {/* votre application */}
    </Auth0Provider>
  );
};`;

<AuthCodeBlock children={codeExample2} language="javascript" />

Enfin, affichez l&#39;écran de connexion hébergé en utilisant la méthode `authorize` du hook `useAuth0`. Consultez cet exemple d&#39;utilisation qui montre comment effectuer la connexion lors d&#39;un clic sur un bouton :

```javascript lines
const LoginButton = () => {
    const {authorize} = useAuth0();

    const onPress = async () => {
        try {
            await authorize();
        } catch (e) {
            console.log(e);
        }
    };

    return <Button onPress={onPress} title="Se connecter" />
}
```

<Note>
  ### Point de contrôle

  Ajoutez un composant de bouton qui appelle `authorize` lorsqu’on clique dessus. Vérifiez que vous êtes redirigé vers la page de connexion, puis de retour vers votre application.
</Note>

<div id="add-logout-to-your-app">
  ## Ajouter la déconnexion à votre application
</div>

Pour déconnecter l’utilisateur, redirigez‑le vers le point de terminaison de déconnexion d’Auth0 en important et en appelant la méthode `clearSession` du hook `useAuth0`. Cette méthode supprime sa session du serveur d’autorisation.

Voici un exemple d’utilisation d’un bouton qui déconnecte l’utilisateur de l’application lorsqu’on clique dessus :

```javascript lines
const LogoutButton = () => {
    const {clearSession} = useAuth0();

    const onPress = async () => {
        try {
            await clearSession();
        } catch (e) {
            console.log(e);
        }
    };

    return <Button onPress={onPress} title="Se déconnecter" />
}
```

<Note>
  ### Point de contrôle

  Ajoutez un bouton qui appelle `clearSession` au clic. Vérifiez que vous êtes bien déconnecté de l&#39;application après avoir cliqué.
</Note>

<div id="show-user-profile-information">
  ## Afficher le profil de l&#39;utilisateur
</div>

Le hook `useAuth0` expose un objet `user` qui contient des renseignements sur l&#39;utilisateur authentifié. Il permet d&#39;accéder aux renseignements de profil décodés de l&#39;utilisateur authentifié à partir du [jeton ID](https://auth0.com/docs/secure/tokens/id-tokens).

Si un utilisateur n&#39;a pas été authentifié, cette propriété sera `null`.

```javascript lines
const Profile = () => {
    const {user} = useAuth0();

    return (
        <>
            {user && <Text>Connecté en tant que {user.name}</Text>}
            {!user && <Text>Non connecté</Text>}
        </>
    )
}
```

<Info>
  ##### Que faire ensuite ?

  <table>
    <tr>
      <td><a href="/docs/fr-CA/authenticate/identity-providers">Configurer d&#39;autres fournisseurs d&#39;identité</a></td>
      <td><a href="/docs/fr-CA/secure/multi-factor-authentication">Activer l&#39;authentification multifacteur</a></td>
    </tr>

    <tr>
      <td><a href="/docs/fr-CA/secure/attack-protection">En savoir plus sur la protection contre les attaques</a></td>
      <td><a href="/docs/fr-CA/customize/rules">En savoir plus sur Rules</a></td>
    </tr>
  </table>

  [Modifier sur GitHub](https://github.com/auth0/docs/edit/master/articles/quickstart/backend/aspnet-core-webapi/01-authorization.md)
</Info>

***
