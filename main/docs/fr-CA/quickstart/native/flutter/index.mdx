---
title: "Flutter"
permalink: "01-login"
---

import {AuthCodeBlock} from "/snippets/fr-CA/AuthCodeBlock.jsx";

<div id="by-steve-hobbs">
  ##### Par Steve Hobbs
</div>

Ce didacticiel montre comment ajouter la connexion des utilisateurs avec Auth0 à une application Flutter pour Android, iOS ou macOS en utilisant la Trousse de développement logiciel (SDK) Auth0 Flutter. Nous vous recommandons de vous connecter pour suivre ce démarrage rapide avec des exemples configurés pour votre compte.

{/* <Card title="Afficher sur GitHub" href="https://github.com/auth0-samples/auth0-flutter-samples/tree/main/sample" icon="github">
  Configuration système requise : Flutter 3+ | Android API 21+ et Android Studio 4+ (pour Android) | iOS 13+ et Xcode 14+ (pour iOS) | macOS 11+ et Xcode 14+ (pour macOS)
  </Card> */}

<div id="add-login-to-your-flutter-app">
  # Ajouter la connexion à votre application Flutter
</div>

Auth0 vous permet d’ajouter rapidement l’authentification et d’accéder aux renseignements de profil de l’utilisateur dans votre application. Ce guide montre comment intégrer Auth0 à une application Flutter à l’aide de la [Trousse de développement logiciel (SDK) Flutter d’Auth0](https://github.com/auth0/auth0-flutter).

<Info>
  La trousse de développement logiciel (SDK) Flutter d’Auth0 ne prend actuellement en charge que les applications Flutter pour Android, iOS et macOS.
</Info>

<div id="getting-started">
  ## Pour commencer
</div>

Ce démarrage rapide suppose que vous avez déjà une application [Flutter](https://flutter.dev/) fonctionnelle. Sinon, consultez les [guides de prise en main de Flutter](https://docs.flutter.dev/get-started/install) pour créer une application simple.

Vous devriez également bien connaître l’[outil en ligne de commande Flutter](https://docs.flutter.dev/reference/flutter-cli).

Enfin, vous aurez besoin d’une Application Auth0 **Native**. Si vous n’avez pas déjà une Application Auth0 Native, [créez-en une](/docs/fr-CA/get-started/auth0-overview/create-applications/native-apps) avant de continuer. Évitez d’utiliser d’autres types d’Application, car ils ont des configurations différentes et peuvent provoquer des erreurs.

<div id="configure-the-callback-and-logout-urls">
  ### Configurer les URL de redirection et de déconnexion
</div>

Les URL de redirection et de déconnexion sont les URL qu’Auth0 utilise pour revenir à votre app. Auth0 utilise l’URL de redirection après l’authentification de l’utilisateur et l’URL de déconnexion après avoir supprimé le cookie de session.

Si les URL de redirection et de déconnexion ne sont pas définies, les utilisateurs ne pourront pas ouvrir et fermer une session dans l’app et recevront un message d’erreur.

Accédez à la [page des paramètres](https://manage.auth0.com/#/applications/\{yourClientId}/settings) de votre application Auth0 et ajoutez les URL suivantes aux **URL de redirection autorisées** et **URL de déconnexion autorisées**, selon la plateforme de votre app. Si vous avez un [domaine personnalisé](/docs/fr-CA/customize/custom-domains), utilisez-le plutôt que le domaine Auth0 qui figure sur la page des paramètres.

<Info>
  Sur Android, la valeur de l’espace réservé `SCHEME` peut être `https` ou un autre schéma personnalisé. Dans la mesure du possible, Auth0 recommande d’utiliser les [Android App Links](https://auth0.com/docs/applications/enable-android-app-links) avec `https` comme moyen sécuritaire de créer un lien direct vers du contenu dans votre app. Les schémas d’URL personnalisés peuvent être vulnérables aux [attaques d’usurpation de client](https://datatracker.ietf.org/doc/html/rfc8252#section-8.6).

  Sur iOS 17.4+ et macOS 14.4+, il est possible d’utiliser les Universal Links (schéma `https`) comme URL de redirection et de déconnexion. Lorsque cette option est activée, le SDK revient à l’utilisation d’un schéma d’URL personnalisé sur les anciennes versions d’iOS et de macOS – l’[identifiant de bundle](https://developer.apple.com/documentation/appstoreconnectapi/bundle_ids) de votre app.

  Dans la mesure du possible, Auth0 recommande d’utiliser les Universal Links comme moyen sécuritaire de créer un lien direct vers du contenu dans votre app iOS. Les schémas d’URL personnalisés peuvent être vulnérables aux [attaques d’usurpation de client](https://datatracker.ietf.org/doc/html/rfc8252#section-8.6).

  **Cette fonctionnalité requiert Xcode 15.3+ et un compte Apple Developer payant**.
</Info>

<div id="android">
  #### Android
</div>

```
SCHEME://{yourDomain}/android/YOUR_PACKAGE_NAME/callback
```

<div id="ios">
  #### iOS
</div>

```
https://{yourDomain}/ios/YOUR_BUNDLE_IDENTIFIER/callback,
YOUR_BUNDLE_IDENTIFIER://{yourDomain}/ios/YOUR_BUNDLE_IDENTIFIER/callback
```

<div id="macos">
  #### macOS
</div>

```
https://{yourDomain}/macos/YOUR_BUNDLE_IDENTIFIER/callback,
YOUR_BUNDLE_IDENTIFIER://{yourDomain}/macos/YOUR_BUNDLE_IDENTIFIER/callback
```

Par exemple, si l’identifiant de bundle iOS était `com.example.MyApp` et que votre domaine Auth0 était `example.us.auth0.com`, alors cette valeur serait :

```
https://example.us.auth0.com/ios/com.example.MyApp/callback,
com.example.MyApp://example.us.auth0.com/ios/com.example.MyApp/callback
```

<div id="install-the-auth0-flutter-sdk">
  ## Installer la trousse de développement logiciel (SDK) Auth0 pour Flutter
</div>

Ajoutez la trousse de développement logiciel (SDK) Auth0 pour Flutter à votre projet :

```
flutter pub add auth0_flutter
```

<div id="configure-android">
  ## Configurer Android
</div>

Si vous ne développez pas pour la plateforme Android, passez cette étape.

La Trousse de développement logiciel (SDK) nécessite des espaces réservés dans le manifeste. Auth0 utilise ces espaces réservés en interne pour définir un `intent-filter`, qui intercepte l’URL de rappel d’authentification. Vous devez définir le domaine du tenant Auth0 et le schéma de l’URL de rappel.

Modifiez `app/build.gradle` afin d’ajouter des espaces réservés de manifeste pour `auth0Domain` et `auth0Scheme` dans la section `defaultConfig` :

export const codeExample1 = `apply plugin: 'com.android.application'

android {
    defaultConfig {
        applicationId "com.auth0.samples"
        minSdkVersion 21
        targetSdkVersion flutter.targetSdkVersion
        // ...

        // ---> Ajoutez la ligne suivante
        manifestPlaceholders += [auth0Domain: "{yourDomain}", auth0Scheme: "https"]
        // <---
    }
}`;

<AuthCodeBlock children={codeExample1} language="dart" />

* `auth0Domain` : Le domaine de votre tenant Auth0. En général, vous le trouverez dans l’Auth0 Dashboard, sous **Application Settings**, dans le champ Domain. Si vous utilisez un domaine personnalisé, vous devez plutôt définir cette valeur avec celle de votre Domaine personnalisé.
* `auth0Scheme` : Le schéma à utiliser. Il peut s’agir d’un schéma personnalisé ou de `https` si vous voulez utiliser [Android App Links](https://auth0.com/docs/applications/enable-android-app-links). Pour en savoir plus sur la configuration de cette valeur, consultez le fichier README de la [Trousse de développement logiciel (SDK) Auth0.Android](https://github.com/auth0/Auth0.Android#a-note-about-app-deep-linking).

<Info>
  Vous n’avez pas besoin de déclarer un `intent-filter` spécifique pour votre activité, car vous avez défini les manifest placeholders avec les valeurs Auth0 **Domain** et **Scheme**. La bibliothèque gère la redirection pour vous.
</Info>

Exécutez **Sync Project with Gradle Files** dans Android Studio pour appliquer vos modifications.

<div id="configure-iosmacos">
  ## Configurer iOS/macOS
</div>

Si vous ne développez pas pour les plateformes iOS ou macOS, ignorez cette étape.

<Warning>
  Cette étape nécessite un compte Apple Developer payant. Vous en avez besoin pour utiliser les Universal Links comme URL de rappel et de déconnexion. Ignorez cette étape pour utiliser plutôt un schéma d’URL personnalisé.
</Warning>

<div id="configure-the-team-id-and-bundle-identifier">
  #### Configurer le Team ID et l’identifiant de bundle
</div>

Accédez à la [page des paramètres](https://manage.auth0.com/#/applications/\{yourClientId}/settings) de votre application Auth0, faites défiler jusqu’au bas de la page, puis ouvrez **Advanced Settings &gt; Device Settings**. Dans la section **iOS**, définissez **Team ID** sur votre [Apple Team ID](https://developer.apple.com/help/account/manage-your-team/locate-your-team-id/), et **App ID** sur l’identifiant de bundle de votre application.

<Frame>![Capture d’écran de la section iOS dans la page des paramètres de l’application Auth0](https://cdn2.auth0.com/docs/1.14550.0/media/articles/native-platforms/ios-swift/ios-device-settings.png)</Frame>

Cette opération ajoutera votre application au fichier `apple-app-site-association` de votre tenant Auth0.

<div id="add-the-associated-domain-capability">
  #### Ajouter la fonctionnalité de domaines associés
</div>

Ouvrez votre application dans Xcode en exécutant `open ios/Runner.xcworkspace` (ou `open macos/Runner.xcworkspace` pour macOS). Accédez à l’onglet **Signing and Capabilities** [tab](https://developer.apple.com/documentation/xcode/adding-capabilities-to-your-app#Add-a-capability) des paramètres de la cible **Runner**, puis cliquez sur le bouton **+ Capability**. Sélectionnez ensuite **Associated Domains**.

<Frame>![Capture d’écran de la bibliothèque de capacités dans Xcode](https://cdn2.auth0.com/docs/1.14550.0/media/articles/native-platforms/ios-swift/ios-xcode-capabilities.png)</Frame>

Ajoutez ensuite l’[entrée](https://developer.apple.com/documentation/xcode/configuring-an-associated-domain#Define-a-service-and-its-associated-domain) suivante sous **Associated Domains** :

export const codeExample2 = `webcredentials:{yourDomain}`;

<AuthCodeBlock children={codeExample2} language="dart" />

Si vous avez un [domaine personnalisé](/docs/fr-CA/customize/custom-domains), utilisez-le plutôt que le domaine Auth0 de la page des paramètres.

<Info>
  Pour que le domaine associé fonctionne, votre application doit être signée avec le certificat de votre équipe **même lors de la compilation pour le simulateur iOS**. Assurez-vous d’utiliser l’équipe Apple dont le Team ID est configuré dans la page des paramètres de votre application Auth0.
</Info>

<div id="add-login-to-your-app">
  ## Ajouter la connexion à votre application
</div>

[Universal Login](https://auth0.com/docs/authenticate/login/auth0-universal-login) est la façon la plus simple de configurer l’authentification dans votre application. Nous vous recommandons de l’utiliser pour offrir la meilleure expérience, la meilleure sécurité et la gamme de fonctionnalités la plus complète.

Intégrez Auth0 Universal Login dans votre application Flutter en important la Trousse de développement logiciel (SDK) et en instanciant la classe `Auth0` à l’aide de votre domaine Auth0 et de la valeur de votre ID client. Consultez cet exemple, qui instancie la classe à l’intérieur d’un objet d’état de widget :

export const codeExample3 = `import 'package:auth0_flutter/auth0_flutter.dart';

class MainView extends StatefulWidget {
  const MainView({Key? key}) : super(key: key);

  @override
  State<MainView> createState() => _MainViewState();
}

class _MainViewState extends State<MainView> {
  Credentials? _credentials;

  late Auth0 auth0;

  @override
  void initState() {
    super.initState();
    auth0 = Auth0('{yourDomain}', '{yourClientId}');
  }

  @override
  Widget build(BuildContext context) {
    // ...
  }
}`;

<AuthCodeBlock children={codeExample3} language="dart" />

Ensuite, redirigez vos utilisateurs vers la page Auth0 Universal Login à l’aide de `webAuthentication().login()`. Il s’agit d’un `Future` et vous devez l’attendre (`await`) pour pouvoir récupérer les jetons de l’utilisateur. Voici un exemple de widget `ElevatedButton` qui connecte l’utilisateur lorsqu’on clique dessus. Notez que `_credentials` est utilisé pour déterminer localement dans votre application si un utilisateur est connecté ou non :

```dart lines
if (_credentials == null) {
  ElevatedButton(
    onPressed: () async {
      // Utiliser une URL de rappel de lien universel sur iOS 17.4+ / macOS 14.4+
      // useHTTPS est ignoré sur Android
      final credentials =
          await auth0.webAuthentication().login(useHTTPS: true);

      setState(() {
        _credentials = credentials;
      });
    },
    child: const Text("Connexion")
  )
}
```

**Android** : si vous utilisez un schéma personnalisé, passez ce schéma à la méthode de connexion afin que la Trousse de développement logiciel (SDK) puisse rediriger correctement vers la page de connexion, puis de nouveau vers l&#39;application :

```dart lines
await auth0.webAuthentication(scheme: 'VOTRE SCHÉMA PERSONNALISÉ').login();
```

Lorsqu’un utilisateur se connecte, il est redirigé vers votre application. Vous pouvez ensuite accéder aux jetons ID et aux jetons d’accès pour cet utilisateur.

<Note>
  ##### Point de contrôle

  Ajoutez un bouton à votre application qui appelle `webAuthentication().login()` et connecte l’utilisateur à votre application. Vérifiez que vous êtes redirigé vers Auth0 pour l’authentification, puis de retour vers votre application.

  Vérifiez que vous pouvez accéder aux jetons renvoyés par l’appel à `login`.
</Note>

<div id="add-logout-to-your-app">
  ## Ajouter la déconnexion à votre application
</div>

Pour déconnecter des utilisateurs, redirigez-les vers le endpoint de déconnexion d’Auth0 pour effacer leur session de connexion en appelant la Trousse de développement logiciel (SDK) Auth0 Flutter `webAuthentication().logout()`. [En savoir plus sur la déconnexion avec Auth0](https://auth0.com/docs/authenticate/login/logout).

Voici un exemple de widget `ElevatedButton` qui déconnecte l’utilisateur de l’application. Notez que `_credentials` est défini sur `null`, ce qui indique que l’utilisateur n’est plus connecté à votre application :

```dart lines
ElevatedButton(
  onPressed: () async {
    // Utilise une URL de déconnexion Universal Link sur iOS 17.4+ / macOS 14.4+
    // useHTTPS est ignoré sur Android
    await auth0.webAuthentication().logout(useHTTPS: true);

    setState(() {
      _credentials = null;
    });
  },
  child: const Text("Se déconnecter"))
```

**Android** : si vous utilisez un schéma d’URI personnalisé, passez ce schéma en paramètre à la méthode `logout` pour que la trousse de développement logiciel (SDK) puisse rediriger correctement vers votre application :

```dart lines
await auth0.webAuthentication(scheme: 'YOUR CUSTOM SCHEME').logout();
```

<Note>
  ##### Point de contrôle

  Ajoutez un bouton à votre application qui appelle `webAuthentication().logout()` pour déconnecter l’utilisateur de votre application. Lorsque vous sélectionnez ce bouton, vérifiez que votre application Flutter vous redirige vers le point de terminaison de déconnexion, puis de nouveau vers l’application. Vous ne devriez plus être connecté à votre application.
</Note>

<div id="show-user-profile-information">
  ## Afficher les informations de profil de l&#39;utilisateur
</div>

Les informations de profil de l&#39;utilisateur sont automatiquement récupérées pour vous lorsque vous appelez `webAuthentication().login()`. L&#39;objet renvoyé à l&#39;étape de connexion contient une propriété `user` avec toutes les propriétés du profil de l&#39;utilisateur, qui sont remplies en décodant le jeton ID.

Voici un exemple de composant `View` qui affiche le profil de l&#39;utilisateur à l&#39;écran :

```dart lines
import 'package:auth0_flutter/auth0_flutter.dart';
import 'package:flutter/material.dart';

class ProfileView extends StatelessWidget {
  const ProfileView({Key? key, required this.user}) : super(key: key);

  final UserProfile user;

  @override
  Widget build(BuildContext context) {
    return Column(
      mainAxisAlignment: MainAxisAlignment.center,
      children: [
        if (user.name != null) Text(user.name!),
        if (user.email != null) Text(user.email!)
      ],
    );
  }
}
```

<Note>
  ##### Point de contrôle

  Connectez-vous et examinez la propriété `user` du résultat. Vérifiez les renseignements du profil de l&#39;utilisateur actuel, comme `email` ou `name`.
</Note>

<Info>
  ##### Que pouvez-vous faire ensuite?

  <table>
    <tr>
      <td><a href="/docs/fr-CA/authenticate/identity-providers">Configurer d&#39;autres fournisseurs d&#39;identité</a></td>
      <td><a href="/docs/fr-CA/secure/multi-factor-authentication">Activer l&#39;authentification multifacteur</a></td>
    </tr>

    <tr>
      <td><a href="/docs/fr-CA/secure/attack-protection">En savoir plus sur la protection contre les attaques</a></td>
      <td><a href="/docs/fr-CA/customize/rules">En savoir plus sur Rules</a></td>
    </tr>
  </table>

  [Modifier sur GitHub](https://github.com/auth0/docs/edit/master/articles/quickstart/native/flutter/01-login.md)
</Info>

***
