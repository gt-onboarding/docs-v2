---
title: "Expo"
permalink: "00-login"
---

import {AuthCodeBlock} from "/snippets/fr-CA/AuthCodeBlock.jsx";

<div id="by-poovamraj-thanganadar-thiagarajan">
  ##### Par Poovamraj Thanganadar Thiagarajan
</div>

Ce tutoriel montre comment ajouter une fonctionnalité de connexion utilisateur à une application Expo à l&#39;aide d&#39;Auth0. Nous vous recommandons de vous connecter afin de suivre ce Démarrage rapide avec des exemples configurés pour votre compte.

{/* <Card title="Voir sur GitHub" href="https://github.com/auth0-samples/auth0-react-native-sample/tree/master/00-Login-Expo" icon="github">
  Configuration requise : React Native 0.62.2 | NodeJS 10.16 | Expo SDK 41
  </Card> */}

Ce Démarrage rapide s’adresse au framework Expo. Pour intégrer Auth0 à votre application React Native, consultez le [Démarrage rapide React Native](https://auth0.com/docs/quickstart/native/react-native/interactive).

<Warning>
  Cette trousse de développement logiciel (SDK) n&#39;est pas compatible avec l’application &quot;Expo Go&quot;. Elle est compatible uniquement avec Custom Dev Client et les builds EAS.
</Warning>

<Info>
  **Vous débutez avec l’authentification?** Apprenez [comment Auth0 fonctionne](/docs/fr-CA/get-started/auth0-overview), comment il [s’intègre aux applications natives](/docs/fr-CA/get-started/architecture-scenarios/mobile-api) et quel [protocole](/docs/fr-CA/get-started/authentication-and-authorization-flow/authorization-code-flow-with-pkce) il utilise.
</Info>

<div id="configure-auth0">
  ## Configurer Auth0
</div>

<div id="get-your-application-keys">
  ### Obtenir les clés de votre Application
</div>

Lorsque vous vous êtes inscrit à Auth0, une nouvelle Application a été créée pour vous, ou vous en avez peut‑être créé une vous‑même. Vous aurez besoin de certaines informations concernant cette Application pour communiquer avec Auth0. Vous pouvez obtenir ces informations dans la section [Application Settings](https://manage.auth0.com/#/applications) d’Auth0 Dashboard.

<Frame>![Tableau de bord de l’Application](https://cdn2.auth0.com/docs/1.14550.0/media/articles/dashboard/client_settings.png)</Frame>

<Info>
  Lorsque vous utilisez l’Application par défaut avec une Application native ou une application monopage, assurez-vous de définir **Token Endpoint Authentication Method** sur `None` et de définir **Application Type** sur `SPA` ou `Native`.
</Info>

Vous avez besoin des informations suivantes :

* **Domain**
* **Client ID**

<Info>
  Si vous téléchargez l’exemple en haut de cette page, ces informations sont déjà renseignées pour vous.
</Info>

<div id="install-dependencies">
  ## Installer les dépendances
</div>

Comment installer le module Auth0 pour React Native.

<Info>
  Veuillez consulter la [documentation officielle](https://docs.expo.dev/) pour plus de détails sur Expo.
</Info>

<div id="yarn">
  ### Yarn
</div>

```bash lines
yarn add react-native-auth0
```

<Info>
  Pour en savoir plus sur Yarn, consultez [leur documentation officielle](https://yarnpkg.com/en/docs).
</Info>

<div id="npm">
  ### npm
</div>

```bash lines
npm install react-native-auth0 --save
```

La première étape pour ajouter l’authentification à votre application consiste à permettre à vos utilisateurs de se connecter. La méthode la plus rapide, la plus sécurisée et la plus riche en fonctionnalités pour ce faire avec Auth0 est d’utiliser la [page de connexion](/docs/fr-CA/authenticate/login/auth0-universal-login) hébergée.

<Frame>![Universal Login](https://cdn2.auth0.com/docs/1.14550.0/media/articles/native-platforms/ios-swift/login-ios.png)</Frame>

<div id="integrate-auth0-in-your-application">
  ## Intégrer Auth0 à votre application
</div>

<div id="setup-auth0-config-plugin">
  ### Configurer le plugin de configuration Auth0
</div>

Le package Auth0 exécute du code natif personnalisé qui doit être configuré au moment du build. Nous allons utiliser [Expo Config Plugin](https://docs.expo.dev/guides/config-plugins/) pour ce faire.

Ajoutez le plugin `react-native-auth0` au fichier de [configuration Expo](https://docs.expo.dev/workflow/configuration/) `app.json` ou `app.config.js`.

export const codeExample1 = `{ 
  "expo": {
    ...
    "plugins": [
      [
        "react-native-auth0",
        {
          "domain": "{yourDomain}"
        }
      ]
    ]
  }
}`;

<AuthCodeBlock children={codeExample1} language="json" />

<div id="generate-native-source-code">
  ### Générer le code natif
</div>

Vous devez générer le code natif pour que la configuration ci-dessus prenne effet. Pour ce faire, exécutez la commande suivante :

```bash lines
expo prebuild
```

Vous serez invité à fournir le [package Android](https://github.com/expo/fyi/blob/main/android-package.md) et l’[identifiant de bundle iOS](https://github.com/expo/fyi/blob/main/bundle-identifier.md) s’ils ne sont pas déjà présents dans la configuration d’Expo :

```
? What would you like your Android package name to be? > com.auth0samples # ou le nom de package souhaité

? What would you like your iOS bundle identifier to be? > com.auth0samples # ou l'identifiant de bundle souhaité
```

Ces valeurs se trouvent dans le fichier de configuration d&#39;Expo, `app.json` ou `app.config.js`. Elles seront utilisées pour les URL de rappel et de déconnexion :

```json lines
{
    ...
    "android": {
      "package": "YOUR_ANDROID_PACKAGE_NAME_IS_FOUND_HERE"
    },
    "ios": {
      "bundleIdentifier": "YOUR_IOS_BUNDLE_IDENTIFIER_IS_FOUND_HERE"
    }
  }
}
```

<div id="configure-callback-and-logout-urls">
  ### Configurer les URL de redirection et de déconnexion
</div>

Les URL de redirection et de déconnexion sont les URL qu’Auth0 utilise pour rediriger vers votre application. Auth0 utilise l’URL de redirection après avoir authentifié l’utilisateur et l’URL de déconnexion après avoir supprimé le témoin de session.

Si les URL de redirection et de déconnexion ne sont pas configurées, les utilisateurs ne pourront pas ouvrir ni fermer une session dans l’application et recevront une erreur.

Accédez à la page des paramètres de votre [application Auth0](https://manage.auth0.com/#/applications/\{yourClientId}/settings) et ajoutez l’URL correspondante aux **URL de redirection autorisées** et aux **URL de déconnexion autorisées**, selon la plateforme de votre application. Si vous utilisez un [domaine personnalisé](/docs/fr-CA/customize/custom-domains), utilisez la valeur de votre domaine personnalisé plutôt que le domaine Auth0 indiqué sur la page des paramètres.

<div id="ios">
  #### iOS
</div>

```
BUNDLE_IDENTIFIER.auth0://{yourDomain}/ios/BUNDLE_IDENTIFIER/callback
```

<div id="android">
  #### Android
</div>

```
PACKAGE_NAME.auth0://{yourDomain}/android/PACKAGE_NAME/callback
```

<Info>
  Si vous suivez notre projet d&#39;exemple, utilisez la valeur suivante :

  * pour iOS - `com.auth0samples.auth0://{yourDomain}/ios/com.auth0samples/callback`
  * pour Android - `com.auth0samples.auth0://{yourDomain}/android/com.auth0samples/callback`
</Info>

<div id="add-login-to-your-app">
  ## Ajouter la connexion à votre application
</div>

Tout d’abord, importez le hook `useAuth0` et le composant `Auth0Provider` depuis le package `react-native-auth0`.

```js lines
import {useAuth0, Auth0Provider} from 'react-native-auth0';
```

Ensuite, encapsulez votre application dans le composant `Auth0Provider` et fournissez votre Domaine Auth0 et votre ID client :

export const codeExample2 = `const App = () => {
  return (
    <Auth0Provider domain={"{yourDomain}"} clientId={"{yourClientId}"}>
      {/* votre application */}
    </Auth0Provider>
  );
};`;

<AuthCodeBlock children={codeExample2} language="javascript" />

Enfin, affichez l&#39;écran de connexion hébergé en utilisant la méthode `authorize` du hook `useAuth0`. Consultez cet exemple d&#39;utilisation qui montre comment effectuer une connexion lorsqu&#39;un utilisateur clique sur un bouton :

```javascript lines
const LoginButton = () => {
    const {authorize} = useAuth0();

    const onPress = async () => {
        try {
            await authorize();
        } catch (e) {
            console.log(e);
        }
    };

    return <Button onPress={onPress} title="Se connecter" />
}
```

<Note>
  ### Point de contrôle

  Ajoutez un composant de bouton qui appelle `authorize` lorsqu’on clique dessus. Vérifiez que vous êtes redirigé vers la page de connexion, puis de retour vers votre application.
</Note>

<div id="add-logout-to-your-app">
  ## Ajouter la déconnexion à votre application
</div>

Pour déconnecter l’utilisateur, redirigez-le vers le point de terminaison de déconnexion d’Auth0 en important et en appelant la méthode `clearSession` du hook `useAuth0`. Cela supprimera sa session du Serveur d’autorisation.

Voici un exemple d’utilisation d’un bouton qui déconnecte l’utilisateur de l’application lorsqu’on clique dessus :

```javascript lines
const LogoutButton = () => {
    const {clearSession} = useAuth0();

    const onPress = async () => {
        try {
            await clearSession();
        } catch (e) {
            console.log(e);
        }
    };

    return <Button onPress={onPress} title="Se déconnecter" />
}
```

<Note>
  ### Point de contrôle

  Ajoutez un bouton qui appelle `clearSession` au clic. Vérifiez que vous êtes déconnecté de l&#39;application lorsque vous cliquez dessus.
</Note>

<div id="show-user-profile-information">
  ## Afficher les informations de profil de l&#39;utilisateur
</div>

Le hook `useAuth0` expose un objet `user` qui contient des informations sur l&#39;utilisateur authentifié. Vous pouvez utiliser cet objet pour accéder aux informations de profil de l&#39;utilisateur authentifié qui ont été décodées à partir du [jeton ID](https://auth0.com/docs/secure/tokens/id-tokens).

Si aucun utilisateur n&#39;a été authentifié, cette propriété aura la valeur `null`.

```javascript lines
const Profile = () => {
    const {user, error} = useAuth0();

    return (
        <>
            {user && <Text>Connecté en tant que {user.name}</Text>}
            {!user && <Text>Non connecté</Text>}
            {error && <Text>{error.message}</Text>}
        </>
    )
}
```

<Note>
  ### Point de contrôle

  Ajoutez à votre application un composant qui utilise la prop `user` pour afficher les informations de l&#39;utilisateur à l&#39;écran.
</Note>

<Info>
  ##### Que pouvez-vous faire ensuite ?

  <table>
    <tr>
      <td><a href="/docs/fr-CA/authenticate/identity-providers">Configurer d&#39;autres fournisseurs d&#39;identité</a></td>
      <td><a href="/docs/fr-CA/secure/multi-factor-authentication">Activer l&#39;authentification multifacteur</a></td>
    </tr>

    <tr>
      <td><a href="/docs/fr-CA/secure/attack-protection">En savoir plus sur la protection contre les attaques</a></td>
      <td><a href="/docs/fr-CA/customize/rules">En savoir plus sur les Rules</a></td>
    </tr>
  </table>

  [Modifier sur GitHub](https://github.com/auth0/docs/edit/master/articles/quickstart/backend/aspnet-core-webapi/01-authorization.md)
</Info>

***
