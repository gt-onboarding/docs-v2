---
title: Ajouter une connexion à votre application Ionic Vue avec Capacitor
sidebarTitle: Ionic et Capacitor (Vue)

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";
import Main from "/snippets/fr-CA/quickstart/native/ionic-vue/main.ts.mdx";
import Loginbutton from "/snippets/fr-CA/quickstart/native/ionic-vue/LoginButton.vue.mdx";
import Logoutbutton from "/snippets/fr-CA/quickstart/native/ionic-vue/LogoutButton.vue.mdx";
import Userprofile from "/snippets/fr-CA/quickstart/native/ionic-vue/UserProfile.vue.mdx";

import {AuthCodeGroup} from "/snippets/fr-CA/AuthCodeGroup.jsx";

export const sections = [
      { id: "getting-started", title: "Prise en main" },
      { id: "configure-auth0", title: "Configurer Auth0" },
      { id: "install-the-auth0-vue-sdk", title: "Installer la trousse de développement logiciel (SDK) Auth0 Vue" },
      { id: "configure-the-createauht0-plugin", title: "Configurer le plugiciel CreateAuht0" },
      { id: "add-login-to-your-application", title: "Ajouter la fonctionnalité de connexion à votre application" },
      { id: "handle-the-login-callback", title: "Gérer le callback de connexion" },
      { id: "add-logout-to-your-application", title: "Ajouter la fonctionnalité de déconnexion à votre application" },
      { id: "show-the-user-profile", title: "Afficher le profil de l’utilisateur" }
]


<Recipe isSingleColumn>
  <Content>
    Auth0 vous permet d&#39;ajouter rapidement l&#39;authentification et d&#39;accéder aux informations du profil utilisateur dans votre application.
    Ce guide explique comment intégrer Auth0 avec une application Ionic (Vue) et Capacitor en utilisant la [trousse de développement logiciel (SDK) Auth0 Vue](https://github.com/auth0/auth0-vue).

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Ce démarrage rapide suppose que vous avez déjà une application [Ionic](https://ionicframework.com/) fonctionnelle avec [Capacitor](https://capacitorjs.com/). Sinon, consultez le guide [Using
      Capacitor with Ionic Framework](https://capacitorjs.com/docs/getting-started/with-ionic) pour démarrer avec une application simple, ou clonez [nos exemples
      d’applications](https://github.com/auth0-samples/auth0-ionic-samples).

      Vous devriez aussi être à l’aise avec le [flux de travail de développement avec Capacitor](https://capacitorjs.com/docs/basics/workflow).

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Pour utiliser les services Auth0, vous devez avoir une application configurée dans Auth0 Dashboard. C&#39;est dans l&#39;application Auth0
      que vous allez configurer le fonctionnement de l&#39;authentification pour votre projet.

      <Info>
        Dans tout cet article, `YOUR_PACKAGE_ID` correspond à l&#39;ID de package de votre application. Vous pouvez le
        trouver et le configurer dans le champ `appId` de votre fichier `capacitor.config.ts`. Consultez
        [le schéma de configuration de Capacitor](https://capacitorjs.com/docs/config#schema) pour plus d&#39;informations.
      </Info>

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente
      le projet que vous voulez intégrer. Chaque application dans Auth0 reçoit un ID client alphanumérique unique
      que le code de votre application utilisera pour appeler les API Auth0 via la trousse de développement logiciel (SDK).

      Tous les paramètres que vous configurez à l&#39;aide de ce Démarrage rapide seront automatiquement mis à jour pour votre application dans le [Dashboard](https://manage.auth0.com/#/), où vous
      pourrez gérer vos applications par la suite.

      Si vous préférez explorer une configuration complète, vous pouvez plutôt consulter une application d&#39;exemple.

      ### Configurer les URL de rappel (Callback)

      Une URL de rappel est une URL dans votre application vers laquelle vous voulez qu&#39;Auth0 redirige les utilisateurs après qu&#39;ils se sont
      authentifiés. Si elle n&#39;est pas définie, les utilisateurs ne seront pas renvoyés à votre application après s&#39;être connectés.

      <Info>
        Si vous suivez notre projet d&#39;exemple, définissez cette valeur comme
        `YOUR_PACKAGE_ID://{yourDomain}/capacitor/YOUR_PACKAGE_ID/callback`
      </Info>

      ### Configurer les URL de déconnexion

      Une URL de déconnexion est une URL dans votre application vers laquelle vous voulez qu&#39;Auth0 redirige les utilisateurs après qu&#39;ils se sont
      déconnectés. Si elle n&#39;est pas définie, les utilisateurs ne pourront pas se déconnecter de votre application et recevront une erreur.

      <Info>
        Si vous suivez notre projet d&#39;exemple, définissez cette valeur comme
        `YOUR_PACKAGE_ID://{yourDomain}/capacitor/YOUR_PACKAGE_ID/callback`.
      </Info>

      ### Configurer les origines autorisées

      Pour pouvoir effectuer des requêtes depuis votre application native vers Auth0, configurez les **origines autorisées (Allowed Origins)** suivantes dans
      vos [paramètres d&#39;Application](https://manage.auth0.com/#/applications/\{yourClientId}/settings).

      <Info>
        Si vous suivez notre projet d&#39;exemple, définissez cette valeur comme
        `capacitor://localhost, http://localhost` pour iOS et Android, respectivement.
      </Info>

      Enfin, assurez-vous que le **type d&#39;Application (Application Type)** de votre application est défini sur **Native** dans les [paramètres d&#39;Application](https://manage.auth0.com/#/applications/\{yourClientId}/settings).

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Exécutez la commande suivante dans le répertoire de votre projet pour installer la trousse de développement logiciel (SDK) Auth0 pour Vue :

      ```bash
      npm install @auth0/auth0-vue
      ```

      La trousse de développement logiciel (SDK) expose plusieurs types qui vous aident à intégrer Auth0 de manière idiomatique à votre application Vue, notamment un module et un service d’authentification.

      ### Installer les plugiciels Capacitor

      Ce démarrage rapide et l’exemple utilisent certains des plugiciels officiels de Capacitor. Installez-les dans votre application à l’aide de la commande suivante :

      npm install @capacitor/browser @capacitor/app

      * [@capacitor/browser](https://capacitorjs.com/docs/apis/browser) - vous permet d’interagir avec le navigateur
        système de l’appareil et sert à ouvrir l’URL du point de terminaison d’autorisation d’Auth0
      * [@capacitor/app](https://capacitorjs.com/docs/apis/app) - vous permet de vous abonner à des événements
        d’application de haut niveau, utile pour gérer les rappels provenant d’Auth0

      <Info>
        Le plugiciel Browser de Capacitor sur iOS utilise [SFSafariViewController](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller) qui, sur iOS 11 et versions ultérieures, ne partage pas
        les témoins avec Safari sur l’appareil. Cela signifie que la [SSO](https://auth0.com/docs/sso) ne fonctionnera pas sur ces appareils. Si vous avez besoin de SSO, utilisez plutôt un
        plugiciel compatible qui repose sur [ASWebAuthenticationSession](https://developer.apple.com/documentation/authenticationservices/aswebauthenticationsession).
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Le SDK exporte `createAuth0`, un composable qui contient tous les services nécessaires au fonctionnement du SDK. Ce composable doit être enregistré auprès de votre application et configuré avec votre domaine Auth0 et votre Client ID.

      Le composable `createAuth0` accepte la configuration suivante :

      * `domain` : La valeur `domain` indiquée sous **Settings** de l’application que vous
        avez créée dans Auth0 Dashboard, ou votre domaine personnalisé si vous utilisez la [fonctionnalité de domaines personnalisés](http://localhost:3000/docs/custom-domains) d’Auth0.
      * `clientId` : La valeur Client ID indiquée sous **Settings** de l’application que vous avez créée
        dans Auth0 Dashboard.
      * `useRefreshTokens` : Pour utiliser auth0-vue avec Ionic sur Android et iOS, vous devez activer
        les jetons d’actualisation.
      * `useRefreshTokensFallback` : Pour utiliser auth0-vue avec Ionic sur Android et iOS, vous devez
        désactiver le repli basé sur un iframe.
      * `authorizationParams.redirect_uri` : L’URL vers laquelle rediriger vos utilisateurs après leur authentification avec
        Auth0.

      <Info>
        Pour conserver l’authentification après la fermeture et la réouverture de l’application, vous pouvez définir
        `cacheLocation` à `localstorage` lors de la configuration du SDK, mais soyez conscient
        [des risques liés au stockage de jetons dans localstorage](https://auth0.com/docs/libraries/auth0-single-page-app-sdk#change-storage-options). De plus, localstorage doit être considéré
        comme **transitoire** dans une application Capacitor, car les données pourraient être récupérées de façon inattendue dans certaines
        circonstances. Veuillez lire les [recommandations sur le stockage dans la documentation Capacitor](https://capacitorjs.com/docs/guides/storage#why-cant-i-just-use-localstorage-or-indexeddb).

        De plus, le SDK peut [utiliser une implémentation de cache personnalisée](https://github.com/auth0/auth0-spa-js/blob/master/EXAMPLES.md#creating-a-custom-cache) pour stocker les jetons, si
        vous devez utiliser un mécanisme de stockage plus sécurisé et plus persistant.

        **Remarque** : nous déconseillons d’utiliser le [plugiciel Storage de Capacitor](https://capacitorjs.com/docs/apis/storage) pour stocker des jetons, car il repose
        sur [UserDefaults](https://developer.apple.com/documentation/foundation/userdefaults) et [SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences) sur iOS et Android respectivement. Les données stockées à l’aide de
        ces API ne sont pas chiffrées, ne sont pas sécurisées et pourraient aussi être synchronisées vers le nuage.
      </Info>

      <Note>
        ##### Point de contrôle

        Maintenant que vous avez configuré votre application avec le SDK Auth0 Vue, exécutez votre application pour vérifier que le SDK
        s’initialise sans erreur et que votre application fonctionne comme auparavant.
      </Note>

      <AuthCodeGroup>
        <Main />

        <Loginbutton />

        <Logoutbutton />

        <Userprofile />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Dans une application Capacitor, le [plugiciel Browser de Capacitor](https://capacitorjs.com/docs/apis/browser) effectue une redirection vers la [page Universal Login](https://auth0.com/universal-login) d’Auth0. Définissez le paramètre `openUrl`
      sur la fonction `loginWithRedirect` pour utiliser `Browser.open`, afin que l’URL soit
      ouverte à l’aide du composant de navigateur système de l’appareil ([SFSafariViewController](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller) sur iOS et [Chrome
      Custom Tabs](https://developer.chrome.com/docs/android/custom-tabs) sur Android).

      <Info>
        Par défaut, la méthode `loginWithRedirect` du SDK utilise `window.location.href` pour
        accéder à la page de connexion dans l’application de navigation par défaut sur l’appareil de l’utilisateur plutôt que dans le
        composant de navigateur système approprié pour la plateforme. L’utilisateur quitterait votre application pour
        s’authentifier, ce qui pourrait nuire à l’expérience utilisateur.
      </Info>

      <Note>
        ##### Point de contrôle

        La fonction `loginWithRedirect` indique au SDK d’initier le flux de connexion en utilisant la
        fonction `Browser.open` pour ouvrir l’URL de connexion avec le composant de navigateur système de la plateforme en
        définissant le paramètre `openUrl`. Cela offre un moyen à vos utilisateurs de se connecter à votre
        application. Les utilisateurs sont redirigés vers la page de connexion sur Auth0 et ne reçoivent aucune erreur.
      </Note>

      <AuthCodeGroup>
        <Loginbutton />

        <Main />

        <Logoutbutton />

        <Userprofile />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Une fois que les utilisateurs se connectent avec la page Universal Login, ils sont redirigés vers votre application au moyen d’une URL utilisant un schéma d’URL personnalisé. L’événement `appUrlOpen` doit être géré dans votre application. Vous pouvez appeler la méthode `handleRedirectCallback` à partir de la trousse de développement logiciel (SDK) Auth0 pour initialiser l’état d’authentification.

      Vous pouvez uniquement utiliser cette méthode lors d’une redirection en provenance d’Auth0. Pour vérifier si l’opération a réussi, vérifiez la présence des paramètres `code` et `state` dans l’URL.

      La méthode `Browser.close()` doit fermer le navigateur lorsque cet événement est déclenché.

      <Info>
        Cet article suppose que vous utiliserez des schémas d’URL personnalisés (Custom URL Schemes) pour gérer le callback dans votre
        application. Pour ce faire, enregistrez votre `YOUR_PACKAGE_ID` comme schéma d’URL pour la plateforme de votre choix.
        Pour en savoir plus, consultez [Defining a Custom URL Scheme](https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app) pour iOS, ou [Create Deep Links to App Content](https://developer.android.com/training/app-links/deep-linking) pour Android.
      </Info>

      <Note>
        ##### Point de contrôle

        Ajoutez `appUrlOpen` à la configuration de votre composant `App` et ouvrez une session. La
        fenêtre du navigateur devrait se fermer une fois que l’utilisateur est authentifié et connecté à votre application.
      </Note>

      <AuthCodeGroup>
        <Main />

        <Loginbutton />

        <Logoutbutton />

        <Userprofile />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Maintenant que les utilisateurs peuvent se connecter, vous devez configurer [un mécanisme de déconnexion](https://auth0.com/docs/logout/guides/logout-auth0). Les utilisateurs doivent être redirigés vers le point de terminaison de déconnexion Auth0 dans le navigateur pour effacer leur session de navigation. Encore une fois, le plugiciel Browser de Capacitor doit effectuer cette redirection afin que l’utilisateur ne quitte pas votre application et n’ait pas une expérience sous-optimale.

      Pour y arriver avec Ionic et Capacitor en combinaison avec la Trousse de développement logiciel (SDK) Auth0 :

      * Construisez l’URL de votre application qu’Auth0 doit utiliser pour la redirection après la déconnexion. Il s’agit d’une URL qui utilise votre schéma personnalisé enregistré et votre Domaine Auth0. Ajoutez-la à la configuration **URL de déconnexion autorisées** dans l’Auth0 Dashboard.
      * Effectuez la déconnexion à partir du SDK en appelant `logout`, et transmettez votre URL de redirection en tant que paramètre `logoutParams.returnTo`.
      * Définissez le paramètre `openUrl` sur une fonction de rappel (callback) qui utilise le plugiciel Browser de Capacitor pour ouvrir l’URL avec `Browser.open`.

      <Info>
        Comme pour l’étape de connexion, si vous ne définissez pas `openUrl` lors de l’appel à `logout`, le SDK redirige l’utilisateur vers l’URL de déconnexion à l’aide de l’application de navigation par défaut sur l’appareil, ce qui entraîne une expérience utilisateur sous-optimale.
      </Info>

      <Note>
        ##### Point de contrôle

        Offrez à vos utilisateurs un moyen de se déconnecter de votre application. Vérifiez que vous les redirigez vers Auth0, puis vers l’adresse que vous avez indiquée dans le paramètre `returnTo`. Assurez-vous que vous n’êtes plus connecté à votre application.
      </Note>

      <AuthCodeGroup>
        <Logoutbutton />

        <Main />

        <Loginbutton />

        <Userprofile />
      </AuthCodeGroup>
    </Section>

    <Section id={sections[7].id} title={sections[7].title} stepNumber="8" isSingleColumn>
      La trousse de développement logiciel (SDK) Auth0 Vue récupère le [profil de l’utilisateur](https://auth0.com/docs/users/concepts/overview-user-profile) associé aux utilisateurs connectés dans n’importe quel composant où vous en avez besoin, par exemple leur
      nom ou leur photo de profil, afin de personnaliser l’interface utilisateur. Les informations de profil sont accessibles par l’entremise de la propriété
      `user` exposée par le composable `useAuth0()`.

      L’initialisation du SDK est asynchrone et vous devez contrôler l’accès au profil de l’utilisateur en vérifiant les propriétés
      `isLoading` et `user`. Une fois que `isLoading` est à `false` et que
      `user` a une valeur, vous pouvez utiliser le profil de l’utilisateur.

      <Note>
        ##### Point de contrôle

        Offrez à vos utilisateurs un moyen d’afficher les détails de leur profil d’utilisateur dans l’application et vérifiez que vous pouvez
        récupérer et afficher vos informations de profil à l’écran une fois que vous êtes connecté.
      </Note>

      <AuthCodeGroup>
        <Userprofile />

        <Main />

        <Loginbutton />

        <Logoutbutton />
      </AuthCodeGroup>
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Apprenez à configurer et à gérer votre tenant Auth0 et vos applications
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrez des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>
</Recipe>