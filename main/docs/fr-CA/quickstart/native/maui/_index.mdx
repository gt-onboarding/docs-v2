---
title: Ajouter la connexion à votre application MAUI
sidebarTitle: MAUI

---

import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/fr-CA/recipe.jsx";
import { LoggedInForm } from "/snippets/fr-CA/Login.jsx";
import MainpageXaml from "/snippets/fr-CA/quickstart/native/maui/MainPage.xaml.cs.mdx";
import MainpageXaml2 from "/snippets/fr-CA/quickstart/native/maui/MainPage.xaml.cs2.mdx";
import MainpageXaml3 from "/snippets/fr-CA/quickstart/native/maui/MainPage.xaml.cs3.mdx";
import MainpageXaml4 from "/snippets/fr-CA/quickstart/native/maui/MainPage.xaml.cs4.mdx";

export const sections = [
      { id: "configure-auth0", title: "Configurer Auth0" },
      { id: "install-the-auth0-sdk", title: "Installer la Trousse de développement logiciel (SDK) Auth0" },
      { id: "platform-specific-configuration", title: "Configuration propre à la plateforme" },
      { id: "instantiate-the-auth0client", title: "Instancier Auth0Client" },
      { id: "add-login-to-your-application", title: "Ajouter la fonctionnalité de connexion à votre application" },
      { id: "add-logout-to-your-application", title: "Ajouter la fonctionnalité de déconnexion à votre application" },
      { id: "show-user-profile-information", title: "Afficher les informations de profil de l’utilisateur" }
]


<Recipe isSingleColumn>
  <Content>
    Auth0 vous permet d&#39;ajouter rapidement l&#39;authentification à presque n&#39;importe quel type d&#39;application. Ce guide explique comment
    intégrer Auth0, ajouter l&#39;authentification et afficher les informations de profil utilisateur dans n&#39;importe quelle application .NET MAUI à l&#39;aide des
    Trousses de développement logiciel (SDK) Auth0 pour [MAUI](https://www.nuget.org/packages/Auth0.OidcClient.MAUI/).

    <Info>
      La trousse de développement logiciel (SDK) MAUI prend en charge Android, iOS, macOS et Windows. Lisez la suite pour connaître la configuration propre à chaque plateforme.
    </Info>

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Pour utiliser les services Auth0, vous devez avoir une application configurée dans l’Auth0 Dashboard. C’est dans cette application Auth0 que vous allez définir le fonctionnement de l’authentification pour le projet que vous développez.

      ### Configurer une application

      Utilisez le sélecteur interactif pour créer une nouvelle application Auth0 ou sélectionner une application existante qui représente
      le projet que vous voulez intégrer. Chaque application dans Auth0 se voit attribuer un ID client alphanumérique unique
      que le code de votre application utilisera pour appeler les API Auth0 au moyen de la trousse de développement logiciel (SDK).

      Tous les paramètres que vous configurez à l’aide de ce Démarrage rapide seront automatiquement mis à jour pour votre application dans le [Dashboard](https://manage.auth0.com/#/), où vous
      pourrez gérer vos applications par la suite.

      Si vous préférez explorer une configuration complète, vous pouvez plutôt consulter une application d’exemple.

      ### Configurer les URL de rappel (Callback URLs)

      Une URL de rappel est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après qu’ils se sont
      authentifiés. Si elle n’est pas définie, les utilisateurs ne seront pas renvoyés à votre application après leur connexion.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur sur `myapp://callback`.
      </Info>

      ### Configurer les URL de déconnexion (Logout URLs)

      Une URL de déconnexion est une URL dans votre application vers laquelle vous voulez qu’Auth0 redirige les utilisateurs après qu’ils se sont
      déconnectés. Si elle n’est pas définie, les utilisateurs ne pourront pas se déconnecter à partir de votre application et recevront une erreur.

      <Info>
        Si vous suivez notre projet d’exemple, définissez cette valeur sur `myapp://callback`.
      </Info>

      <LoggedInForm />
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Auth0 fournit une Trousse de développement logiciel (SDK) [MAUI](https://www.nuget.org/packages/Auth0.OidcClient.MAUI/) pour simplifier la mise en œuvre de l’authentification Auth0 dans les applications MAUI.

      Utilisez le NuGet Package Manager (Tools -&gt; Library Package Manager -&gt; Package Manager Console) pour installer le package `Auth0.OidcClient.MAUI`.

      Vous pouvez aussi utiliser la NuGet Package Manager Console (`Install-Package`) ou l’interface de ligne de commande `dotnet` (`dotnet add`).

      ```
      Install-Package Auth0.OidcClient.MAUI
      ```

      ```
      dotnet add package Auth0.OidcClient.MAUI
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      Vous devez effectuer une configuration propre à chaque plateforme pour utiliser la trousse de développement logiciel (SDK) avec Android et Windows.

      ### Android

      Créez une nouvelle Activity qui étend `WebAuthenticatorCallbackActivity` :

      ```cs lines
      [Activity(NoHistory = true, LaunchMode = LaunchMode.SingleTop, Exported = true)]
      [IntentFilter(new[] { Intent.ActionView },
      Categories = new[] { Intent.CategoryDefault, Intent.CategoryBrowsable },
      DataScheme = CALLBACK_SCHEME)]
      public class WebAuthenticatorActivity : Microsoft.Maui.Authentication.WebAuthenticatorCallbackActivity
      {
      const string CALLBACK_SCHEME = "myapp";
      }
      ```

      L’activité ci-dessus permettra à l’application de gérer l’URL `myapp://callback` lorsque Auth0
      redirigera vers l’application Android après la connexion.

      ### Windows

      Pour vous assurer que votre application puisse être correctement réactivée après avoir été redirigée depuis Auth0, vous devez faire deux
      choses :

      * Ajouter le protocole correspondant au `Package.appxmanifest`. Dans ce cas, il est défini sur
        `myapp`, mais vous pouvez le remplacer par la valeur de votre choix (assurez-vous également de mettre à jour toutes les URL Auth0 pertinentes).

      ```xml lines
      <Applications>
      <Application Id="App" Executable="$targetnametoken$.exe" EntryPoint="$targetentrypoint$">
      <Extensions>
      <uap:Extension Category="windows.protocol">
      <uap:Protocol Name="myapp"/>
      </uap:Extension>
      </Extensions>
      </Application>
      </Applications>
      ```

      * Appelez `Activator.Default.CheckRedirectionActivation()` dans le fichier
        `App.xaml.cs` spécifique à Windows.

      ```cs lines
      public App()
      {
      if (Auth0.OidcClient.Platforms.Windows.Activator.Default.CheckRedirectionActivation())
      return;
      this.InitializeComponent();
      }
      ```

      <LoggedInForm />
    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Pour intégrer Auth0 à votre application, instanciez un objet de la classe `Auth0Client`, en transmettant
      une instance de `Auth0ClientOptions` qui contient votre Domaine Auth0, votre ID client et les scopes requis.
      De plus, vous devez configurer `RedirectUri` et `PostLogoutRedirectUri` pour
      vous assurer qu’Auth0 peut rediriger vers l’application à l’aide de la ou des URL configurées.

      ```cs lines
      using Auth0.OidcClient;
      var client = new Auth0Client(new Auth0ClientOptions {
      Domain = "{yourDomain}",
      ClientId = "{yourClientId}",
      RedirectUri = "myapp://callback",
      PostLogoutRedirectUri = "myapp://callback",
      Scope = "openid profile email"
      });
      ```

      By default, la Trousse de développement logiciel (SDK) utilisera Chrome Custom Tabs pour Android, ASWebAuthenticationSession pour iOS et macOS
      et le navigateur par défaut de votre système sous Windows.

      <Note>
        ##### Étape de vérification

        Votre `Auth0Client` doit maintenant être correctement instancié. Exécutez votre application pour vérifier que :

        * Le `Auth0Client` est correctement instancié dans `MainPage`.
        * Votre application ne génère aucune erreur liée à Auth0.
      </Note>

      <MainpageXaml />
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5" isSingleColumn>
      Maintenant que vous avez configuré votre Auth0 Application et la trousse de développement logiciel (SDK) Auth0, vous devez mettre en place la fonctionnalité de connexion pour votre projet.
      Pour ce faire, vous utiliserez la méthode `LoginAsync()` du SDK pour créer un bouton de connexion qui redirige les utilisateurs vers la page Auth0 Universal Login.

      ```cs lines
      var loginResult = await client.LoginAsync();
      ```

      S’il n’y a aucune erreur, vous pouvez accéder à `User`, `IdentityToken`,
      `AccessToken` et `RefreshToken` sur le `LoginResult` retourné par
      `LoginAsync()`.

      <Note>
        ##### Point de contrôle

        Vous devriez maintenant pouvoir ouvrir une session ou vous inscrire à l’aide d’un nom d’utilisateur et d’un mot de passe.

        Cliquez sur le bouton de connexion et vérifiez que :

        * Votre application vous redirige vers la page Auth0 Universal Login.
        * Vous pouvez ouvrir une session ou vous inscrire.
        * Auth0 vous redirige vers votre application.
      </Note>

      <MainpageXaml2 />
    </Section>

    <Section id={sections[5].id} title={sections[5].title} stepNumber="6" isSingleColumn>
      Les utilisateurs qui se connectent à votre projet auront aussi besoin d’un moyen de se déconnecter. Créez un bouton de déconnexion à l’aide de la méthode `LogoutAsync()` de la trousse de développement logiciel (SDK). Lorsque les utilisateurs se déconnectent, ils seront redirigés vers votre point de terminaison de déconnexion Auth0, qui les redirigera ensuite immédiatement vers l’URL de déconnexion que vous avez configurée précédemment dans ce démarrage rapide.

      ```cs lines
      await client.LogoutAsync();
      ```

      <Note>
        ##### Point de contrôle

        Exécutez votre application et cliquez sur le bouton de déconnexion, puis vérifiez que :

        * Votre application vous redirige vers l’adresse que vous avez spécifiée comme l’une des URL de déconnexion autorisées dans vos paramètres de l’Application.
        * Vous n’êtes plus connecté à votre application.
      </Note>

      <MainpageXaml3 />
    </Section>

    <Section id={sections[6].id} title={sections[6].title} stepNumber="7" isSingleColumn>
      Maintenant que vos utilisateurs peuvent se connecter et se déconnecter, vous voudrez probablement pouvoir récupérer les [renseignements de profil](https://auth0.com/docs/users/concepts/overview-user-profile)
      associés aux utilisateurs authentifiés. Par exemple, vous pourriez vouloir afficher le nom d’un utilisateur connecté ou
      sa photo de profil dans votre projet.

      La Trousse de développement logiciel (SDK) Auth0 pour MAUI fournit les renseignements sur l’utilisateur au moyen de la propriété `LoginResult.User`.

      <MainpageXaml4 />
    </Section>

    ## Prochaines étapes

    Excellent travail! Si vous vous êtes rendu jusqu&#39;ici, vous devriez maintenant avoir la connexion, la déconnexion et les informations de profil utilisateur qui fonctionnent dans votre application.

    Ce tutoriel de démarrage rapide est maintenant terminé, mais il reste encore beaucoup à découvrir. Pour en savoir plus sur ce que vous pouvez faire avec Auth0, consultez :

    * [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Apprenez à configurer et à gérer votre tenant Auth0 et vos Applications
    * [Trousse de développement logiciel (SDK) auth0-oidc-client-net](https://github.com/auth0/auth0-oidc-client-net) - Explorez plus en détail la trousse de développement logiciel (SDK) utilisée dans ce tutoriel
    * [Auth0 Marketplace](https://marketplace.auth0.com/) - Découvrir des intégrations que vous pouvez activer pour étendre les fonctionnalités d’Auth0
  </Content>
</Recipe>