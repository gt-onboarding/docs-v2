---
title: "Configurer un serveur de ressources pour Sender Constraining"
permalink: "configure-resource-server-for-sender-constraining"
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">
Pour utiliser les fonctionnalités Highly Regulated Identity, vous devez avoir un forfait Enterprise avec l’option supplémentaire Highly Regulated Identity. Consultez la page des [tarifs Auth0](https://auth0.com/pricing/) pour plus de détails.
</Callout>

Lorsque vous activez Sender Constraining pour une API, le serveur de ressources doit appliquer Sender Constraining chaque fois que le client appelle le serveur de ressources avec un jeton d’accès lié à un certificat. Le serveur de ressources procède comme suit :

1. en demandant le certificat client à partir de la connexion mTLS établie
2. en vérifiant que l’empreinte du certificat client correspond à l’empreinte figurant dans le jeton d’accès

Pour configurer un serveur de ressources pour Sender Constraining, consultez [Activer Sender Constraining pour un serveur de ressources](#enable-sender-constraining-for-a-resource-server).

<div id="client-certificate-verification">
  ## Vérification du certificat client
</div>

Contrairement au Serveur d’autorisation ou au périmètre réseau du client, le serveur de ressources doit seulement vérifier l’empreinte du certificat client plutôt que l’ensemble de sa chaîne de certificats. Pour la contrainte d’expéditeur mTLS, le serveur de ressources examine la revendication `cnf` du jeton d’accès :

```
"cnf":{"x5t#S256":"A4DtL2JmUMhAsvJj5tKyn64SqzmuXbMrJa0n761y5v0"}
```

Dans notre exemple de revendication `cnf`, `x5t#S256` indique que le jeton d’accès est lié à un certificat client mTLS ayant une empreinte `A4DtL2JmUMhAsvJj5tKyn64SqzmuXbMrJa0n761y5v0`. Pour réussir la vérification du certificat client, le serveur de ressources doit vérifier que le certificat client possède une empreinte correspondante de `A4DtL2JmUMhAsvJj5tKyn64SqzmuXbMrJa0n761y5v0`. Pour en savoir plus sur la façon dont l’empreinte est calculée, consultez la section de la RFC 8705 sur la [méthode de confirmation par empreinte de certificat JWT](https://www.rfc-editor.org/rfc/rfc8705#name-jwt-certificate-thumbprint-).

Si le certificat client n’a pas été envoyé, ou si l’empreinte du certificat client ne correspond pas, le serveur de ressources rejette la requête à l’aide d’un code d’état `HTTP 401` et d’un code d’erreur `invalid_token`. Pour en savoir plus, consultez les sections de la RFC 8705 sur les [jetons d’accès liés à un certificat client Mutual‑TLS](https://www.rfc-editor.org/rfc/rfc8705#name-mutual-tls-client-certifica) et les [serveurs de ressources](https://www.rfc-editor.org/rfc/rfc8705#name-resource-server).

Les serveurs de ressources qui migrent progressivement les clients vers l’utilisation de mTLS peuvent choisir d’exposer leur API sur deux domaines : un domaine non mTLS pour les clients non mTLS et un domaine activé pour mTLS pour les clients compatibles mTLS. Une autre option consiste à créer un serveur de ressources entièrement distinct, réservé à mTLS, sur un domaine activé pour mTLS.


<div id="configure-sender-constraining-for-a-resource-server-in-auth0">
  ## Configurer la limitation à l’émetteur (Sender Constraining) pour un serveur de ressources dans Auth0
</div>

Les jetons d’accès émis par Auth0 peuvent être limités à l’émetteur (c.-à-d. l’application cliente) qui doit accéder aux API sur un serveur de ressources.

Utilisez l’[Auth0 Dashboard](https://manage.auth0.com/#/apis) ou la [Management API](https://auth0.com/docs/api/management/v2) pour activer la limitation à l’émetteur (Sender Constraining) pour un serveur de ressources.

<Tabs>
  <Tab title="Auth0 Dashboard">
    Pour activer Token Binding ou la limitation à l’émetteur, configurez les **API Settings** de votre API.

    1. Accédez à [Auth0 Dashboard > Applications > APIs](https://manage.auth0.com/#/apis).
    2. Sélectionnez l’API que vous voulez configurer.
    3. Sous l’onglet **Settings**, trouvez la section **Token Sender-Constraining**.
    4. Configurez ce qui suit :

      1. Sender Constraining Method :

          1. **None :** N’activez aucune méthode de limitation à l’émetteur pour votre serveur de ressources.
          2. **mTLS** : Activez mTLS comme méthode de limitation à l’émetteur pour votre serveur de ressources.
          3. **DPoP :** Activez DPoP comme méthode de limitation à l’émetteur pour votre serveur de ressources.

    B. Activez **Require Token Sender Constraining**. Tous les jetons d’accès émis pour une application pour cette API seront limités à cette application.

    <Frame>![Auth0 Dashboard > APIs > Settings > Token binding](/docs/images/cdy7uua7fh8z/3Dv98iZosdpJMcZXfXyurn/823fa368ab874218fbb737aacac9b262/Screenshot_2025-07-28_at_3.59.01_PM.png)</Frame>

  </Tab>
  <Tab title="Management API">
    Pour activer la limitation à l’émetteur (Sender Constraining) avec la Management API, envoyez une requête PATCH pour [mettre à jour le serveur de ressources](https://auth0.com/docs/api/management/v2/resource-servers/patch-resource-servers-by-id). Configurez les paramètres de l’objet `proof_of_possession` comme suit :

    <table class="table"><thead>
    <tr>
    <th><strong>Paramètre</strong></th>
    <th><strong>Description</strong></th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td><code>mechanism</code></td>
    <td>Définit la méthode de limitation à l’émetteur : <code>none</code>, <code>mtls</code> ou <code>dpop</code>.</td>
    </tr>
    <tr>
    <td><code>required</code></td>
    <td>Lorsque la valeur est <code>true</code>, tous les jetons d’accès émis pour une application pour cette API seront limités à cette application. Lorsque la valeur est <code>false</code>, la limitation à l’émetteur n’est pas requise pour l’application.</td>
    </tr>
    </tbody>
    </table>

    L’exemple de code suivant illustre un corps de requête qui configure un serveur de ressources pour la limitation à l’émetteur mTLS :

    ```json
    "proof_of_possession": {
        "mechanism": "mtls",
        "required": true
      }
    ```
  </Tab>
</Tabs>