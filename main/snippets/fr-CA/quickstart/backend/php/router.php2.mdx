```php router.php lines highlight={21-31}
<?php

      declare(strict_types=1);

      use Steampixel\Route;

      function routeResponse(
array $response
      ) {
header('Content-Type: application/json');
print(json_encode($response, JSON_PRETTY_PRINT));
      }

      Route::add('/api/public', function() use ($token) {
routeResponse([
  'message' => 'Bonjour d\'un point de terminaison public! Vous n\'avez pas besoin d\'être authentifié pour voir ceci.',
  'token' => $token
]);
      });

      Route::add('/api/private', function() use ($token) {
if ($token === null) {
  http_response_code(401);
  exit;
}

routeResponse([
  'message' => 'Bonjour d\'un point de terminaison privé! Vous devez être authentifié pour voir ceci.',
  'token' => $token,
]);
      });

      Route::add('/api/private-scoped', function() use ($token) {
if ($token === null) {
  http_response_code(401);
  exit;
}

if (! in_array('read:messages', $token['scopes'], true)) {
  http_response_code(401);
  exit;
}

routeResponse([
  'message' => 'Bonjour d\'un point de terminaison privé! Vous devez être authentifié et avoir la portée read:messages pour voir ceci.',
  'token' => $token,
]);
      });

      // La route suivante sert uniquement à éviter toute confusion.
      // Nous n'utilisons pas de « route d'index » dans cette application, donc les requêtes sont redirigées vers /api/public.
      Route::add('/', function() {
header('Location: /api/public');
      });

      Route::run();
```
